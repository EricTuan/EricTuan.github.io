<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
<title>Eric Tuan</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">



    <meta property="og:type" content="website">
<meta property="og:title" content="Eric Tuan">
<meta property="og:url" content="http://yoursite.com/page/3/index.html">
<meta property="og:site_name" content="Eric Tuan">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Eric Tuan">





<link rel="icon" href="/images/logo.png">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css">


    
    
    
    <style>body>.footer,body>.navbar,body>.section{opacity:0}</style>
    

    
    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">
    

    
    

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">


    
    
    
    

<link rel="stylesheet" href="/css/back-to-top.css">


    
    

    
    
<script>
var _hmt = _hmt || [];
(function() {
    var hm = document.createElement("script");
    hm.src = "//hm.baidu.com/hm.js?8b15341149dd72c215e2e84f172591d2";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
})();
</script>

    
    

    
    
<link rel="stylesheet" href="/css/progressbar.css">
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>

    
    
    

    
    
    
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    

    
    
    


<link rel="stylesheet" href="/css/style.css">
</head>
<body class="is-3-column">
    <nav class="navbar navbar-main">
    <div class="container">
        <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/">
            
                <img src="/images/icon.png" alt="Eric Tuan" height="28">
            
            </a>
        </div>
        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item" href="/">Home</a>
                
                <a class="navbar-item" href="/archives">Archives</a>
                
                <a class="navbar-item" href="/categories">Categories</a>
                
                <a class="navbar-item" href="/tags">Tags</a>
                
                <a class="navbar-item" href="/about">About</a>
                
            </div>
            
            <div class="navbar-end">
                
                    
                    
                    <a class="navbar-item" target="_blank" title="My GitHub" href="https://github.com/EricTuan">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                    
                
                
                
                <a class="navbar-item search" title="Search" href="javascript:;">
                    <i class="fas fa-search"></i>
                </a>
                
            </div>
        </div>
    </div>
</nav>
    
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-8-tablet is-8-desktop is-6-widescreen has-order-2 column-main">
    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-01-01T07:55:37.000Z">2019-01-01</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/python/">python</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/python/基础/">基础</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    a few seconds read (About 18 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/01/01/python装饰器/">python装饰器</a>
            
        </h1>
        <div class="content">
            <p><a href="https://blog.csdn.net/jacke121/article/details/77937465" target="_blank" rel="noopener">Python 装饰器记录总结 (终极版)</a></p>

        </div>
        
        
        
    </div>
</div>









    <div id="toc-div" class="toc-article">
        <strong class="toc-title">Index</strong>
        
            
        
    </div>

<p><a href="https://blog.csdn.net/jacke121/article/details/77937465" target="_blank" rel="noopener">Python 装饰器记录总结 (终极版)</a></p>


    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-01-01T07:55:37.000Z">2019-01-01</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/github/">github</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/github/个人博客/">个人博客</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    3 minutes read (About 397 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/01/01/个人博客的搭建/">基于hexo和icarus的个人博客搭建</a>
            
        </h1>
        <div class="content">
            <a id="more"></a>
<h3 id="主题地址"><a href="#主题地址" class="headerlink" title="主题地址"></a>主题地址</h3><p><a href="https://blog.zhangruipeng.me/hexo-theme-icarus/" target="_blank" rel="noopener">https://blog.zhangruipeng.me/hexo-theme-icarus/</a></p>
<p><a href="https://blog.csdn.net/lmj623565791/article/details/82766956" target="_blank" rel="noopener">https://blog.csdn.net/lmj623565791/article/details/82766956</a></p>
<h3 id="站点注册"><a href="#站点注册" class="headerlink" title="站点注册"></a>站点注册</h3><p><a href="https://ziyuan.baidu.com/linksubmit/url" target="_blank" rel="noopener">https://ziyuan.baidu.com/linksubmit/url</a></p>
<h3 id="上传图片时最好进行压缩"><a href="#上传图片时最好进行压缩" class="headerlink" title="上传图片时最好进行压缩"></a>上传图片时最好进行压缩</h3><p><a href="https://www.jb51.net/LINUXjishu/335617.html" target="_blank" rel="noopener">https://www.jb51.net/LINUXjishu/335617.html</a><br>    1350  jpegoptim -d compressed/ brain_3-wallpaper-1920x1080.jpg<br>    1352  jpegoptim brain_3-wallpaper-1920x1080.jpg     </p>
<h3 id="修改图标–svg文件"><a href="#修改图标–svg文件" class="headerlink" title="修改图标–svg文件"></a>修改图标–svg文件</h3><p>用PPT做了图标,然后保存为图片</p>
<h3 id="修改about页面"><a href="#修改about页面" class="headerlink" title="修改about页面"></a>修改about页面</h3><p><a href="https://blog.csdn.net/lcyaiym/article/details/76768762" target="_blank" rel="noopener">https://blog.csdn.net/lcyaiym/article/details/76768762</a></p>
<h3 id="使用自己的域名"><a href="#使用自己的域名" class="headerlink" title="使用自己的域名"></a>使用自己的域名</h3><p><a href="https://blog.csdn.net/linshuhe1/article/details/73013730" target="_blank" rel="noopener">https://blog.csdn.net/linshuhe1/article/details/73013730</a></p>
<h3 id="分享功能-Share-js-Share-Plugin"><a href="#分享功能-Share-js-Share-Plugin" class="headerlink" title="分享功能 Share.js Share Plugin"></a>分享功能 Share.js Share Plugin</h3><p><a href="https://github.com/overtrue/share.js.git" target="_blank" rel="noopener">https://github.com/overtrue/share.js.git</a>, 克隆到根目录</p>
<h3 id="文章只显示摘要"><a href="#文章只显示摘要" class="headerlink" title="文章只显示摘要"></a>文章只显示摘要</h3><p>Add <!-- more --> tag in your post. Post content before this tag will be marked as an excerpt and content after this tag will not show on the index page.</p>
<h3 id="站长统计"><a href="#站长统计" class="headerlink" title="站长统计:"></a>站长统计:</h3><p><a href="https://blog.csdn.net/Sophie_U/article/details/84326459" target="_blank" rel="noopener">给Hexo主题博客加入百度站点统计</a></p>
<h3 id="添加评论"><a href="#添加评论" class="headerlink" title="添加评论"></a>添加评论</h3><p><a href="https://valine.js.org/quickstart.html" target="_blank" rel="noopener">https://valine.js.org/quickstart.html</a>, 注册</p>
<h3 id="添加文章的图片"><a href="#添加文章的图片" class="headerlink" title="添加文章的图片"></a>添加文章的图片</h3><p>thumbnail: ../../../source/_gallery/  放到这个文件夹下</p>
<h3 id="添加tag-修改category"><a href="#添加tag-修改category" class="headerlink" title="添加tag, 修改category"></a>添加tag, 修改category</h3><p><a href="https://www.jianshu.com/p/3e341d86acd2" target="_blank" rel="noopener">hexo博客换主题–icarus</a></p>
<h3 id="添加文章目录"><a href="#添加文章目录" class="headerlink" title="添加文章目录"></a>添加文章目录</h3><p>toc: true  文章中不用写1.1,2.3,目录会自动生成</p>
<h3 id="修改个人头像"><a href="#修改个人头像" class="headerlink" title="修改个人头像"></a>修改个人头像</h3><h3 id="调整在post时显示为两栏布局"><a href="#调整在post时显示为两栏布局" class="headerlink" title="调整在post时显示为两栏布局"></a>调整在post时显示为两栏布局</h3><p><a href="https://github.com/ppoffice/hexo-theme-icarus/issues/379" target="_blank" rel="noopener">https://github.com/ppoffice/hexo-theme-icarus/issues/379</a></p>
<h3 id="并列显示图像"><a href="#并列显示图像" class="headerlink" title="并列显示图像"></a>并列显示图像</h3><p>use Justified Gallery to display you photos in a grid</p>
<div class="justified-gallery"><br><img src="/hexo-theme-icarus/gallery/animals/elephant.jpeg" alt="Elephant"><br><img src="/hexo-theme-icarus/gallery/animals/dog.jpeg" alt="Dog"><br><img src="/hexo-theme-icarus/gallery/animals/birds.jpeg" alt="Birds"><br><img src="/hexo-theme-icarus/gallery/animals/cat.jpeg" alt="Cat"><br><img src="/hexo-theme-icarus/gallery/animals/fox.jpeg" alt="Fox"><br><img src="/hexo-theme-icarus/gallery/animals/horse.jpeg" alt="Horse"><br><img src="/hexo-theme-icarus/gallery/animals/leopard.jpeg" alt="Leopard"><br></div>

<h3 id="未知功能"><a href="#未知功能" class="headerlink" title="未知功能"></a>未知功能</h3><p>comments: false</p>
<ul>
<li>meta:</li>
<li><ul>
<li>name=”robots”;content=”noindex, follow”</li>
</ul>
</li>
<li><ul>
<li>name=”another-meta”;value=”hello world”;enabled=false</li>
</ul>
</li>
</ul>
<h3 id="待添加功能"><a href="#待添加功能" class="headerlink" title="待添加功能"></a>待添加功能</h3><p>评论点赞,置顶; 更改主题色调及背景</p>

        </div>
        
        
        
    </div>
</div>









    <div id="toc-div" class="toc-article">
        <strong class="toc-title">Index</strong>
        
            <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#主题地址"><span class="toc-number">1.</span> <span class="toc-text">主题地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#站点注册"><span class="toc-number">2.</span> <span class="toc-text">站点注册</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#上传图片时最好进行压缩"><span class="toc-number">3.</span> <span class="toc-text">上传图片时最好进行压缩</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修改图标–svg文件"><span class="toc-number">4.</span> <span class="toc-text">修改图标–svg文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修改about页面"><span class="toc-number">5.</span> <span class="toc-text">修改about页面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用自己的域名"><span class="toc-number">6.</span> <span class="toc-text">使用自己的域名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#分享功能-Share-js-Share-Plugin"><span class="toc-number">7.</span> <span class="toc-text">分享功能 Share.js Share Plugin</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#文章只显示摘要"><span class="toc-number">8.</span> <span class="toc-text">文章只显示摘要</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#站长统计"><span class="toc-number">9.</span> <span class="toc-text">站长统计:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#添加评论"><span class="toc-number">10.</span> <span class="toc-text">添加评论</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#添加文章的图片"><span class="toc-number">11.</span> <span class="toc-text">添加文章的图片</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#添加tag-修改category"><span class="toc-number">12.</span> <span class="toc-text">添加tag, 修改category</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#添加文章目录"><span class="toc-number">13.</span> <span class="toc-text">添加文章目录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修改个人头像"><span class="toc-number">14.</span> <span class="toc-text">修改个人头像</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#调整在post时显示为两栏布局"><span class="toc-number">15.</span> <span class="toc-text">调整在post时显示为两栏布局</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#并列显示图像"><span class="toc-number">16.</span> <span class="toc-text">并列显示图像</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#未知功能"><span class="toc-number">17.</span> <span class="toc-text">未知功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#待添加功能"><span class="toc-number">18.</span> <span class="toc-text">待添加功能</span></a></li></ol>
        
    </div>

<a id="more"></a>
<h3 id="主题地址"><a href="#主题地址" class="headerlink" title="主题地址"></a>主题地址</h3><p><a href="https://blog.zhangruipeng.me/hexo-theme-icarus/" target="_blank" rel="noopener">https://blog.zhangruipeng.me/hexo-theme-icarus/</a></p>
<p><a href="https://blog.csdn.net/lmj623565791/article/details/82766956" target="_blank" rel="noopener">https://blog.csdn.net/lmj623565791/article/details/82766956</a></p>
<h3 id="站点注册"><a href="#站点注册" class="headerlink" title="站点注册"></a>站点注册</h3><p><a href="https://ziyuan.baidu.com/linksubmit/url" target="_blank" rel="noopener">https://ziyuan.baidu.com/linksubmit/url</a></p>
<h3 id="上传图片时最好进行压缩"><a href="#上传图片时最好进行压缩" class="headerlink" title="上传图片时最好进行压缩"></a>上传图片时最好进行压缩</h3><p><a href="https://www.jb51.net/LINUXjishu/335617.html" target="_blank" rel="noopener">https://www.jb51.net/LINUXjishu/335617.html</a><br>    1350  jpegoptim -d compressed/ brain_3-wallpaper-1920x1080.jpg<br>    1352  jpegoptim brain_3-wallpaper-1920x1080.jpg     </p>
<h3 id="修改图标–svg文件"><a href="#修改图标–svg文件" class="headerlink" title="修改图标–svg文件"></a>修改图标–svg文件</h3><p>用PPT做了图标,然后保存为图片</p>
<h3 id="修改about页面"><a href="#修改about页面" class="headerlink" title="修改about页面"></a>修改about页面</h3><p><a href="https://blog.csdn.net/lcyaiym/article/details/76768762" target="_blank" rel="noopener">https://blog.csdn.net/lcyaiym/article/details/76768762</a></p>
<h3 id="使用自己的域名"><a href="#使用自己的域名" class="headerlink" title="使用自己的域名"></a>使用自己的域名</h3><p><a href="https://blog.csdn.net/linshuhe1/article/details/73013730" target="_blank" rel="noopener">https://blog.csdn.net/linshuhe1/article/details/73013730</a></p>
<h3 id="分享功能-Share-js-Share-Plugin"><a href="#分享功能-Share-js-Share-Plugin" class="headerlink" title="分享功能 Share.js Share Plugin"></a>分享功能 Share.js Share Plugin</h3><p><a href="https://github.com/overtrue/share.js.git" target="_blank" rel="noopener">https://github.com/overtrue/share.js.git</a>, 克隆到根目录</p>
<h3 id="文章只显示摘要"><a href="#文章只显示摘要" class="headerlink" title="文章只显示摘要"></a>文章只显示摘要</h3><p>Add <!-- more --> tag in your post. Post content before this tag will be marked as an excerpt and content after this tag will not show on the index page.</p>
<h3 id="站长统计"><a href="#站长统计" class="headerlink" title="站长统计:"></a>站长统计:</h3><p><a href="https://blog.csdn.net/Sophie_U/article/details/84326459" target="_blank" rel="noopener">给Hexo主题博客加入百度站点统计</a></p>
<h3 id="添加评论"><a href="#添加评论" class="headerlink" title="添加评论"></a>添加评论</h3><p><a href="https://valine.js.org/quickstart.html" target="_blank" rel="noopener">https://valine.js.org/quickstart.html</a>, 注册</p>
<h3 id="添加文章的图片"><a href="#添加文章的图片" class="headerlink" title="添加文章的图片"></a>添加文章的图片</h3><p>thumbnail: ../../../source/_gallery/  放到这个文件夹下</p>
<h3 id="添加tag-修改category"><a href="#添加tag-修改category" class="headerlink" title="添加tag, 修改category"></a>添加tag, 修改category</h3><p><a href="https://www.jianshu.com/p/3e341d86acd2" target="_blank" rel="noopener">hexo博客换主题–icarus</a></p>
<h3 id="添加文章目录"><a href="#添加文章目录" class="headerlink" title="添加文章目录"></a>添加文章目录</h3><p>toc: true  文章中不用写1.1,2.3,目录会自动生成</p>
<h3 id="修改个人头像"><a href="#修改个人头像" class="headerlink" title="修改个人头像"></a>修改个人头像</h3><h3 id="调整在post时显示为两栏布局"><a href="#调整在post时显示为两栏布局" class="headerlink" title="调整在post时显示为两栏布局"></a>调整在post时显示为两栏布局</h3><p><a href="https://github.com/ppoffice/hexo-theme-icarus/issues/379" target="_blank" rel="noopener">https://github.com/ppoffice/hexo-theme-icarus/issues/379</a></p>
<h3 id="并列显示图像"><a href="#并列显示图像" class="headerlink" title="并列显示图像"></a>并列显示图像</h3><p>use Justified Gallery to display you photos in a grid</p>
<div class="justified-gallery"><br><img src="/hexo-theme-icarus/gallery/animals/elephant.jpeg" alt="Elephant"><br><img src="/hexo-theme-icarus/gallery/animals/dog.jpeg" alt="Dog"><br><img src="/hexo-theme-icarus/gallery/animals/birds.jpeg" alt="Birds"><br><img src="/hexo-theme-icarus/gallery/animals/cat.jpeg" alt="Cat"><br><img src="/hexo-theme-icarus/gallery/animals/fox.jpeg" alt="Fox"><br><img src="/hexo-theme-icarus/gallery/animals/horse.jpeg" alt="Horse"><br><img src="/hexo-theme-icarus/gallery/animals/leopard.jpeg" alt="Leopard"><br></div>

<h3 id="未知功能"><a href="#未知功能" class="headerlink" title="未知功能"></a>未知功能</h3><p>comments: false</p>
<ul>
<li>meta:</li>
<li><ul>
<li>name=”robots”;content=”noindex, follow”</li>
</ul>
</li>
<li><ul>
<li>name=”another-meta”;value=”hello world”;enabled=false</li>
</ul>
</li>
</ul>
<h3 id="待添加功能"><a href="#待添加功能" class="headerlink" title="待添加功能"></a>待添加功能</h3><p>评论点赞,置顶; 更改主题色调及背景</p>


    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-01-01T07:55:37.000Z">2019-01-01</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/深度学习/">深度学习</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/深度学习/模型优化/">模型优化</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/深度学习/模型优化/参数量和计算量/">参数量和计算量</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    14 minutes read (About 2098 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/01/01/卷积神经网络的参数量和计算量-+-Depthwise卷积与Pointwise卷积/">卷积神经网络的参数量和计算量-+-Depthwise卷积与Pointwise卷积</a>
            
        </h1>
        <div class="content">
            <a id="more"></a>
<h2 id="感受野"><a href="#感受野" class="headerlink" title="感受野"></a>感受野</h2><p>终于在知乎上中找到<a href="https://link.jianshu.com?t=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F22627224" target="_blank" rel="noopener">深度神经网络中的感受野(Receptive Field) - 蓝荣祎的文章 - 知乎<br>http://zhuanlan.zhihu.com/p/28492837</a> 算是弄清了基本原理，记录以备忘</p>
<h4 id="先举个例子："><a href="#先举个例子：" class="headerlink" title="先举个例子："></a>先举个例子：</h4><ul>
<li><p>e.g.两层 <code>3*3</code> 卷积操作的有效区域(感受野)是<code>5*5</code> (所有filter的stride=1,pad=0),示意图如下：</p>
<p><img src="//upload-images.jianshu.io/upload_images/9070639-38c7b569e00b0fc6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/607/format/webp" alt="image"></p>
</li>
<li><p>三层<code>3*3</code>卷积核操作的有效区域是<code>7*7</code> (所有filter的stride=1，pad=0),示意图如下：</p>
<p><img src="//upload-images.jianshu.io/upload_images/9070639-0389802e6cbc348f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/782/format/webp" alt="image"></p>
</li>
</ul>
<h4 id="基本定义："><a href="#基本定义：" class="headerlink" title="基本定义："></a>基本定义：</h4><ul>
<li><strong>定义：</strong>感受野用来表示网络内部的不同神经元对原图像的感受范围的大小，或者说，convNets(cnn)每一层输出的特征图(feature map)上的像素点在原始图像上映射的区域大小。</li>
<li>神经元之所以无法对原始图像的所有信息进行感知，是因为在这些网络结构中普遍使用卷积层和pooling层，在层与层之间均为局部连接。</li>
<li>神经元感受野的值越大表示其能接触到的原始图像范围就越大，也意味着它可能蕴含更为全局，语义层次更高的特征；相反，值越小则表示其所包含的特征越趋向局部和细节。因此感受野的值可以用来大致判断每一层的抽象层次。</li>
</ul>
<h4 id="感受野的计算"><a href="#感受野的计算" class="headerlink" title="感受野的计算"></a>感受野的计算</h4><ul>
<li><p><img src="//upload-images.jianshu.io/upload_images/9070639-3bde62b30ab8f363.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/981/format/webp" alt="image"></p>
<p>可以看到在Conv1中的每一个单元所能看到的原始图像范围是<code>3*3</code>，而由于Conv2的每个单元都是由 <code>2*2</code>范围的Conv1构成，因此回溯到原始图像，其实是能够看到<code>5*5</code>的原始图像范围的。因此我们说Conv1的感受野是3，Conv2的感受野是5. 输入图像的每个单元的感受野被定义为1，这应该很好理解，因为每个像素只能看到自己。</p>
</li>
</ul>
<p><img src="//upload-images.jianshu.io/upload_images/9070639-88a7d91b539cdf7d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/webp" alt="image"></p>
<p>在上图中，数字代表某单元能够看到的原始图像像素，我们用<strong>r_n表示第n个卷积层中，每个单元的感受野，用k_n和s_n表示第n个卷积层的kernel_size和stride</strong>.<br>对Raw Image进行kernel_size=3, stride 2的卷积操作所得到的fmap1 (fmap为feature map的简称，为每一个conv层所产生的输出)的结果是显而易见的。序列[1 2 3]表示fmap1的第一个单元能看见原图像中的1，2，3这三个像素，而第二个单元则能看见3，4，5。这两个单元随后又被kernel_size=2，stride 1的Filter 2进行卷积，因而得到的fmap2的第一个单元能够看见原图像中的1,2,3,4,5共5个像素（即取[1 2 3]和[3 4 5]的并集）。接下来我们尝试一下如何用公式来表述上述过程。可以看到，[1 2 3]和[3 4 5]之间因为Filter 1的stride 2而错开（偏移）了两位，而3是重叠的。对于卷积两个感受野为3的上层单元，下一层最大能获得的感受野为 3*2=6，但因为有重叠，因此要减去(kernel_size - 1)个重叠部分，而重叠部分的计算方式则为感受野减去前面所说的偏移量，这里是2. 因此我们就得到</p>
<p><img src="//upload-images.jianshu.io/upload_images/9070639-17a499751301c514.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/605/format/webp" alt="image"></p>
<p>继续往下一层看，我们会发现[1 2 3 4 5]和[3 4 5 6 7]的偏移量仍为2，并不简单地等于上一层的s_2, 这是因为之前的stride对后续层的影响是永久性的，而且是<strong>累积相乘</strong>的关系（例如，在fmap3中，偏移量已经累积到4了），也就是说 r_3应该这样求</p>
<p><img src="//upload-images.jianshu.io/upload_images/9070639-0b567801440ed800.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/650/format/webp" alt="image"></p>
<p>同理：</p>
<p><img src="//upload-images.jianshu.io/upload_images/9070639-112c481c802ff042.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/705/format/webp" alt="image"></p>
<p>。。。。。。可抽象如下：</p>
<p><img src="//upload-images.jianshu.io/upload_images/9070639-57a944e1d04ad6d5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/390/format/webp" alt="image"></p>
<p>理解：第n个卷积层的感受野等于前一个卷积层的感受野输出再乘以第n卷积层的kernel_size,即第n卷积层要合并多少个，这里算出的是总的量，还要减去之间有重复的量，第n卷积层总共要合并k_n个，那么前后两两相比较，空隙共有k_n-1个，比如说：第一层和第二层有重复，第二层和第三层也有重复等等，然后就要计算每两个之间重复的量有多少，首先每层共有r_n-1个数字，需要减去往右偏移的量，即stride，第1卷积层的stride_1,第二层会在第一层的基础上偏移stride_2,即总共偏移了 stride_1*stride_2,即偏移量是一个乘积的累计效果，所以式子如下：</p>
<p><img src="//upload-images.jianshu.io/upload_images/9070639-1cc3443d4819f9db.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/390/format/webp" alt="image"></p>
<p>经过去括号简化。可得下面式子：</p>
<p><img src="//upload-images.jianshu.io/upload_images/9070639-919995d8e09b745b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/239/format/webp" alt="image"></p>
<p>参考：<a href="https://www.jianshu.com/p/2b968e7a1715" target="_blank" rel="noopener">Receptive field(感受野)</a></p>
<h2 id="全局平均池化（GAP）"><a href="#全局平均池化（GAP）" class="headerlink" title="全局平均池化（GAP）"></a>全局平均池化（GAP）</h2><p>所谓的全局就是针对常用的平均池化而言，平均池化会有它的filter size，比如 2 * 2，全局平均池化就没有size，它针对的是整张feature map.</p>
<p>全局平均池化（Global average Pooling）由 M. Lin, Q. Chen, and S. Yan. Network in network. Interna-<br>tional Conference on Learning Representations, 2014.提出来。</p>
<p>用个简单的例子来说明它的过程，作用请看原文献或者<a href="https://www.baidu.com/s?wd=%E7%99%BE%E5%BA%A6&amp;tn=24004469_oem_dg&amp;rsv_dl=gh_pl_sl_csd" target="_blank" rel="noopener">百度</a>。<br><img src="https://upload-images.jianshu.io/upload_images/15197627-68d4f9e4c71c97f0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>一个feature map <strong>全局平均池化后得到一个值</strong>，再进行全连接（softmax）就会少很多参数。<br>参考：<a href="https://blog.csdn.net/u014264373/article/details/80516294" target="_blank" rel="noopener">对全局平均池化（GAP）过程的理解</a></p>
<h2 id="卷积神经网络的复杂度分析"><a href="#卷积神经网络的复杂度分析" class="headerlink" title="卷积神经网络的复杂度分析"></a>卷积神经网络的复杂度分析</h2><p>单个卷积层的时间复杂度<br><img src="https://upload-images.jianshu.io/upload_images/15197627-2a53ca8406d323ce.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br>卷积神经网络整体的时间复杂度<br><img src="https://upload-images.jianshu.io/upload_images/15197627-c3d8879a108a08a6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>空间复杂度（访存量），严格来讲包括两部分：总参数量 + 各层输出特征图。</p>
<ul>
<li><strong>参数量</strong>：模型所有带参数的层的权重参数总量（即<strong>模型体积</strong>，下式第一个求和表达式）</li>
<li><strong>特征图</strong>：模型在实时运行过程中每层所计算出的输出特征图大小（下式第二个求和表达式）<br><img src="https://upload-images.jianshu.io/upload_images/15197627-92b2917b9468bfd2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></li>
</ul>
<p><a href="https://zhuanlan.zhihu.com/p/31575074" target="_blank" rel="noopener">时间复杂度和空间复杂度计算，Inception 系列模型是如何优化复杂度的</a><br><a href="https://imlogm.github.io/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/vgg-complexity/" target="_blank" rel="noopener">以VGG为例，分析深度网络的计算量和参数量</a><br><a href="https://blog.csdn.net/wuzqchom/article/details/74785643" target="_blank" rel="noopener">TensorFlow中CNN的两种padding方式“SAME”和“VALID”</a><br><img src="https://upload-images.jianshu.io/upload_images/15197627-cd8777b1916abf26.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="padding"></p>
<h2 id="让深度学习更高效运行的两个视角"><a href="#让深度学习更高效运行的两个视角" class="headerlink" title="让深度学习更高效运行的两个视角"></a>让深度学习更高效运行的两个视角</h2><p>当这个应用程序的计算密度大于一定值之后，将会变成一个受算术逻辑单元的计算量所限制的程序；而这个计算密度如果小于一定值，将会变成一个受存储器带宽所限制的程序。<br><a href="https://blog.csdn.net/dcrmg/article/details/79652682" target="_blank" rel="noopener">计算量和访存量</a></p>
<h2 id="Depthwise卷积与Pointwise卷积"><a href="#Depthwise卷积与Pointwise卷积" class="headerlink" title="Depthwise卷积与Pointwise卷积"></a>Depthwise卷积与Pointwise卷积</h2><p><a href="https://blog.csdn.net/tintinetmilou/article/details/81607721" target="_blank" rel="noopener">Depthwise Separable Convolution是将一个完整的卷积运算分解为两步进行，即Depthwise Convolution与Pointwise Convolution</a></p>

        </div>
        
        
        
    </div>
</div>









    <div id="toc-div" class="toc-article">
        <strong class="toc-title">Index</strong>
        
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#感受野"><span class="toc-number">1.</span> <span class="toc-text">感受野</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#先举个例子："><span class="toc-number">1.0.1.</span> <span class="toc-text">先举个例子：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#基本定义："><span class="toc-number">1.0.2.</span> <span class="toc-text">基本定义：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#感受野的计算"><span class="toc-number">1.0.3.</span> <span class="toc-text">感受野的计算</span></a></li></ol></li></ol><li class="toc-item toc-level-2"><a class="toc-link" href="#全局平均池化（GAP）"><span class="toc-number">2.</span> <span class="toc-text">全局平均池化（GAP）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#卷积神经网络的复杂度分析"><span class="toc-number">3.</span> <span class="toc-text">卷积神经网络的复杂度分析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#让深度学习更高效运行的两个视角"><span class="toc-number">4.</span> <span class="toc-text">让深度学习更高效运行的两个视角</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Depthwise卷积与Pointwise卷积"><span class="toc-number">5.</span> <span class="toc-text">Depthwise卷积与Pointwise卷积</span></a></li>
        
    </div>

<a id="more"></a>
<h2 id="感受野"><a href="#感受野" class="headerlink" title="感受野"></a>感受野</h2><p>终于在知乎上中找到<a href="https://link.jianshu.com?t=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F22627224" target="_blank" rel="noopener">深度神经网络中的感受野(Receptive Field) - 蓝荣祎的文章 - 知乎<br>http://zhuanlan.zhihu.com/p/28492837</a> 算是弄清了基本原理，记录以备忘</p>
<h4 id="先举个例子："><a href="#先举个例子：" class="headerlink" title="先举个例子："></a>先举个例子：</h4><ul>
<li><p>e.g.两层 <code>3*3</code> 卷积操作的有效区域(感受野)是<code>5*5</code> (所有filter的stride=1,pad=0),示意图如下：</p>
<p><img src="//upload-images.jianshu.io/upload_images/9070639-38c7b569e00b0fc6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/607/format/webp" alt="image"></p>
</li>
<li><p>三层<code>3*3</code>卷积核操作的有效区域是<code>7*7</code> (所有filter的stride=1，pad=0),示意图如下：</p>
<p><img src="//upload-images.jianshu.io/upload_images/9070639-0389802e6cbc348f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/782/format/webp" alt="image"></p>
</li>
</ul>
<h4 id="基本定义："><a href="#基本定义：" class="headerlink" title="基本定义："></a>基本定义：</h4><ul>
<li><strong>定义：</strong>感受野用来表示网络内部的不同神经元对原图像的感受范围的大小，或者说，convNets(cnn)每一层输出的特征图(feature map)上的像素点在原始图像上映射的区域大小。</li>
<li>神经元之所以无法对原始图像的所有信息进行感知，是因为在这些网络结构中普遍使用卷积层和pooling层，在层与层之间均为局部连接。</li>
<li>神经元感受野的值越大表示其能接触到的原始图像范围就越大，也意味着它可能蕴含更为全局，语义层次更高的特征；相反，值越小则表示其所包含的特征越趋向局部和细节。因此感受野的值可以用来大致判断每一层的抽象层次。</li>
</ul>
<h4 id="感受野的计算"><a href="#感受野的计算" class="headerlink" title="感受野的计算"></a>感受野的计算</h4><ul>
<li><p><img src="//upload-images.jianshu.io/upload_images/9070639-3bde62b30ab8f363.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/981/format/webp" alt="image"></p>
<p>可以看到在Conv1中的每一个单元所能看到的原始图像范围是<code>3*3</code>，而由于Conv2的每个单元都是由 <code>2*2</code>范围的Conv1构成，因此回溯到原始图像，其实是能够看到<code>5*5</code>的原始图像范围的。因此我们说Conv1的感受野是3，Conv2的感受野是5. 输入图像的每个单元的感受野被定义为1，这应该很好理解，因为每个像素只能看到自己。</p>
</li>
</ul>
<p><img src="//upload-images.jianshu.io/upload_images/9070639-88a7d91b539cdf7d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/webp" alt="image"></p>
<p>在上图中，数字代表某单元能够看到的原始图像像素，我们用<strong>r_n表示第n个卷积层中，每个单元的感受野，用k_n和s_n表示第n个卷积层的kernel_size和stride</strong>.<br>对Raw Image进行kernel_size=3, stride 2的卷积操作所得到的fmap1 (fmap为feature map的简称，为每一个conv层所产生的输出)的结果是显而易见的。序列[1 2 3]表示fmap1的第一个单元能看见原图像中的1，2，3这三个像素，而第二个单元则能看见3，4，5。这两个单元随后又被kernel_size=2，stride 1的Filter 2进行卷积，因而得到的fmap2的第一个单元能够看见原图像中的1,2,3,4,5共5个像素（即取[1 2 3]和[3 4 5]的并集）。接下来我们尝试一下如何用公式来表述上述过程。可以看到，[1 2 3]和[3 4 5]之间因为Filter 1的stride 2而错开（偏移）了两位，而3是重叠的。对于卷积两个感受野为3的上层单元，下一层最大能获得的感受野为 3*2=6，但因为有重叠，因此要减去(kernel_size - 1)个重叠部分，而重叠部分的计算方式则为感受野减去前面所说的偏移量，这里是2. 因此我们就得到</p>
<p><img src="//upload-images.jianshu.io/upload_images/9070639-17a499751301c514.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/605/format/webp" alt="image"></p>
<p>继续往下一层看，我们会发现[1 2 3 4 5]和[3 4 5 6 7]的偏移量仍为2，并不简单地等于上一层的s_2, 这是因为之前的stride对后续层的影响是永久性的，而且是<strong>累积相乘</strong>的关系（例如，在fmap3中，偏移量已经累积到4了），也就是说 r_3应该这样求</p>
<p><img src="//upload-images.jianshu.io/upload_images/9070639-0b567801440ed800.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/650/format/webp" alt="image"></p>
<p>同理：</p>
<p><img src="//upload-images.jianshu.io/upload_images/9070639-112c481c802ff042.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/705/format/webp" alt="image"></p>
<p>。。。。。。可抽象如下：</p>
<p><img src="//upload-images.jianshu.io/upload_images/9070639-57a944e1d04ad6d5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/390/format/webp" alt="image"></p>
<p>理解：第n个卷积层的感受野等于前一个卷积层的感受野输出再乘以第n卷积层的kernel_size,即第n卷积层要合并多少个，这里算出的是总的量，还要减去之间有重复的量，第n卷积层总共要合并k_n个，那么前后两两相比较，空隙共有k_n-1个，比如说：第一层和第二层有重复，第二层和第三层也有重复等等，然后就要计算每两个之间重复的量有多少，首先每层共有r_n-1个数字，需要减去往右偏移的量，即stride，第1卷积层的stride_1,第二层会在第一层的基础上偏移stride_2,即总共偏移了 stride_1*stride_2,即偏移量是一个乘积的累计效果，所以式子如下：</p>
<p><img src="//upload-images.jianshu.io/upload_images/9070639-1cc3443d4819f9db.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/390/format/webp" alt="image"></p>
<p>经过去括号简化。可得下面式子：</p>
<p><img src="//upload-images.jianshu.io/upload_images/9070639-919995d8e09b745b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/239/format/webp" alt="image"></p>
<p>参考：<a href="https://www.jianshu.com/p/2b968e7a1715" target="_blank" rel="noopener">Receptive field(感受野)</a></p>
<h2 id="全局平均池化（GAP）"><a href="#全局平均池化（GAP）" class="headerlink" title="全局平均池化（GAP）"></a>全局平均池化（GAP）</h2><p>所谓的全局就是针对常用的平均池化而言，平均池化会有它的filter size，比如 2 * 2，全局平均池化就没有size，它针对的是整张feature map.</p>
<p>全局平均池化（Global average Pooling）由 M. Lin, Q. Chen, and S. Yan. Network in network. Interna-<br>tional Conference on Learning Representations, 2014.提出来。</p>
<p>用个简单的例子来说明它的过程，作用请看原文献或者<a href="https://www.baidu.com/s?wd=%E7%99%BE%E5%BA%A6&amp;tn=24004469_oem_dg&amp;rsv_dl=gh_pl_sl_csd" target="_blank" rel="noopener">百度</a>。<br><img src="https://upload-images.jianshu.io/upload_images/15197627-68d4f9e4c71c97f0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>一个feature map <strong>全局平均池化后得到一个值</strong>，再进行全连接（softmax）就会少很多参数。<br>参考：<a href="https://blog.csdn.net/u014264373/article/details/80516294" target="_blank" rel="noopener">对全局平均池化（GAP）过程的理解</a></p>
<h2 id="卷积神经网络的复杂度分析"><a href="#卷积神经网络的复杂度分析" class="headerlink" title="卷积神经网络的复杂度分析"></a>卷积神经网络的复杂度分析</h2><p>单个卷积层的时间复杂度<br><img src="https://upload-images.jianshu.io/upload_images/15197627-2a53ca8406d323ce.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br>卷积神经网络整体的时间复杂度<br><img src="https://upload-images.jianshu.io/upload_images/15197627-c3d8879a108a08a6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>空间复杂度（访存量），严格来讲包括两部分：总参数量 + 各层输出特征图。</p>
<ul>
<li><strong>参数量</strong>：模型所有带参数的层的权重参数总量（即<strong>模型体积</strong>，下式第一个求和表达式）</li>
<li><strong>特征图</strong>：模型在实时运行过程中每层所计算出的输出特征图大小（下式第二个求和表达式）<br><img src="https://upload-images.jianshu.io/upload_images/15197627-92b2917b9468bfd2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></li>
</ul>
<p><a href="https://zhuanlan.zhihu.com/p/31575074" target="_blank" rel="noopener">时间复杂度和空间复杂度计算，Inception 系列模型是如何优化复杂度的</a><br><a href="https://imlogm.github.io/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/vgg-complexity/" target="_blank" rel="noopener">以VGG为例，分析深度网络的计算量和参数量</a><br><a href="https://blog.csdn.net/wuzqchom/article/details/74785643" target="_blank" rel="noopener">TensorFlow中CNN的两种padding方式“SAME”和“VALID”</a><br><img src="https://upload-images.jianshu.io/upload_images/15197627-cd8777b1916abf26.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="padding"></p>
<h2 id="让深度学习更高效运行的两个视角"><a href="#让深度学习更高效运行的两个视角" class="headerlink" title="让深度学习更高效运行的两个视角"></a>让深度学习更高效运行的两个视角</h2><p>当这个应用程序的计算密度大于一定值之后，将会变成一个受算术逻辑单元的计算量所限制的程序；而这个计算密度如果小于一定值，将会变成一个受存储器带宽所限制的程序。<br><a href="https://blog.csdn.net/dcrmg/article/details/79652682" target="_blank" rel="noopener">计算量和访存量</a></p>
<h2 id="Depthwise卷积与Pointwise卷积"><a href="#Depthwise卷积与Pointwise卷积" class="headerlink" title="Depthwise卷积与Pointwise卷积"></a>Depthwise卷积与Pointwise卷积</h2><p><a href="https://blog.csdn.net/tintinetmilou/article/details/81607721" target="_blank" rel="noopener">Depthwise Separable Convolution是将一个完整的卷积运算分解为两步进行，即Depthwise Convolution与Pointwise Convolution</a></p>


    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-01-01T07:55:37.000Z">2019-01-01</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/python/">python</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/python/基础/">基础</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    an hour read (About 11819 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/01/01/python-速成集中营-—-预览版/">python-速成集中营(预览版)</a>
            
        </h1>
        <div class="content">
            <a id="more"></a>
<h1 id="1-计算部分"><a href="#1-计算部分" class="headerlink" title="1. 计算部分"></a>1. 计算部分</h1><h2 id="1-1-、-、"><a href="#1-1-、-、" class="headerlink" title="1.1.  / 、// 、 %"></a>1.1.  / 、// 、 %</h2><p><strong>除法(/)永远返回一个浮点数</strong>，如要使用 <a href="https://docs.python.org/3/glossary.html#term-floor-division" target="_blank" rel="noopener">floor 除法</a> 并且得到整数结果（丢掉任何小数部分），你可以使用 <code>//</code> 运算符；要计算余数你可以使用 <code>%</code>，</p>
<p>使用 ** 运算符计算幂乘方<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; 17 / 3  # classic division returns a float</span><br><span class="line">5.666666666666667</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">&gt;&gt;&gt; 17 // 3  # floor division discards the fractional part</span><br><span class="line">5</span><br><span class="line">&gt;&gt;&gt; 17 % 3  # the % operator returns the remainder of the division</span><br><span class="line">2</span><br><span class="line">&gt;&gt;&gt; 5 * 3 + 2  # result * divisor + remainder</span><br><span class="line">17</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; 5 ** 2  # 5 squared</span><br><span class="line">25</span><br><span class="line">&gt;&gt;&gt; 2 ** 7  # 2 to the power of 7</span><br><span class="line">128</span><br></pre></td></tr></table></figure>
<h2 id="1-2-交互模式中，最近一个表达式的值赋给变量"><a href="#1-2-交互模式中，最近一个表达式的值赋给变量" class="headerlink" title="1.2. 交互模式中，最近一个表达式的值赋给变量 _"></a>1.2. 交互模式中，最近一个表达式的值赋给变量 _</h2><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; tax = 12.5 / 100</span><br><span class="line">&gt;&gt;&gt; price = 100.50</span><br><span class="line">&gt;&gt;&gt; price * tax</span><br><span class="line">12.5625</span><br><span class="line">&gt;&gt;&gt; price + _          #这玩意有点秀</span><br><span class="line">113.0625</span><br><span class="line">&gt;&gt;&gt; round(_, 2)</span><br><span class="line">113.06</span><br></pre></td></tr></table></figure>
<h2 id="1-3-decimal——定点数和浮点数的数学运算"><a href="#1-3-decimal——定点数和浮点数的数学运算" class="headerlink" title="1.3. decimal——定点数和浮点数的数学运算"></a>1.3. decimal——定点数和浮点数的数学运算</h2><p>简单mark一下啊，是精确计算用的<br>Decimal类型是在浮点类型的基础上设计的,但是它在几个地方上要优于floating point:<br>1)Decimal类型可以非常精确地在计算机中存储,而学过c++的都知道,浮点型在计算机中是无法精确存储的,比如1.1和2.2在计算机中存储后,运算(1.1+2.2)表达式的值结果会是3.3000000000000003;Decimal类型则不会出现这种情况。同样,由于无法精确存储,浮点型也就无法精确计算(相对于Decimal类型),可以再测试(0.1+0.1+0.1-0.3)两种类型的计算结果。<br>2)Decimal类型会自动保留小数点后面不需要的0,以与输入的精度相匹配,比如下面小程序中的例子:浮点型的1.20+1.30结果是2.5;而Decimal类型结果是2.50,这样貌似比较人性化。<br>3)Decimal类型可以根据需要自己设置小数点后精度。通过getcontext().prec = x (x为你想要的精度来设置,getcontext()函数下面再详细介绍)。<br>4)Decimal类型有很强的管理功能,它能够根据需要设置,来控制输出的格式,得到或者忽略某类错误(如除0,可以设置忽略它,而得到一个Infinity的Decimal值)。 </p>
<h1 id="1-4-行尾’-‘-表示：下一行在逻辑上是本行的后续内容"><a href="#1-4-行尾’-‘-表示：下一行在逻辑上是本行的后续内容" class="headerlink" title="1.4. 行尾’\‘,表示：下一行在逻辑上是本行的后续内容"></a>1.4. 行尾’\‘,表示：下一行在逻辑上是本行的后续内容</h1><p>字符串文本能够分成多行。一种方法是使用三引号：<code>&quot;&quot;&quot;...&quot;&quot;&quot;</code>或者<code>&#39;&#39;&#39;...&#39;&#39;&#39;</code>。行尾换行符会被自动包含到字符串中，但是可以在行尾加上<code>\</code>来避免这个行为。下面的示例： 可以<strong>使用反斜杠为行结尾的连续字符串，它表示下一行在逻辑上是本行的后续内容</strong>:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">print(&quot;&quot;&quot;\</span><br><span class="line">Usage: thingy [OPTIONS]</span><br><span class="line">     -h                        Display this usage message</span><br><span class="line">     -H hostname               Hostname to connect to</span><br><span class="line">&quot;&quot;&quot;)</span><br><span class="line"># 将生成以下输出（注意，没有开始的第一行）:</span><br><span class="line">Usage: thingy [OPTIONS]</span><br><span class="line">     -h                        Display this usage message</span><br><span class="line">     -H hostname               Hostname to connect to</span><br></pre></td></tr></table></figure></p>
<h1 id="2-字符串，列表"><a href="#2-字符串，列表" class="headerlink" title="2. 字符串，列表"></a>2. 字符串，列表</h1><h2 id="2-1-s-i-s-i-永远等于s"><a href="#2-1-s-i-s-i-永远等于s" class="headerlink" title="2.1. s[:i] + s[i:] 永远等于s:"></a>2.1. <code>s[:i] + s[i:]</code> 永远等于<code>s</code>:</h2><p>注意，<strong>包含起始的字符，不包含末尾</strong>的字符。</p>
<h2 id="2-2-Python字符串不可以被更改-—-它们是-不可变的-。因此，赋值给字符串索引的位置会导致错误"><a href="#2-2-Python字符串不可以被更改-—-它们是-不可变的-。因此，赋值给字符串索引的位置会导致错误" class="headerlink" title="2.2. Python字符串不可以被更改 — 它们是 不可变的 。因此，赋值给字符串索引的位置会导致错误:"></a>2.2. Python字符串不可以被更改 — 它们是 <a href="https://docs.python.org/3/glossary.html#term-immutable" target="_blank" rel="noopener">不可变的</a> 。因此，赋值给字符串索引的位置会导致错误:</h2><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; word[0] = &apos;J&apos;</span><br><span class="line">  ...</span><br><span class="line">TypeError: &apos;str&apos; object does not support item assignment</span><br><span class="line">&gt;&gt;&gt; word[2:] = &apos;py&apos;</span><br><span class="line">  ...</span><br><span class="line">TypeError: &apos;str&apos; object does not support item assignment</span><br></pre></td></tr></table></figure>
<h2 id="2-3-可以对切片赋值，此操作可以改变列表的尺寸，或清空它"><a href="#2-3-可以对切片赋值，此操作可以改变列表的尺寸，或清空它" class="headerlink" title="2.3. 可以对切片赋值，此操作可以改变列表的尺寸，或清空它:"></a>2.3. 可以对切片赋值，此操作可以改变列表的尺寸，或清空它:</h2><p>切片操作返回列表一个新的（浅）拷贝副本<br><code>list[3] = value</code>,也可以看作是一个切片，所以会改变原列表<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; letters = [&apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;, &apos;e&apos;, &apos;f&apos;, &apos;g&apos;]</span><br><span class="line">&gt;&gt;&gt; letters</span><br><span class="line">[&apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;, &apos;e&apos;, &apos;f&apos;, &apos;g&apos;]</span><br><span class="line">&gt;&gt;&gt; # replace some values</span><br><span class="line">&gt;&gt;&gt; letters[2:5] = [&apos;C&apos;, &apos;D&apos;, &apos;E&apos;]</span><br><span class="line">&gt;&gt;&gt; letters</span><br><span class="line">[&apos;a&apos;, &apos;b&apos;, &apos;C&apos;, &apos;D&apos;, &apos;E&apos;, &apos;f&apos;, &apos;g&apos;]</span><br><span class="line">&gt;&gt;&gt; # now remove them</span><br><span class="line">&gt;&gt;&gt; letters[2:5] = []</span><br><span class="line">&gt;&gt;&gt; letters</span><br><span class="line">[&apos;a&apos;, &apos;b&apos;, &apos;f&apos;, &apos;g&apos;]</span><br><span class="line">&gt;&gt;&gt; # clear the list by replacing all the elements with an empty list</span><br><span class="line">&gt;&gt;&gt; letters[:] = []</span><br><span class="line">&gt;&gt;&gt; letters</span><br><span class="line">[]</span><br></pre></td></tr></table></figure></p>
<h2 id="2-4-创建list"><a href="#2-4-创建list" class="headerlink" title="2.4. 创建list"></a>2.4. 创建list</h2><p>啧啧，有点秀<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">list = [None] * n</span><br><span class="line">n为已知长度</span><br></pre></td></tr></table></figure></p>
<p> <a href="https://docs.python.org/3/reference/compound_stmts.html#for" target="_blank" rel="noopener">for</a> 语句就是这样一个迭代器。<a href="https://docs.python.org/3/library/stdtypes.html#list" target="_blank" rel="noopener">list()</a> 函数是另外一个（ <em>迭代器</em> ），它从可迭代（对象）中创建列表:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; list(range(5))</span><br><span class="line">[0, 1, 2, 3, 4]</span><br></pre></td></tr></table></figure></p>
<h1 id="3-控制语句"><a href="#3-控制语句" class="headerlink" title="3. 控制语句"></a>3. 控制语句</h1><h2 id="3-1-修改你迭代的序列（例如，复制选择项），你可以迭代它的复本-如for-w-in-word"><a href="#3-1-修改你迭代的序列（例如，复制选择项），你可以迭代它的复本-如for-w-in-word" class="headerlink" title="3.1. 修改你迭代的序列（例如，复制选择项），你可以迭代它的复本, 如for w in  word[:]:"></a>3.1. 修改你迭代的序列（例如，复制选择项），你可以迭代它的复本, 如<code>for w in  word[:]:</code></h2><p>在迭代过程中修改迭代序列不安全（只有在使用链表这样的可变序列时才会有这样的情况）。使用切割标识就可以很方便的做到这一点:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; for w in words[:]:  # Loop over a slice copy of the entire list.</span><br><span class="line">...     if len(w) &gt; 6:</span><br><span class="line">...         words.insert(0, w)</span><br><span class="line">...</span><br><span class="line">&gt;&gt;&gt; words</span><br><span class="line">[&apos;defenestrate&apos;, &apos;cat&apos;, &apos;window&apos;, &apos;defenestrate&apos;]</span><br></pre></td></tr></table></figure></p>
<h2 id="3-2-循环可以有一个-else-子句"><a href="#3-2-循环可以有一个-else-子句" class="headerlink" title="3.2. 循环可以有一个 else 子句"></a>3.2. 循环可以有一个 <code>else</code> 子句</h2><p>与循环一起使用时，<code>else</code> 子句与 <a href="https://docs.python.org/3/reference/compound_stmts.html#try" target="_blank" rel="noopener">try</a> 语句的 <code>else</code> 子句比与 <a href="https://docs.python.org/3/reference/compound_stmts.html#if" target="_blank" rel="noopener">if</a> 语句的具有更多的共同点：<strong><a href="https://docs.python.org/3/reference/compound_stmts.html#try" target="_blank" rel="noopener">try</a> 语句的 <code>else</code> 子句在未出现异常时运行，循环的 <code>else</code> 子句在未出现 <code>break</code> 时运行</strong>。更多关于 <a href="https://docs.python.org/3/reference/compound_stmts.html#try" target="_blank" rel="noopener">try</a> 语句和异常的内容，请参见 <a href="http://www.pythondoc.com/pythontutorial3/errors.html#tut-handling" target="_blank" rel="noopener">异常处理</a>。</p>
<p>循环可以有一个 <code>else</code> 子句；它在循环迭代完整个列表（对于 <a href="https://docs.python.org/3/reference/compound_stmts.html#for" target="_blank" rel="noopener">for</a> ）或执行条件为 false （对于 <a href="https://docs.python.org/3/reference/compound_stmts.html#while" target="_blank" rel="noopener">while</a>）时执行，但循环被 <a href="https://docs.python.org/3/reference/simple_stmts.html#break" target="_blank" rel="noopener">break</a> 中止的情况下不会执行。以下搜索素数的示例程序演示了这个子句:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; for n in range(2, 10):</span><br><span class="line">...     for x in range(2, n):</span><br><span class="line">...         if n % x == 0:</span><br><span class="line">...             print(n, &apos;equals&apos;, x, &apos;*&apos;, n//x)</span><br><span class="line">...             break</span><br><span class="line">...     else:</span><br><span class="line">...         # loop fell through without finding a factor</span><br><span class="line">...         print(n, &apos;is a prime number&apos;)</span><br><span class="line">...</span><br><span class="line">2 is a prime number</span><br><span class="line">3 is a prime number</span><br><span class="line">4 equals 2 * 2</span><br><span class="line">5 is a prime number</span><br><span class="line">6 equals 2 * 3</span><br><span class="line">7 is a prime number</span><br><span class="line">8 equals 2 * 4</span><br><span class="line">9 equals 3 * 3</span><br></pre></td></tr></table></figure></p>
<h1 id="4-函数"><a href="#4-函数" class="headerlink" title="4. 函数"></a>4. 函数</h1><h2 id="4-1-用一个逗号结尾就可以禁止输出换行"><a href="#4-1-用一个逗号结尾就可以禁止输出换行" class="headerlink" title="4.1. 用一个逗号结尾就可以禁止输出换行:"></a>4.1. 用一个逗号结尾就可以禁止输出换行:</h2><p>或者 <code>print(something, end=&#39;&#39;)</code><br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; a, b = 0, 1</span><br><span class="line">&gt;&gt;&gt; while b &lt; 1000:</span><br><span class="line">...     print(b, end=&apos;,&apos;)</span><br><span class="line">...     a, b = b, a+b</span><br><span class="line">...</span><br><span class="line">1,1,2,3,5,8,13,21,34,55,89,144,233,377,610,987,</span><br></pre></td></tr></table></figure></p>
<h2 id="4-2-函数的参数"><a href="#4-2-函数的参数" class="headerlink" title="4.2. 函数的参数"></a>4.2. 函数的参数</h2><h3 id="4-2-1-默认参数"><a href="#4-2-1-默认参数" class="headerlink" title="4.2.1. 默认参数"></a>4.2.1. 默认参数</h3><p>要求用户确认的函数例子：<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">def ask_ok(prompt, retries=4, complaint=&apos;Yes or no, please!&apos;):</span><br><span class="line">    while True:</span><br><span class="line">        ok = input(prompt)</span><br><span class="line">        if ok in (&apos;y&apos;, &apos;ye&apos;, &apos;yes&apos;):</span><br><span class="line">            return True</span><br><span class="line">        if ok in (&apos;n&apos;, &apos;no&apos;, &apos;nop&apos;, &apos;nope&apos;):</span><br><span class="line">            return False</span><br><span class="line">        retries = retries - 1</span><br><span class="line">        if retries &lt; 0:</span><br><span class="line">            raise OSError(&apos;uncooperative user&apos;)</span><br><span class="line">        print(complaint)</span><br></pre></td></tr></table></figure></p>
<p>默认值在函数 定义 作用域被解析<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">i = 5</span><br><span class="line"></span><br><span class="line">def f(arg=i):  # f函数在这一行定义，默认参数被解析</span><br><span class="line">    print(arg)</span><br><span class="line"></span><br><span class="line">i = 6</span><br><span class="line">f()</span><br></pre></td></tr></table></figure></p>
<p>将会输出 <code>5</code><br><strong>重要警告</strong>: 默认值只被赋值一次。<br>当默认值是<strong>可变对象</strong>时会有所不同，比如<strong>列表、字典或者大多数类的实例</strong>。<br>例如，下面的函数在后续调用过程中会<strong>累积（前面）传给它的参数</strong>:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">def f(a, L=[]):</span><br><span class="line">    L.append(a)</span><br><span class="line">    return L</span><br><span class="line"></span><br><span class="line">print(f(1))</span><br><span class="line">print(f(2))</span><br><span class="line">print(f(3))</span><br><span class="line"></span><br><span class="line"># 输出</span><br><span class="line">[1]</span><br><span class="line">[1, 2]</span><br><span class="line">[1, 2, 3]</span><br></pre></td></tr></table></figure></p>
<p>如果你不想让默认值在后续调用中累积，你可以像下面一样定义函数:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">def f(a, L=None):</span><br><span class="line">    if L is None:</span><br><span class="line">        L = []</span><br><span class="line">    L.append(a)</span><br><span class="line">    return L</span><br></pre></td></tr></table></figure></p>
<h3 id="4-2-2-可变参数列表"><a href="#4-2-2-可变参数列表" class="headerlink" title="4.2.2. 可变参数列表"></a>4.2.2. 可变参数列表</h3><p>本质：<strong>元组封装和序列拆封的一个结合</strong><br>让函数调用可变个数的参数。<strong>这些参数被包装进一个元组</strong>（参见 <a href="http://www.pythondoc.com/pythontutorial3/datastructures.html#tut-tuples" target="_blank" rel="noopener">元组和序列</a> ）。在这些可变个数的参数之前，可以有零到多个普通的参数。<br>这些<code>可变</code>参数是参数列表中的最后一个，因为它们将把所有的剩余输入参数传递给函数。任何出现在 <code>*args</code> 后的参数是关键字参数，这意味着，他们只能被用作关键字，而不是位置参数:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; def concat(*args, sep=&quot;/&quot;):</span><br><span class="line">...    return sep.join(args)</span><br><span class="line">...</span><br><span class="line">&gt;&gt;&gt; concat(&quot;earth&quot;, &quot;mars&quot;, &quot;venus&quot;)</span><br><span class="line">&apos;earth/mars/venus&apos;</span><br><span class="line">&gt;&gt;&gt; concat(&quot;earth&quot;, &quot;mars&quot;, &quot;venus&quot;, sep=&quot;.&quot;)  # sep只能是关键字参数！</span><br><span class="line">&apos;earth.mars.venus&apos;</span><br></pre></td></tr></table></figure></p>
<h3 id="4-2-3-关键字参数"><a href="#4-2-3-关键字参数" class="headerlink" title="4.2.3. 关键字参数"></a>4.2.3. 关键字参数</h3><p>引入一个形如 <code>**name</code> 的参数时，它接收一个<strong>字典</strong>（参见 <a href="https://docs.python.org/3/library/stdtypes.html#typesmapping" target="_blank" rel="noopener">Mapping Types — dict</a> ），该字典包含了所有未出现在形式参数列表中的关键字参数。<br>这里可能还会组合使用一个形如 <code>*name</code> （下一小节详细介绍） 的形式参数，它接收一个元组（下一节中会详细介绍），包含了所有没有出现在形式参数列表中的参数值（<strong><code>*name</code> 必须在 `</strong>name` 之前出现**）。<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">def cheeseshop(kind, *arguments, **keywords):</span><br><span class="line">    print(&quot;-- Do you have any&quot;, kind, &quot;?&quot;)</span><br><span class="line">    print(&quot;-- I&apos;m sorry, we&apos;re all out of&quot;, kind)</span><br><span class="line">    for arg in arguments:</span><br><span class="line">        print(arg)</span><br><span class="line">    print(&quot;-&quot; * 40)</span><br><span class="line">    keys = sorted(keywords.keys())  # 对关键字排序</span><br><span class="line">    for kw in keys:</span><br><span class="line">        print(kw, &quot;:&quot;, keywords[kw])</span><br></pre></td></tr></table></figure></p>
<h3 id="4-2-4-参数列表的分拆——-拆开参数列表-分拆字典为关键字参数"><a href="#4-2-4-参数列表的分拆——-拆开参数列表-分拆字典为关键字参数" class="headerlink" title="4.2.4. 参数列表的分拆—— * 拆开参数列表, ** 分拆字典为关键字参数"></a>4.2.4. 参数列表的分拆—— <code>*</code> 拆开参数列表, ** 分拆字典为关键字参数</h3><p>当你要传递的参数已经是一个列表，但要调用的函数却接受分开一个个的参数值。这时候你要把已有的列表拆开来。例如内建函数 <a href="https://docs.python.org/3/library/stdtypes.html#range" target="_blank" rel="noopener">range()</a> 需要要独立的 <em>start</em>，<em>stop</em> 参数。你可以在调用函数时加一个 <code>*</code> 操作符来自动把参数列表拆开:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; list(range(3, 6))            # normal call with separate arguments</span><br><span class="line">[3, 4, 5]</span><br><span class="line">&gt;&gt;&gt; args = [3, 6]</span><br><span class="line">&gt;&gt;&gt; list(range(*args))            # call with arguments unpacked from a list</span><br><span class="line">[3, 4, 5]</span><br></pre></td></tr></table></figure></p>
<p>以同样的方式，可以使用 ** 操作符分拆关键字参数为字典:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; def parrot(voltage, state=&apos;a stiff&apos;, action=&apos;voom&apos;):</span><br><span class="line">...     print(&quot;-- This parrot wouldn&apos;t&quot;, action, end=&apos; &apos;)</span><br><span class="line">...     print(&quot;if you put&quot;, voltage, &quot;volts through it.&quot;, end=&apos; &apos;)</span><br><span class="line">...     print(&quot;E&apos;s&quot;, state, &quot;!&quot;)</span><br><span class="line">...</span><br><span class="line">&gt;&gt;&gt; d = &#123;&quot;voltage&quot;: &quot;four million&quot;, &quot;state&quot;: &quot;bleedin&apos; demised&quot;, &quot;action&quot;: &quot;VOOM&quot;&#125;</span><br><span class="line">&gt;&gt;&gt; parrot(**d)</span><br><span class="line">-- This parrot wouldn&apos;t VOOM if you put four million volts through it. E&apos;s bleedin&apos; demised !</span><br></pre></td></tr></table></figure></p>
<h2 id="4-3-Lambda-形式"><a href="#4-3-Lambda-形式" class="headerlink" title="4.3.  Lambda 形式"></a>4.3.  Lambda 形式</h2><p>使用 lambda 表达式返回一个函数，类似于嵌套函数定义，lambda 形式可以从外部作用域引用变量:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; def make_incrementor(n):</span><br><span class="line">...     return lambda x: x + n</span><br><span class="line">...</span><br><span class="line">&gt;&gt;&gt; f = make_incrementor(42)</span><br><span class="line">&gt;&gt;&gt; f(0)</span><br><span class="line">42</span><br><span class="line">&gt;&gt;&gt; f(1)   </span><br><span class="line">43</span><br></pre></td></tr></table></figure></p>
<p>或将一个小函数作为参数传递:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; pairs = [(1, &apos;one&apos;), (2, &apos;two&apos;), (3, &apos;three&apos;), (4, &apos;four&apos;)]</span><br><span class="line">&gt;&gt;&gt; pairs.sort(key=lambda pair: pair[1])  </span><br><span class="line">&gt;&gt;&gt; pairs</span><br><span class="line">[(4, &apos;four&apos;), (1, &apos;one&apos;), (3, &apos;three&apos;), (2, &apos;two&apos;)]</span><br></pre></td></tr></table></figure></p>
<h2 id="4-4-函数的文档字符串"><a href="#4-4-函数的文档字符串" class="headerlink" title="4.4. 函数的文档字符串"></a>4.4. 函数的文档字符串</h2><p><strong>第一行应该是关于对象用途的简介</strong>。简短起见，不用明确的陈述对象名或类型，因为它们可以从别的途径了解到（除非这个名字碰巧就是描述这个函数操作的动词）。<strong>这一行应该以大写字母开头，以句号结尾</strong>。</p>
<p>如果文档字符串有多行，<strong>第二行应该空出来</strong>，与接下来的详细描述明确分隔。接下来的文档应该有一或多段描述对象的调用约定、边界效应等。</p>
<p>Python 的解释器不会从多行的文档字符串中去除缩进，所以必要的时候<strong>应当自己清除缩进</strong>。这符合通常的习惯。第一行之后的第一个非空行决定了整个文档的缩进格式。（我们不用第一行是因为它通常紧靠着起始的引号，缩进格式显示的不清楚。）留白“相当于”是字符串的起始缩进。<strong>每一行都不应该有缩进</strong>，如果有缩进的话，所有的留白都应该清除掉。留白的长度应当等于扩展制表符的宽度（通常是8个空格）。</p>
<p>以下是一个多行文档字符串的示例:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; def my_function():</span><br><span class="line">...     &quot;&quot;&quot;Do nothing, but document it.</span><br><span class="line">...</span><br><span class="line">...     No, really, it doesn&apos;t do anything.</span><br><span class="line">...     &quot;&quot;&quot;</span><br><span class="line">...     pass</span><br><span class="line">...</span><br><span class="line">&gt;&gt;&gt; print(my_function.__doc__)</span><br><span class="line">Do nothing, but document it.</span><br><span class="line"></span><br><span class="line">    No, really, it doesn&apos;t do anything.</span><br></pre></td></tr></table></figure></p>
<h2 id="4-5-编码风格"><a href="#4-5-编码风格" class="headerlink" title="4.5. 编码风格"></a>4.5. 编码风格</h2><p>对于 Python，<a href="http://www.python.org/dev/peps/pep-0008" target="_blank" rel="noopener">PEP 8</a> 引入了大多数项目遵循的风格指导。它给出了一个高度可读，视觉友好的编码风格。每个 Python 开发者都应该读一下，大多数要点都会对你有帮助：</p>
<ul>
<li><p><strong>使用 4 空格缩进，而非 TAB</strong></p>
<p>在小缩进（可以嵌套更深）和大缩进（更易读）之间，4空格是一个很好的折中。TAB 引发了一些混乱，最好弃用</p>
</li>
<li><p>折行以确保其不会超过 79 个字符<br>这有助于小显示器用户阅读，也可以让大显示器能并排显示几个代码文件</p>
</li>
<li>使用空行分隔函数和类，以及函数中的大块代码</li>
<li><strong>可能的话，注释独占一行</strong></li>
<li>使用文档字符串</li>
<li>把空格放到操作符两边，以及逗号后面，但是括号里侧不加空格：<code>a = f(1, 2) + g(3, 4)</code></li>
<li>统一函数和类命名<br>推荐类名用 <code>驼峰命名</code>， 函数和方法名用 <code>小写_和_下划线</code>。总是用 <code>self</code> 作为方法的第一个参数（关于类和方法的知识详见 <a href="http://www.pythondoc.com/pythontutorial3/classes.html#tut-firstclasses" target="_blank" rel="noopener">初识类</a> ）</li>
<li>不要使用花哨的编码，如果你的代码的目的是要在国际化环境。Python 的默认情况下，UTF-8，甚至普通的 ASCII 总是工作的最好</li>
<li>同样，也不要使用非 ASCII 字符的标识符，除非是不同语种的会阅读或者维护代码。<h1 id="5-数据结构"><a href="#5-数据结构" class="headerlink" title="5. 数据结构"></a>5. 数据结构</h1><h2 id="5-1-列表level-up"><a href="#5-1-列表level-up" class="headerlink" title="5.1. 列表level up"></a>5.1. 列表level up</h2></li>
<li>list.append(x)：<br>把一个元素添加到列表的结尾</li>
<li>list.extend(L)：<br>将一个给定列表中的所有元素都添加到另一个列表中</li>
<li>list.insert(i, x)：<br>在指定位置插入一个元素</li>
<li>list.remove(x)：<br>  删除列表中值为 x 的第一个元素。如果没有这样的元素，就会返回一个错误。</li>
<li>list.pop([i])：<br>  如果没有指定索引，a.pop() 返回最后一个元素</li>
<li>list.clear()：<br> 从列表中删除所有元素</li>
<li>list.index(x)：<br>返回列表中第一个值为 x 的元素的索引。如果没有匹配的元素就会返回一个错误。</li>
<li>list.count(x)：<br>返回 x 在列表中出现的次数。</li>
<li>list.sort()：<br>对列表中的元素就地进行排序。</li>
<li>list.reverse()：<br>就地倒排</li>
<li>list.copy()：<br>返回列表的一个浅拷贝。等同于 a[:]。<h3 id="5-1-1-把列表当作堆栈使用"><a href="#5-1-1-把列表当作堆栈使用" class="headerlink" title="5.1.1. 把列表当作堆栈使用"></a>5.1.1. 把列表当作堆栈使用</h3>堆栈作为特定的数据结构，最先进入的元素最后一个被释放（后进先出）。用 <code>append()</code> 方法可以把一个元素添加到堆栈顶。用不指定索引的 <code>pop()</code>方法可以把一个元素从堆栈顶释放出来。例如:<h3 id="5-1-2-把列表当作队列使用"><a href="#5-1-2-把列表当作队列使用" class="headerlink" title="5.1.2. 把列表当作队列使用"></a>5.1.2. 把列表当作队列使用</h3>队列作为特定的数据结构，最先进入的元素最先释放（先进先出）。不过，列表这样用效率不高。<br>要实现队列，使用 <a href="https://docs.python.org/3/library/collections.html#collections.deque" target="_blank" rel="noopener">collections.deque</a>，它为在首尾两端快速插入和删除而设计。例如:<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; from collections import deque</span><br><span class="line">&gt;&gt;&gt; queue = deque([&quot;Eric&quot;, &quot;John&quot;, &quot;Michael&quot;])</span><br><span class="line">&gt;&gt;&gt; queue.append(&quot;Terry&quot;)           # Terry arrives</span><br><span class="line">&gt;&gt;&gt; queue.append(&quot;Graham&quot;)          # Graham arrives</span><br><span class="line">&gt;&gt;&gt; queue.popleft()                 # The first to arrive now leaves</span><br><span class="line">&apos;Eric&apos;</span><br><span class="line">&gt;&gt;&gt; queue.popleft()                 # The second to arrive now leaves</span><br><span class="line">&apos;John&apos;</span><br><span class="line">&gt;&gt;&gt; queue                           # Remaining queue in order of arrival</span><br><span class="line">deque([&apos;Michael&apos;, &apos;Terry&apos;, &apos;Graham&apos;])</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="5-2-del-语句"><a href="#5-2-del-语句" class="headerlink" title="5.2. del 语句"></a>5.2. <a href="https://docs.python.org/3/reference/simple_stmts.html#del" target="_blank" rel="noopener">del</a> 语句</h2><p>从列表中按给定的索引而不是值来删除一个子项<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; a = [-1, 1, 66.25, 333, 333, 1234.5]</span><br><span class="line">&gt;&gt;&gt; del a[0]</span><br><span class="line">&gt;&gt;&gt; a</span><br><span class="line">[1, 66.25, 333, 333, 1234.5]</span><br><span class="line">&gt;&gt;&gt; del a[2:4]</span><br><span class="line">&gt;&gt;&gt; a</span><br><span class="line">[1, 66.25, 1234.5]</span><br><span class="line">&gt;&gt;&gt; del a[:]</span><br><span class="line">&gt;&gt;&gt; a</span><br><span class="line">[]</span><br><span class="line">&gt;&gt;&gt; del a  # 也可以删除整个变量</span><br></pre></td></tr></table></figure></p>
<h2 id="5-3-元组"><a href="#5-3-元组" class="headerlink" title="5.3. 元组"></a>5.3. 元组</h2><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; t = 12345, 54321, &apos;hello!&apos;</span><br><span class="line">&gt;&gt;&gt; t[0]</span><br><span class="line">12345</span><br><span class="line">&gt;&gt;&gt; t</span><br><span class="line">(12345, 54321, &apos;hello!&apos;)</span><br><span class="line">&gt;&gt;&gt; # Tuples may be nested:</span><br><span class="line">... u = t, (1, 2, 3, 4, 5) # 封装成元组</span><br><span class="line">&gt;&gt;&gt; u</span><br><span class="line">((12345, 54321, &apos;hello!&apos;), (1, 2, 3, 4, 5))</span><br></pre></td></tr></table></figure>
<p>一对空的括号可以创建空元组<br>创建一个单元素元组可以在值后面<strong>跟一个逗号</strong>（在括号中放入一个单值不够明确）<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; empty = ()</span><br><span class="line">&gt;&gt;&gt; singleton = &apos;hello&apos;,    # &lt;-- note trailing comma</span><br><span class="line">&gt;&gt;&gt; singleton</span><br><span class="line">(&apos;hello&apos;,)</span><br></pre></td></tr></table></figure></p>
<p>元组拆分：<code>x, y, z = t</code></p>
<h2 id="5-4-集合"><a href="#5-4-集合" class="headerlink" title="5.4. 集合"></a>5.4. 集合</h2><p>集合是一个无序不重复元素的集。基本功能包括关系测试和消除重复元素。集合对象还支持 union（联合），intersection（交），difference（差）和 sysmmetric difference（对称差集）等数学运算。<br>注意：<strong>想要创建空集合，你必须使用 set()</strong> 而不是 {}。后者用于创建空字典。<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; basket = &#123;&apos;apple&apos;, &apos;orange&apos;, &apos;apple&apos;, &apos;pear&apos;, &apos;orange&apos;, &apos;banana&apos;&#125;</span><br><span class="line">&gt;&gt;&gt; print(basket)                      # show that duplicates have been removed</span><br><span class="line">&#123;&apos;orange&apos;, &apos;banana&apos;, &apos;pear&apos;, &apos;apple&apos;&#125;</span><br><span class="line">&gt;&gt;&gt; &apos;orange&apos; in basket                 # fast membership testing</span><br><span class="line">True</span><br><span class="line">&gt;&gt;&gt; &apos;crabgrass&apos; in basket</span><br><span class="line">False</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; # Demonstrate set operations on unique letters from two words</span><br><span class="line">...</span><br><span class="line">&gt;&gt;&gt; a = set(&apos;abracadabra&apos;)</span><br><span class="line">&gt;&gt;&gt; b = set(&apos;alacazam&apos;)</span><br><span class="line">&gt;&gt;&gt; a                                  # unique letters in a</span><br><span class="line">&#123;&apos;a&apos;, &apos;r&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;&#125;</span><br><span class="line">&gt;&gt;&gt; a - b                              # letters in a but not in b</span><br><span class="line">&#123;&apos;r&apos;, &apos;d&apos;, &apos;b&apos;&#125;</span><br><span class="line">&gt;&gt;&gt; a | b                              # letters in either a or b</span><br><span class="line">&#123;&apos;a&apos;, &apos;c&apos;, &apos;r&apos;, &apos;d&apos;, &apos;b&apos;, &apos;m&apos;, &apos;z&apos;, &apos;l&apos;&#125;</span><br><span class="line">&gt;&gt;&gt; a &amp; b                              # letters in both a and b</span><br><span class="line">&#123;&apos;a&apos;, &apos;c&apos;&#125;</span><br><span class="line">&gt;&gt;&gt; a ^ b                              # letters in a or b but not both</span><br><span class="line">&#123;&apos;r&apos;, &apos;d&apos;, &apos;b&apos;, &apos;m&apos;, &apos;z&apos;, &apos;l&apos;&#125;</span><br></pre></td></tr></table></figure></p>
<p>类似 <a href="http://www.pythondoc.com/pythontutorial3/datastructures.html#tut-listcomps" target="_blank" rel="noopener">列表推导式</a>，这里有一种集合推导式语法:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; a = &#123;x for x in &apos;abracadabra&apos; if x not in &apos;abc&apos;&#125;</span><br><span class="line">&gt;&gt;&gt; a</span><br><span class="line">&#123;&apos;r&apos;, &apos;d&apos;&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="5-5-字典"><a href="#5-5-字典" class="headerlink" title="5.5. 字典"></a>5.5. 字典</h2><p>无序的键： 值对 （key:value 对）集合，键必须是互不相同的（在同一个字典之内）。一对大括号创建一个空的字典： {} 。初始化列表时，在大括号内放置一组逗号分隔的键：值对，这也是字典输出的方式。<br>对一个字典执行 <code>list(d.keys())</code> 将返回一个字典中所有关键字组成的无序列表（如果你想要排序，只需使用 <code>sorted(d.keys()) ）</code>。使用 <a href="https://docs.python.org/3/reference/expressions.html#in" target="_blank" rel="noopener">in</a> 关键字可以检查字典中是否存在某个关键字（指字典）。</p>
<ul>
<li><p>直接从 key-value 对中创建字典:</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; dict([(&apos;sape&apos;, 4139), (&apos;guido&apos;, 4127), (&apos;jack&apos;, 4098)])</span><br><span class="line">&#123;&apos;sape&apos;: 4139, &apos;jack&apos;: 4098, &apos;guido&apos;: 4127&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>字典推导式可以从任意的键值表达式中创建字典:</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; &#123;x: x**2 for x in (2, 4, 6)&#125;</span><br><span class="line">&#123;2: 4, 4: 16, 6: 36&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>通过关键字参数指定 key-value 对:</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; dict(sape=4139, guido=4127, jack=4098)</span><br><span class="line">&#123;&apos;sape&apos;: 4139, &apos;jack&apos;: 4098, &apos;guido&apos;: 4127&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="5-6-循环技巧"><a href="#5-6-循环技巧" class="headerlink" title="5.6. 循环技巧"></a>5.6. 循环技巧</h2><ul>
<li><p>在字典中循环时，关键字和对应的值可以使用<code>items()</code> 方法同时解读出来:</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; knights = &#123;&apos;gallahad&apos;: &apos;the pure&apos;, &apos;robin&apos;: &apos;the brave&apos;&#125;</span><br><span class="line">&gt;&gt;&gt; for k, v in knights.items():</span><br><span class="line">...     print(k, v)</span><br></pre></td></tr></table></figure>
</li>
<li><p>同时循环两个或更多的序列，可以使用 <a href="https://docs.python.org/3/library/functions.html#zip" target="_blank" rel="noopener">zip()</a> 整体打包:</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; questions = [&apos;name&apos;, &apos;quest&apos;, &apos;favorite color&apos;]</span><br><span class="line">&gt;&gt;&gt; answers = [&apos;lancelot&apos;, &apos;the holy grail&apos;, &apos;blue&apos;]</span><br><span class="line">&gt;&gt;&gt; for q, a in zip(questions, answers):</span><br><span class="line">...     print(&apos;What is your &#123;0&#125;?  It is &#123;1&#125;.&apos;.format(q, a))</span><br></pre></td></tr></table></figure>
</li>
<li><p>逆向循环序列的话，先正向定位序列，然后调用 <a href="https://docs.python.org/3/library/functions.html#reversed" target="_blank" rel="noopener">reversed()</a> 函数:</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; for i in reversed(range(1, 10, 2)):</span><br><span class="line">...     print(i)</span><br></pre></td></tr></table></figure>
</li>
<li><p>要按排序后的顺序循环序列的话，使用 <a href="https://docs.python.org/3/library/functions.html#sorted" target="_blank" rel="noopener">sorted()</a> 函数</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; basket = [&apos;apple&apos;, &apos;orange&apos;, &apos;apple&apos;, &apos;pear&apos;, &apos;orange&apos;, &apos;banana&apos;]</span><br><span class="line">&gt;&gt;&gt; for f in sorted(set(basket)):</span><br><span class="line">...     print(f)</span><br></pre></td></tr></table></figure>
</li>
<li><p>要在循环内部修改正在遍历的序列（例如复制某些元素），建议您首先制作副本,使用<strong>切片表示法</strong></p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; words = [&apos;cat&apos;, &apos;window&apos;, &apos;defenestrate&apos;]</span><br><span class="line">&gt;&gt;&gt; for w in words[:]:  # Loop over a slice copy of the entire list.</span><br><span class="line">...     if len(w) &gt; 6:</span><br><span class="line">...         words.insert(0, w)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="5-7-深入条件控制"><a href="#5-7-深入条件控制" class="headerlink" title="5.7. 深入条件控制"></a>5.7. 深入条件控制</h2><ul>
<li>比较操作符 <code>in</code> 和 <code>not in</code> 审核值是否在一个区间之内。操作符 <code>is</code> 和<code>is not</code> 比较两个对象是否相同</li>
<li>比较操作可以传递。例如<code>a &lt; b == c</code> 审核是否 <code>a</code> 小于<code>b</code> 并且<code>b</code> 等于<code>c</code></li>
<li>比较操作可以通过逻辑操作符 <code>and</code> 和 <code>or</code>组合，比较的结果可以用 <code>not</code>来取反义。这些操作符的优先级又低于比较操作符，在它们之中，<strong><code>not</code> 具有最高的优先级，<code>or</code>优先级最低</strong>，所以 A and not B or C 等于 (A and (notB)) or C<h2 id="5-8-比较序列和其它类型"><a href="#5-8-比较序列和其它类型" class="headerlink" title="5.8 比较序列和其它类型"></a>5.8 比较序列和其它类型</h2><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(1, 2, 3)              &lt; (1, 2, 4)</span><br><span class="line">[1, 2, 3]              &lt; [1, 2, 4]</span><br><span class="line">&apos;ABC&apos; &lt; &apos;C&apos; &lt; &apos;Pascal&apos; &lt; &apos;Python&apos;  # 字符串的字典序按照单字符的 ASCII 顺序</span><br><span class="line">(1, 2, 3, 4)           &lt; (1, 2, 4)</span><br><span class="line">(1, 2)                 &lt; (1, 2, -1)  # 如果一个序列是另一个序列的初始子序列，较短的一个序列就小于另一个</span><br><span class="line">(1, 2, 3)             == (1.0, 2.0, 3.0)  # 混合数值类型是通过它们的数值进行比较的，所以 0 是等于 0.0</span><br><span class="line">(1, 2, (&apos;aa&apos;, &apos;ab&apos;))   &lt; (1, 2, (&apos;abc&apos;, &apos;a&apos;), 4)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="6-模块"><a href="#6-模块" class="headerlink" title="6. 模块"></a>6. 模块</h1><h2 id="6-1-模块载入"><a href="#6-1-模块载入" class="headerlink" title="6.1. 模块载入"></a>6.1. 模块载入</h2><p>出于性能考虑，每个模块在每个解释器会话中只导入一遍。因此，如果你修改了你的模块，需要重启解释器；或者，如果你就是想交互式的测试这么一个模块，可以用 <a href="https://docs.python.org/3/library/imp.html#imp.reload" target="_blank" rel="noopener">imp.reload()</a> 重新加载，例如 <code>import imp; imp.reload(modulename)</code>。</p>
<h2 id="6-2-模块的搜索路径"><a href="#6-2-模块的搜索路径" class="headerlink" title="6.2. 模块的搜索路径"></a>6.2. 模块的搜索路径</h2><p>导入一个叫 <code>spam</code> 的模块时，解释器先在当前目录中搜索名为 <code>spam.py</code> 的文件。如果没有找到的话，接着会到 <a href="https://docs.python.org/3/library/sys.html#sys.path" target="_blank" rel="noopener">sys.path</a> 变量中给出的目录列表中查找。 <a href="https://docs.python.org/3/library/sys.html#sys.path" target="_blank" rel="noopener">sys.path</a> 变量的初始值来自如下：</p>
<ul>
<li>输入脚本的目录（当前目录）。</li>
<li>环境变量 <a href="https://docs.python.org/3/using/cmdline.html#envvar-PYTHONPATH" target="_blank" rel="noopener">PYTHONPATH</a> 表示的目录列表中搜索<br>(这和 shell 变量 <code>PATH</code> 具有一样的语法，即一系列目录名的列表)。</li>
<li>Python 默认安装路径中搜索。</li>
<li><em>在支持符号连接的文件系统中，输入的脚本所在的目录是符号连接指向的目录。 换句话说也就是包含符号链接的目录不会被加到目录搜索路径中</em>。</li>
</ul>
<p>变量 <code>sys.path</code> 是解释器模块搜索路径的字符串列表。它由环境变量 <a href="https://docs.python.org/3/using/cmdline.html#envvar-PYTHONPATH" target="_blank" rel="noopener">PYTHONPATH</a> 初始化，如果没有设定 <a href="https://docs.python.org/3/using/cmdline.html#envvar-PYTHONPATH" target="_blank" rel="noopener">PYTHONPATH</a> ，就由内置的默认值初始化。你可以用标准的字符串操作修改它:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; import sys</span><br><span class="line">&gt;&gt;&gt; sys.path.append(&apos;/ufs/guido/lib/python&apos;)</span><br></pre></td></tr></table></figure></p>
<h2 id="6-3-dir-函数"><a href="#6-3-dir-函数" class="headerlink" title="6.3. dir() 函数"></a>6.3. <a href="https://docs.python.org/3/library/functions.html#dir" target="_blank" rel="noopener">dir()</a> 函数</h2><p>内置函数 <a href="https://docs.python.org/3/library/functions.html#dir" target="_blank" rel="noopener">dir()</a> 用于按模块名搜索模块定义，它返回一个字符串类型的存储列表:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; import fibo, sys</span><br><span class="line">&gt;&gt;&gt; dir(fibo)</span><br><span class="line">[&apos;__name__&apos;, &apos;fib&apos;, &apos;fib2&apos;]</span><br></pre></td></tr></table></figure></p>
<p>无参数调用时，<a href="https://docs.python.org/3/library/functions.html#dir" target="_blank" rel="noopener">dir()</a> 函数返回当前定义的命名:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; a = [1, 2, 3, 4, 5]</span><br><span class="line">&gt;&gt;&gt; import fibo</span><br><span class="line">&gt;&gt;&gt; fib = fibo.fib</span><br><span class="line">&gt;&gt;&gt; dir()</span><br><span class="line">[&apos;__builtins__&apos;, &apos;__doc__&apos;, &apos;__file__&apos;, &apos;__name__&apos;, &apos;a&apos;, &apos;fib&apos;, &apos;fibo&apos;, &apos;sys&apos;]</span><br></pre></td></tr></table></figure></p>
<p>该列表列出了所有类型的名称：变量，模块，函数，等等。<br><a href="https://docs.python.org/3/library/functions.html#dir" target="_blank" rel="noopener">dir()</a> 不会列出内置函数和变量名。如果你想列出这些内容，它们在标准模块 <a href="https://docs.python.org/3/library/builtins.html#module-builtins" target="_blank" rel="noopener">builtins</a> 中定义:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; import builtins</span><br><span class="line">&gt;&gt;&gt; dir(builtins)</span><br></pre></td></tr></table></figure></p>
<h2 id="6-4-包"><a href="#6-4-包" class="headerlink" title="6.4. 包"></a>6.4. 包</h2><p>一个声音处理的模块集，目录结构如下：<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">sound/                          Top-level package</span><br><span class="line">      __init__.py               Initialize the sound package</span><br><span class="line">      formats/                  Subpackage for file format conversions</span><br><span class="line">              __init__.py</span><br><span class="line">              wavread.py</span><br><span class="line">              wavwrite.py</span><br><span class="line">              aiffread.py</span><br><span class="line">              aiffwrite.py</span><br><span class="line">              auread.py</span><br><span class="line">              auwrite.py</span><br><span class="line">              ...</span><br><span class="line">      effects/                  Subpackage for sound effects</span><br><span class="line">              __init__.py</span><br><span class="line">              echo.py</span><br><span class="line">              surround.py</span><br><span class="line">              reverse.py</span><br><span class="line">              ...</span><br><span class="line">      filters/                  Subpackage for filters</span><br><span class="line">              __init__.py</span><br><span class="line">              equalizer.py</span><br><span class="line">              vocoder.py</span><br><span class="line">              karaoke.py</span><br><span class="line">              ...</span><br></pre></td></tr></table></figure></p>
<p>当导入这个包时，Python 通过 <code>sys.path</code> 搜索路径查找包含这个包的子目录。<br>为了让 Python 将目录当做内容包，目录中必须包含 <code>__init__.py</code> 文件。最简单的情况下，只需要一个空的 <code>__init__.py</code> 文件即可。当然它也可以执行包的初始化代码，或者定义稍后介绍的 <code>__all__</code> 变量。</p>
<h3 id="6-4-1-导入包的几种方式："><a href="#6-4-1-导入包的几种方式：" class="headerlink" title="6.4.1. 导入包的几种方式："></a>6.4.1. 导入包的几种方式：</h3><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 加载 echo 子模块</span><br><span class="line">echo.echofilter(input, output, delay=0.7, atten=4)</span><br><span class="line"># 直接导入函数或变量</span><br><span class="line">from sound.effects.echo import echofilter</span><br></pre></td></tr></table></figure>
<h3 id="6-4-2-从-导入包"><a href="#6-4-2-从-导入包" class="headerlink" title="6.4.2. 从 * 导入包"></a>6.4.2. 从 * 导入包</h3><p>提供一个明确的包索引。<a href="https://docs.python.org/3/reference/simple_stmts.html#import" target="_blank" rel="noopener">import</a> 语句按如下条件进行转换：执行 <code>from package import *</code> 时，如果包中的 <code>__init__.py</code> 代码定义了一个名为 <code>__all__</code> 的列表，就会按照列表中给出的模块名进行导入。新版本的包发布时作者可以任意更新这个列表。如果包作者不想 import <em> 的时候导入他们的包中所有模块，那么也可能会决定不支持它（ import </em> ）。例如， <code>sound/effects/__init__.py</code> 这个文件可能包括如下代码:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">__all__ = [&quot;echo&quot;, &quot;surround&quot;, &quot;reverse&quot;]</span><br></pre></td></tr></table></figure></p>
<p>这意味着<code>from sound.effects import</code> 语句会从 <code>sound</code> 包中导入以上三个已命名的子模块。</p>
<h3 id="6-4-3-包内引用"><a href="#6-4-3-包内引用" class="headerlink" title="6.4.3. 包内引用"></a>6.4.3. 包内引用</h3><p>可以用这样的形式<code>from module import name</code> 来写显式的相对位置导入。那些显式相对导入用点号标明关联导入当前和上级包。以 <code>surround</code> 模块为例，你可以这样用:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">from . import echo</span><br><span class="line">from .. import formats</span><br><span class="line">from ..filters import equalizer</span><br></pre></td></tr></table></figure></p>
<p>需要注意的是显式或隐式相对位置导入都<strong>基于当前模块的命名</strong>。因为主模块的名字总是<code>&quot;__main__&quot;</code>，Python 应用程序的主模块应该总是用绝对导入。</p>
<h1 id="7-输入和输出"><a href="#7-输入和输出" class="headerlink" title="7. 输入和输出"></a>7. 输入和输出</h1><h2 id="7-1-格式化输出"><a href="#7-1-格式化输出" class="headerlink" title="7.1. 格式化输出"></a>7.1. 格式化输出</h2><p>这里有两种大相径庭地输出值方法：<em>表达式语句</em> 和 <a href="https://docs.python.org/3/library/functions.html#print" target="_blank" rel="noopener">print()</a> 函数（第三种访求是使用文件对象的 <code>write()</code> 方法，标准文件输出可以参考 <code>sys.stdout</code>，详细内容参见库参考手册）。<br> <a href="https://docs.python.org/3/library/stdtypes.html#str.format" target="_blank" rel="noopener">str.format()</a> 方法提供了丰富的格式控制。<br>如何将值转化为字符串？Python 有办法将任意值转为字符串：将它传入 <a href="https://docs.python.org/3/library/functions.html#repr" target="_blank" rel="noopener">repr()</a> 或 <a href="https://docs.python.org/3/library/stdtypes.html#str" target="_blank" rel="noopener">str()</a> 函数。<br>函数 <a href="https://docs.python.org/3/library/stdtypes.html#str" target="_blank" rel="noopener">str()</a> 用于将值转化为适于人阅读的形式，而 <a href="https://docs.python.org/3/library/functions.html#repr" target="_blank" rel="noopener">repr()</a> 转化为供解释器读取的形式（如果没有等价的语法，则会发生 <a href="https://docs.python.org/3/library/exceptions.html#SyntaxError" target="_blank" rel="noopener">SyntaxError</a> 异常）某对象没有适于人阅读的解释形式的话，<a href="https://docs.python.org/3/library/stdtypes.html#str" target="_blank" rel="noopener">str()</a> 会返回与 <a href="https://docs.python.org/3/library/functions.html#repr" target="_blank" rel="noopener">repr()</a>等同的值。</p>
<h3 id="7-2-str的一些方法"><a href="#7-2-str的一些方法" class="headerlink" title="7.2. str的一些方法"></a>7.2. str的一些方法</h3><ul>
<li><a href="https://docs.python.org/3/library/stdtypes.html#str.rjust" target="_blank" rel="noopener">str.rjust()</a> 方法，它把字符串输出到一列，并通过向左侧填充空格来使其右对齐。类似的方法还有 <a href="https://docs.python.org/3/library/stdtypes.html#str.ljust" target="_blank" rel="noopener">str.ljust()</a> 和 <a href="https://docs.python.org/3/library/stdtypes.html#str.center" target="_blank" rel="noopener">str.center()</a>。这些函数只是输出新的字符串，并不改变什么。如果输出的字符串太长，它们也不会截断它，而是原样输出。如果你确实需要截断它，可以使用切割操作，例如：<code>x.ljust(n)[:n]</code>。</li>
<li><p><a href="https://docs.python.org/3/library/stdtypes.html#str.zfill" target="_blank" rel="noopener">str.zfill()</a> 它用于向数值的字符串表达左侧填充 0。该函数可以正确理解正负号:</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; &apos;12&apos;.zfill(5)</span><br><span class="line">&apos;00012&apos;</span><br><span class="line">&gt;&gt;&gt; &apos;-3.14&apos;.zfill(7)</span><br><span class="line">&apos;-003.14&apos;</span><br><span class="line">&gt;&gt;&gt; &apos;3.14159265359&apos;.zfill(5)</span><br><span class="line">&apos;3.14159265359&apos;</span><br></pre></td></tr></table></figure>
</li>
<li><p><a href="https://docs.python.org/3/library/stdtypes.html#str.format" target="_blank" rel="noopener">str.format()</a> 的基本用法如下:</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; print(&apos;We are the &#123;&#125; who say &quot;&#123;&#125;!&quot;&apos;.format(&apos;knights&apos;, &apos;Ni&apos;))</span><br><span class="line">We are the knights who say &quot;Ni!&quot;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>大括号和其中的字符会被替换成传入 <a href="https://docs.python.org/3/library/stdtypes.html#str.format" target="_blank" rel="noopener">str.format()</a> 的参数。大括号中的数值指明使用传入 <a href="https://docs.python.org/3/library/stdtypes.html#str.format" target="_blank" rel="noopener">str.format()</a>方法的对象中的哪一个:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; print(&apos;&#123;0&#125; and &#123;1&#125;&apos;.format(&apos;spam&apos;, &apos;eggs&apos;))</span><br><span class="line">spam and eggs</span><br><span class="line">&gt;&gt;&gt; print(&apos;&#123;1&#125; and &#123;0&#125;&apos;.format(&apos;spam&apos;, &apos;eggs&apos;))</span><br><span class="line">eggs and spam</span><br></pre></td></tr></table></figure></p>
<p>如果在 <a href="https://docs.python.org/3/library/stdtypes.html#str.format" target="_blank" rel="noopener">str.format()</a> 调用时使用关键字参数，可以通过参数名来引用值:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; print(&apos;This &#123;food&#125; is &#123;adjective&#125;.&apos;.format(</span><br><span class="line">...       food=&apos;spam&apos;, adjective=&apos;absolutely horrible&apos;))</span><br><span class="line">This spam is absolutely horrible.</span><br></pre></td></tr></table></figure></p>
<p>位置参数和关键字参数可以随意组合:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; print(&apos;The story of &#123;0&#125;, &#123;1&#125;, and &#123;other&#125;.&apos;.format(&apos;Bill&apos;, &apos;Manfred&apos;,</span><br><span class="line">                                                       other=&apos;Georg&apos;))</span><br><span class="line">The story of Bill, Manfred, and Georg.</span><br></pre></td></tr></table></figure></p>
<p><code>&#39;!a&#39;</code> (应用 <a href="https://docs.python.org/3/library/functions.html#ascii" target="_blank" rel="noopener">ascii()</a>)，<code>&#39;!s&#39;</code> （应用 <a href="https://docs.python.org/3/library/stdtypes.html#str" target="_blank" rel="noopener">str()</a> ）和 <code>&#39;!r&#39;</code> （应用 <a href="https://docs.python.org/3/library/functions.html#repr" target="_blank" rel="noopener">repr()</a> ）可以<strong>在格式化之前转换值</strong>:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; import math</span><br><span class="line">&gt;&gt;&gt; print(&apos;The value of PI is approximately &#123;&#125;.&apos;.format(math.pi))</span><br><span class="line">The value of PI is approximately 3.14159265359.</span><br><span class="line">&gt;&gt;&gt; print(&apos;The value of PI is approximately &#123;!r&#125;.&apos;.format(math.pi))</span><br><span class="line">The value of PI is approximately 3.141592653589793.</span><br></pre></td></tr></table></figure></p>
<p>字段名后允许可选的<code>&#39;:&#39;</code> 和格式指令。下例将 Pi 转为三位精度。<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; import math</span><br><span class="line">&gt;&gt;&gt; print(&apos;The value of PI is approximately &#123;0:.3f&#125;.&apos;.format(math.pi))</span><br><span class="line">The value of PI is approximately 3.142.</span><br></pre></td></tr></table></figure></p>
<p>在字段后的 ‘:’ 后面加一个整数会限定该字段的最小宽度，这在美化表格时很有用:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; table = &#123;&apos;Sjoerd&apos;: 4127, &apos;Jack&apos;: 4098, &apos;Dcab&apos;: 7678&#125;</span><br><span class="line">&gt;&gt;&gt; for name, phone in table.items():</span><br><span class="line">...     print(&apos;&#123;0:10&#125; ==&gt; &#123;1:10d&#125;&apos;.format(name, phone))</span><br><span class="line">...</span><br><span class="line">Jack       ==&gt;       4098</span><br><span class="line">Dcab       ==&gt;       7678</span><br><span class="line">Sjoerd     ==&gt;       4127</span><br></pre></td></tr></table></figure></p>
<p>可以用命名来引用被格式化的变量而不是位置。传入一个字典，用中括号( <code>&#39;[]&#39;</code>)访问它的键:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; table = &#123;&apos;Sjoerd&apos;: 4127, &apos;Jack&apos;: 4098, &apos;Dcab&apos;: 8637678&#125;</span><br><span class="line">&gt;&gt;&gt; print(&apos;Jack: &#123;0[Jack]:d&#125;; Sjoerd: &#123;0[Sjoerd]:d&#125;; &apos;</span><br><span class="line">          &apos;Dcab: &#123;0[Dcab]:d&#125;&apos;.format(table))</span><br><span class="line">Jack: 4098; Sjoerd: 4127; Dcab: 8637678</span><br></pre></td></tr></table></figure></p>
<p>也可以用 ‘**’ 标志将这个字典以关键字参数的方式传入:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; table = &#123;&apos;Sjoerd&apos;: 4127, &apos;Jack&apos;: 4098, &apos;Dcab&apos;: 8637678&#125;</span><br><span class="line">&gt;&gt;&gt; print(&apos;Jack: &#123;Jack:d&#125;; Sjoerd: &#123;Sjoerd:d&#125;; Dcab: &#123;Dcab:d&#125;&apos;.format(**table))</span><br><span class="line">Jack: 4098; Sjoerd: 4127; Dcab: 8637678</span><br></pre></td></tr></table></figure></p>
<p>这种方式与新的内置函数 <a href="https://docs.python.org/3/library/functions.html#vars" target="_blank" rel="noopener">vars()</a> 组合使用非常有效。该函数返回包含所有局部变量的字典。</p>
<p>要进一步了解字符串格式化方法 <a href="https://docs.python.org/3/library/stdtypes.html#str.format" target="_blank" rel="noopener">str.format()</a>，参见 <a href="https://docs.python.org/3/library/string.html#formatstrings" target="_blank" rel="noopener">格式字符串语法</a>。</p>
<h2 id="7-2-文件读写"><a href="#7-2-文件读写" class="headerlink" title="7.2. 文件读写"></a>7.2. 文件读写</h2><p>函数 <a href="https://docs.python.org/3/library/functions.html#open" target="_blank" rel="noopener">open()</a> 返回 <a href="https://docs.python.org/3/glossary.html#term-file-object" target="_blank" rel="noopener">文件对象</a>，通常的用法需要两个参数：<code>open(filename, mode)</code>。<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; f = open(&apos;workfile&apos;, &apos;w&apos;)</span><br></pre></td></tr></table></figure></p>
<p>第一个参数是一个含有文件名的字符串。第二个参数也是一个字符串，含有描述如何使用该文件的几个字符。mode 为 ‘r’ 时表示只是读取文件；’w’ 表示只是写入文件（已经存在的同名文件将被删掉）；’a’ 表示打开文件进行追加，写入到文件中的任何数据将自动添加到末尾。 ‘r+’ 表示打开文件进行读取和写入。mode 参数是可选的，默认为 ‘r’。</p>
<p>通常，文件以 文本 打开，这意味着，你从文件读出和向文件写入的字符串会被特定的编码方式（默认是UTF-8）编码。模式后面的 ‘b’ 以 二进制模式 打开文件：数据会以字节对象的形式读出和写入。这种模式应该用于所有不包含文本的文件。</p>
<p>在文本模式下，读取时默认会将平台有关的行结束符（Unix上是 \n , Windows上是 \r\n）转换为 \n。在文本模式下写入时，默认会将出现的 \n 转换成平台有关的行结束符。这种暗地里的修改对 ASCII 文本文件没有问题，但会损坏 JPEG 或 EXE 这样的二进制文件中的数据。使用二进制模式读写此类文件时要特别小心。</p>
<h2 id="7-2-1-文件对象方法"><a href="#7-2-1-文件对象方法" class="headerlink" title="7.2.1. 文件对象方法"></a>7.2.1. 文件对象方法</h2><p>要读取文件内容，需要调用<code>f.read(size)</code>，该方法读取若干数量的数据并以字符串形式返回其内容，<em>size</em> 是可选的数值，指定字符串长度。<br>如果没有指定 <em>size</em> 或者指定为负数，就会读取并返回整个文件。当文件大小为当前机器内存两倍时，就会产生问题。反之，会尽可能按比较大的 * 读取和返回数据。如果到了文件末尾，<code>f.read()</code> 会返回一个空字符串<code>（&#39;&#39;）</code>:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; f.read()</span><br><span class="line">&apos;This is the entire file.\n&apos;</span><br><span class="line">&gt;&gt;&gt; f.read()</span><br><span class="line">&apos;&apos;</span><br></pre></td></tr></table></figure></p>
<p><code>f.readline()</code>从文件中读取单独一行，字符串结尾会自动加上一个换行符（<code>\n</code> ），只有当文件最后一行没有以换行符结尾时，这一操作才会被忽略。</p>
<ul>
<li>如果<code>f.readline()</code> 返回一个空字符串，那就表示到达了文件末尾</li>
<li>如果是一个空行，就会描述为 <code>&#39;\n&#39;</code>，一个只包含换行符的字符串:<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; f.readline()</span><br><span class="line">&apos;This is the first line of the file.\n&apos;</span><br><span class="line">&gt;&gt;&gt; f.readline()</span><br><span class="line">&apos;Second line of the file\n&apos;</span><br><span class="line">&gt;&gt;&gt; f.readline()</span><br><span class="line">&apos;&apos;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>把文件中的所有行读到一个列表中，可以使用 <code>list(f)</code> 或者<code>f.readlines()</code>。</p>
<p><code>f.write(string)</code> 方法将 <em>string</em> 的内容写入文件，并返回写入字符的长度:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; f.write(&apos;This is a test\n&apos;)</span><br><span class="line">15</span><br></pre></td></tr></table></figure></p>
<p>想要写入其他非字符串内容，首先要将它转换为字符串。</p>
<p>当你使用完一个文件时，调用 f.close() 方法就可以关闭它并释放其占用的所有系统资源。 在调用 f.close() 方法后，试图再次使用文件对象将会自动失败。<br>用关键字 <a href="https://docs.python.org/3/reference/compound_stmts.html#with" target="_blank" rel="noopener">with</a> 处理文件对象是个好习惯。它的先进之处在于文件用完后会自动关闭，就算发生异常也没关系。它是 <a href="https://docs.python.org/3/reference/compound_stmts.html#try" target="_blank" rel="noopener">try</a>-<a href="https://docs.python.org/3/reference/compound_stmts.html#finally" target="_blank" rel="noopener">finally</a> 块的简写:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; with open(&apos;workfile&apos;, &apos;r&apos;) as f:</span><br><span class="line">...     read_data = f.read()</span><br><span class="line">&gt;&gt;&gt; f.closed</span><br><span class="line">True</span><br></pre></td></tr></table></figure></p>
<h3 id="7-2-2-使用-json-存储结构化数据"><a href="#7-2-2-使用-json-存储结构化数据" class="headerlink" title="7.2.2. 使用 json 存储结构化数据"></a>7.2.2. 使用 <a href="https://docs.python.org/3/library/json.html#module-json" target="_blank" rel="noopener">json</a> 存储结构化数据</h3><p>Python 允许你使用常用的数据交换格式 <a href="http://json.org/" target="_blank" rel="noopener">JSON（JavaScript Object Notation）</a>。标准模块 <a href="https://docs.python.org/3/library/json.html#module-json" target="_blank" rel="noopener">json</a> 可以接受 Python 数据结构，并将它们转换为字符串表示形式；此过程称为 <strong>序列化</strong>。从字符串表示形式重新构建数据结构称为 <strong>反序列化</strong>。序列化和反序列化的过程中，表示该对象的字符串可以存储在文件或数据中，也可以通过网络连接传送给远程的机器。<br>如果你有一个对象 x，你可以用简单的一行代码查看其 JSON 字符串表示形式:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; json.dumps([1, &apos;simple&apos;, &apos;list&apos;])</span><br><span class="line">&apos;[1, &quot;simple&quot;, &quot;list&quot;]&apos;</span><br></pre></td></tr></table></figure></p>
<p><a href="https://docs.python.org/3/library/json.html#json.dumps" target="_blank" rel="noopener">dumps()</a> 函数的另外一个变体 <a href="https://docs.python.org/3/library/json.html#json.dump" target="_blank" rel="noopener">dump()</a>，直接将对象序列化到一个文件。所以如果 <code>f</code> 是为写入而打开的一个 <a href="https://docs.python.org/3/glossary.html#term-file-object" target="_blank" rel="noopener">文件对象</a>，我们可以这样做:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">json.dump(x, f)</span><br></pre></td></tr></table></figure></p>
<p>为了重新解码对象，如果 <code>f</code> 是为读取而打开的 <a href="https://docs.python.org/3/glossary.html#term-file-object" target="_blank" rel="noopener">文件对象</a>:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x = json.load(f)</span><br></pre></td></tr></table></figure></p>
<p>这种简单的序列化技术可以处理列表和字典，但序列化任意类实例为 JSON 需要一点额外的努力。 <a href="https://docs.python.org/3/library/json.html#module-json" target="_blank" rel="noopener">json</a> 模块的手册对此有详细的解释。</p>
<h3 id="7-2-3-pickle-pickle-模块"><a href="#7-2-3-pickle-pickle-模块" class="headerlink" title="7.2.3. pickle - pickle 模块"></a>7.2.3. <a href="https://docs.python.org/3/library/pickle.html#module-pickle" target="_blank" rel="noopener">pickle</a> - pickle 模块</h3><p>与 <a href="http://www.pythondoc.com/pythontutorial3/inputoutput.html#tut-json" target="_blank" rel="noopener">JSON</a> 不同，<em>pickle</em> 是一个协议，它允许任意复杂的 Python 对象的序列化。因此，它只能用于 Python 而不能用来与其他语言编写的应用程序进行通信。默认情况下它也是不安全的：如果数据由熟练的攻击者精心设计， 反序列化来自一个不受信任源的 pickle 数据可以执行任意代码。</p>
<h1 id="8-错误和异常"><a href="#8-错误和异常" class="headerlink" title="8. 错误和异常"></a>8. 错误和异常</h1><p>Python 中（至少）有两种错误：语法错误和异常（ <em>syntax errors</em> 和 <em>exceptions</em> ）。</p>
<h2 id="8-1-语法错误"><a href="#8-1-语法错误" class="headerlink" title="8.1. 语法错误"></a>8.1. 语法错误</h2><p>语法错误，也被称作解析错误。<br>这是最常见的错误，往往是由于缺少冒号或者括号等引起。<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; while True print(&apos;Hello world&apos;)</span><br><span class="line">  File &quot;&lt;stdin&gt;&quot;, line 1, in ?</span><br><span class="line">    while True print(&apos;Hello world&apos;)</span><br><span class="line">                   ^</span><br><span class="line">SyntaxError: invalid syntax</span><br></pre></td></tr></table></figure></p>
<p>语法分析器指出错误行，并且在检测到错误的位置前面显示一个小“箭头”。 错误是由箭头 <em>前面</em> 的标记引起的（或者至少是这么检测的）： 这个例子中，函数 <a href="https://docs.python.org/3/library/functions.html#print" target="_blank" rel="noopener">print()</a> 被发现存在错误，因为它前面少了一个冒号（ <code>&#39;:&#39;</code> ）。 错误会输出文件名和行号。</p>
<h2 id="8-2-异常"><a href="#8-2-异常" class="headerlink" title="8.2. 异常"></a>8.2. 异常</h2><p>即使一条语句或表达式在语法上是正确的，当试图执行它时也可能会引发错误。运行期检测到的错误称为 <em>异常</em>，并且程序不会无条件的崩溃：<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; 10 * (1/0)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;&lt;stdin&gt;&quot;, line 1, in ?</span><br><span class="line">ZeroDivisionError: int division or modulo by zero</span><br><span class="line">&gt;&gt;&gt; 4 + spam*3</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;&lt;stdin&gt;&quot;, line 1, in ?</span><br><span class="line">NameError: name &apos;spam&apos; is not defined</span><br><span class="line">&gt;&gt;&gt; &apos;2&apos; + 2</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;&lt;stdin&gt;&quot;, line 1, in ?</span><br><span class="line">TypeError: Can&apos;t convert &apos;int&apos; object to str implicitly</span><br></pre></td></tr></table></figure></p>
<p>错误信息的最后一行指出发生了什么错误。异常也有不同的类型，异常类型做为错误信息的一部分显示出来：示例中的异常分别为 零除错误（ <a href="https://docs.python.org/3/library/exceptions.html#ZeroDivisionError" target="_blank" rel="noopener">ZeroDivisionError</a> ） ，命名错误（ <a href="https://docs.python.org/3/library/exceptions.html#NameError" target="_blank" rel="noopener">NameError</a>） 和 类型错误（ <a href="https://docs.python.org/3/library/exceptions.html#TypeError" target="_blank" rel="noopener">TypeError</a> ）。打印错误信息时，异常的类型作为异常的内置名显示。对于所有的内置异常都是如此，不过用户自定义异常就不一定了（尽管这是一个很有用的约定）。标准异常名是内置的标识（没有保留关键字）。</p>
<p>这一行后一部分是关于该异常类型的详细说明，这意味着它的内容依赖于异常类型。</p>
<p>错误信息的前半部分以堆栈的形式列出异常发生的位置。通常在堆栈中列出了源代码行，然而，来自标准输入的源码不会显示出来。</p>
<p><a href="https://docs.python.org/3/library/exceptions.html#bltin-exceptions" target="_blank" rel="noopener">内置的异常</a> 列出了内置异常和它们的含义。</p>
<h2 id="8-3-异常处理"><a href="#8-3-异常处理" class="headerlink" title="8.3. 异常处理"></a>8.3. 异常处理</h2><p>通过编程处理选择的异常是可行的。看一下下面的例子：它会一直要求用户输入，直到输入一个合法的整数为止，但允许用户中断这个程序（使用 <code>Control-C</code> 或系统支持的任何方法）。注意：用户产生的中断会引发一个 <a href="https://docs.python.org/3/library/exceptions.html#KeyboardInterrupt" target="_blank" rel="noopener">KeyboardInterrupt</a> 异常。<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; while True:</span><br><span class="line">...     try:</span><br><span class="line">...         x = int(input(&quot;Please enter a number: &quot;))</span><br><span class="line">...         break</span><br><span class="line">...     except ValueError:</span><br><span class="line">...         print(&quot;Oops!  That was no valid number.  Try again...&quot;)</span><br><span class="line">...</span><br></pre></td></tr></table></figure></p>
<h3 id="8-3-1-try-except-else-语句"><a href="#8-3-1-try-except-else-语句" class="headerlink" title="8.3.1 try - except - else 语句"></a>8.3.1 try - except - else 语句</h3><p><a href="https://docs.python.org/3/reference/compound_stmts.html#try" target="_blank" rel="noopener">try</a> 语句按如下方式工作。</p>
<ul>
<li><p>首先，执行 <em>try</em> 子句 （在 <a href="https://docs.python.org/3/reference/compound_stmts.html#try" target="_blank" rel="noopener">try</a> 和 <a href="https://docs.python.org/3/reference/compound_stmts.html#except" target="_blank" rel="noopener">except</a> 关键字之间的部分）。</p>
</li>
<li><p>如果没有异常发生， <em>except</em> 子句 在 <a href="https://docs.python.org/3/reference/compound_stmts.html#try" target="_blank" rel="noopener">try</a> 语句执行完毕后就被忽略了。</p>
</li>
<li><p>如果在 try 子句执行过程中发生了异常，那么该子句其余的部分就会被忽略。<br>如果异常匹配于 <a href="https://docs.python.org/3/reference/compound_stmts.html#except" target="_blank" rel="noopener">except</a> 关键字后面指定的异常类型，就执行对应的except子句。然后继续执行 <a href="https://docs.python.org/3/reference/compound_stmts.html#try" target="_blank" rel="noopener">try</a> 语句之后的代码。</p>
</li>
<li><p>如果发生了一个异常，在 <a href="https://docs.python.org/3/reference/compound_stmts.html#except" target="_blank" rel="noopener">except</a> 子句中没有与之匹配的分支，它就会传递到上一级 <a href="https://docs.python.org/3/reference/compound_stmts.html#try" target="_blank" rel="noopener">try</a> 语句中。<br>如果最终仍找不到对应的处理语句，它就成为一个 <em>未处理异常</em>，终止程序运行，显示提示信息。</p>
</li>
</ul>
<p>一个 <a href="https://docs.python.org/3/reference/compound_stmts.html#try" target="_blank" rel="noopener">try</a> 语句可能包含多个 except 子句，分别指定处理不同的异常。至多只会有一个分支被执行。异常处理程序只会处理对应的 try 子句中发生的异常，在同一个 <a href="https://docs.python.org/3/reference/compound_stmts.html#try" target="_blank" rel="noopener">try</a> 语句中，其他子句中发生的异常则不作处理。一个 except 子句可以在括号中列出多个异常的名字，例如:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">... except (RuntimeError, TypeError, NameError):</span><br><span class="line">...     pass</span><br></pre></td></tr></table></figure></p>
<p>最后一个 except 子句可以省略异常名称，以作为通配符使用。你需要慎用此法，因为它会轻易隐藏一个实际的程序错误！可以使用这种方法打印一条错误信息，然后重新抛出异常（允许调用者处理这个异常):<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">import sys</span><br><span class="line"></span><br><span class="line">try:</span><br><span class="line">    f = open(&apos;myfile.txt&apos;)</span><br><span class="line">    s = f.readline()</span><br><span class="line">    i = int(s.strip())</span><br><span class="line">except OSError as err:</span><br><span class="line">    print(&quot;OS error: &#123;0&#125;&quot;.format(err))</span><br><span class="line">except ValueError:</span><br><span class="line">    print(&quot;Could not convert data to an integer.&quot;)</span><br><span class="line">except:</span><br><span class="line">    print(&quot;Unexpected error:&quot;, sys.exc_info()[0])</span><br><span class="line">    raise</span><br></pre></td></tr></table></figure></p>
<p><a href="https://docs.python.org/3/reference/compound_stmts.html#try" target="_blank" rel="noopener">try</a> … <a href="https://docs.python.org/3/reference/compound_stmts.html#except" target="_blank" rel="noopener">except</a> 语句可以带有一个 <em>else子句</em>，该子句只能出现在所有 except 子句之后。当 try 语句没有抛出异常时，需要执行一些代码，可以使用这个子句。例如:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">for arg in sys.argv[1:]:</span><br><span class="line">    try:</span><br><span class="line">        f = open(arg, &apos;r&apos;)</span><br><span class="line">    except IOError:</span><br><span class="line">        print(&apos;cannot open&apos;, arg)</span><br><span class="line">    else:</span><br><span class="line">        print(arg, &apos;has&apos;, len(f.readlines()), &apos;lines&apos;)</span><br><span class="line">        f.close()</span><br></pre></td></tr></table></figure></p>
<p>使用 <a href="https://docs.python.org/3/reference/compound_stmts.html#else" target="_blank" rel="noopener">else</a> 子句比在 <a href="https://docs.python.org/3/reference/compound_stmts.html#try" target="_blank" rel="noopener">try</a> 子句中附加代码要好，因为这样可以避免 <a href="https://docs.python.org/3/reference/compound_stmts.html#try" target="_blank" rel="noopener">try</a> … <a href="https://docs.python.org/3/reference/compound_stmts.html#except" target="_blank" rel="noopener">except</a> 意外的截获本来不属于它们保护的那些代码抛出的异常。</p>
<h3 id="8-3-2-异常的参数"><a href="#8-3-2-异常的参数" class="headerlink" title="8.3.2 异常的参数"></a>8.3.2 异常的<em>参数</em></h3><p>发生异常时，可能会有一个附属值，作为异常的 <em>参数</em> 存在。这个参数是否存在、是什么类型，依赖于异常的类型。</p>
<p>在异常名（列表）之后，也可以为 except 子句指定一个变量。这个变量绑定于一个异常实例，它存储在 <code>instance.args</code> 的参数中。<br>为了方便起见，异常实例定义了 <a href="https://docs.python.org/3/reference/datamodel.html#object.__str__" target="_blank" rel="noopener"><strong>str </strong>()</a> ，这样就可以直接访问过打印参数而不必引用 <code>.args</code>。这种做法不受鼓励。相反，更好的做法是给异常传递一个参数（如果要传递多个参数，可以传递一个元组），把它绑定到 message 属性。一旦异常发生，它会在抛出前绑定所有指定的属性。<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; try:</span><br><span class="line">...    raise Exception(&apos;spam&apos;, &apos;eggs&apos;)</span><br><span class="line">... except Exception as inst:</span><br><span class="line">...    print(type(inst))    # the exception instance</span><br><span class="line">...    print(inst.args)     # arguments stored in .args</span><br><span class="line">...    print(inst)          # __str__ allows args to be printed directly,</span><br><span class="line">...                         # but may be overridden in exception subclasses</span><br><span class="line">...    x, y = inst.args     # unpack args</span><br><span class="line">...    print(&apos;x =&apos;, x)</span><br><span class="line">...    print(&apos;y =&apos;, y)</span><br><span class="line">...</span><br><span class="line">&lt;class &apos;Exception&apos;&gt;</span><br><span class="line">(&apos;spam&apos;, &apos;eggs&apos;)</span><br><span class="line">(&apos;spam&apos;, &apos;eggs&apos;)</span><br><span class="line">x = spam</span><br><span class="line">y = eggs</span><br></pre></td></tr></table></figure></p>
<p>对于那些未处理的异常，如果一个它们带有参数，那么就会被作为异常信息的最后部分（“详情”）打印出来。</p>
<p>异常处理器不仅仅处理那些在 try 子句中立刻发生的异常，也会处理那些 try 子句中调用的函数内部发生的异常。</p>
<h2 id="8-4-抛出异常"><a href="#8-4-抛出异常" class="headerlink" title="8.4. 抛出异常"></a>8.4. 抛出异常</h2><p><a href="https://docs.python.org/3/reference/simple_stmts.html#raise" target="_blank" rel="noopener">raise</a> 语句允许程序员强制抛出一个指定的异常。例如:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; raise NameError(&apos;HiThere&apos;)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;&lt;stdin&gt;&quot;, line 1, in ?</span><br><span class="line">NameError: HiThere</span><br></pre></td></tr></table></figure></p>
<p>要抛出的异常由 <a href="https://docs.python.org/3/reference/simple_stmts.html#raise" target="_blank" rel="noopener">raise</a> 的唯一参数标识。它必需是一个异常实例或异常类（继承自 <a href="https://docs.python.org/3/library/exceptions.html#Exception" target="_blank" rel="noopener">Exception</a> 的类）。</p>
<p>如果你需要明确一个异常是否抛出，但不想处理它，<a href="https://docs.python.org/3/reference/simple_stmts.html#raise" target="_blank" rel="noopener">raise</a> 语句可以让你很简单的重新抛出该异常:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; try:</span><br><span class="line">...     raise NameError(&apos;HiThere&apos;)</span><br><span class="line">... except NameError:</span><br><span class="line">...     print(&apos;An exception flew by!&apos;)</span><br><span class="line">...     raise</span><br><span class="line">...</span><br><span class="line">An exception flew by!</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;&lt;stdin&gt;&quot;, line 2, in ?</span><br><span class="line">NameError: HiThere</span><br></pre></td></tr></table></figure></p>
<h2 id="8-5-用户自定义异常"><a href="#8-5-用户自定义异常" class="headerlink" title="8.5. 用户自定义异常"></a>8.5. 用户自定义异常</h2><p>在程序中可以通过创建新的异常类型来命名自己的异常。异常类通常应该直接或间接的从 <a href="https://docs.python.org/3/library/exceptions.html#Exception" target="_blank" rel="noopener">Exception</a> 类派生，例如:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; class MyError(Exception):</span><br><span class="line">...     def __init__(self, value):</span><br><span class="line">...         self.value = value</span><br><span class="line">...     def __str__(self):</span><br><span class="line">...         return repr(self.value)</span><br><span class="line">...</span><br><span class="line">&gt;&gt;&gt; try:</span><br><span class="line">...     raise MyError(2*2)</span><br><span class="line">... except MyError as e:</span><br><span class="line">...     print(&apos;My exception occurred, value:&apos;, e.value)</span><br><span class="line">...</span><br><span class="line">My exception occurred, value: 4</span><br><span class="line">&gt;&gt;&gt; raise MyError(&apos;oops!&apos;)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;&lt;stdin&gt;&quot;, line 1, in ?</span><br><span class="line">__main__.MyError: &apos;oops!&apos;</span><br></pre></td></tr></table></figure></p>
<p>在这个例子中，<a href="https://docs.python.org/3/library/exceptions.html#Exception" target="_blank" rel="noopener">Exception</a> 默认的 <a href="https://docs.python.org/3/reference/datamodel.html#object.__init__" target="_blank" rel="noopener"><strong>init</strong>()</a> 被覆盖。新的方式简单的创建 <em>value</em> 属性。这就替换了原来创建 <em>args</em> 属性的方式。</p>
<p>异常类中可以定义任何其它类中可以定义的东西，但是通常为了保持简单，只在其中加入几个属性信息，以供异常处理句柄提取。如果一个新创建的模块中需要抛出几种不同的错误时，一个通常的作法是为该模块定义一个<strong>异常基类</strong>，然后针对不同的错误类型派生出对应的<strong>异常子类</strong>:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">class Error(Exception):</span><br><span class="line">    &quot;&quot;&quot;Base class for exceptions in this module.&quot;&quot;&quot;</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line">class InputError(Error):</span><br><span class="line">    &quot;&quot;&quot;Exception raised for errors in the input.</span><br><span class="line"></span><br><span class="line">    Attributes:</span><br><span class="line">        expression -- input expression in which the error occurred</span><br><span class="line">        message -- explanation of the error</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">    def __init__(self, expression, message):</span><br><span class="line">        self.expression = expression</span><br><span class="line">        self.message = message</span><br><span class="line"></span><br><span class="line">class TransitionError(Error):</span><br><span class="line">    &quot;&quot;&quot;Raised when an operation attempts a state transition that&apos;s not</span><br><span class="line">    allowed.</span><br><span class="line"></span><br><span class="line">    Attributes:</span><br><span class="line">        previous -- state at beginning of transition</span><br><span class="line">        next -- attempted new state</span><br><span class="line">        message -- explanation of why the specific transition is not allowed</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">    def __init__(self, previous, next, message):</span><br><span class="line">        self.previous = previous</span><br><span class="line">        self.next = next</span><br><span class="line">        self.message = message</span><br></pre></td></tr></table></figure></p>
<h2 id="8-6-定义清理行为"><a href="#8-6-定义清理行为" class="headerlink" title="8.6. 定义清理行为"></a>8.6. 定义清理行为</h2><p><a href="https://docs.python.org/3/reference/compound_stmts.html#try" target="_blank" rel="noopener">try</a> 语句还有另一个可选的子句，目的在于定义在任何情况下都一定要执行的功能。例如:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; def divide(x, y):</span><br><span class="line">...     try:</span><br><span class="line">...         result = x / y</span><br><span class="line">...     except ZeroDivisionError:</span><br><span class="line">...         print(&quot;division by zero!&quot;)</span><br><span class="line">...     else:</span><br><span class="line">...         print(&quot;result is&quot;, result)</span><br><span class="line">...     finally:</span><br><span class="line">...         print(&quot;executing finally clause&quot;)</span><br><span class="line">...</span><br><span class="line">&gt;&gt;&gt; divide(2, 1)</span><br><span class="line">result is 2</span><br><span class="line">executing finally clause</span><br><span class="line">&gt;&gt;&gt; divide(2, 0)</span><br><span class="line">division by zero!</span><br><span class="line">executing finally clause</span><br><span class="line">&gt;&gt;&gt; divide(&quot;2&quot;, &quot;1&quot;)</span><br><span class="line">executing finally clause</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;&lt;stdin&gt;&quot;, line 1, in ?</span><br><span class="line">  File &quot;&lt;stdin&gt;&quot;, line 3, in divide</span><br><span class="line">TypeError: unsupported operand type(s) for /: &apos;str&apos; and &apos;str&apos;</span><br></pre></td></tr></table></figure></p>
<p>不管有没有发生异常，<em>finally子句</em> 在程序离开 <a href="https://docs.python.org/3/reference/compound_stmts.html#try" target="_blank" rel="noopener">try</a> 后都一定会被执行。当 <a href="https://docs.python.org/3/reference/compound_stmts.html#try" target="_blank" rel="noopener">try</a> 语句中发生了未被 <a href="https://docs.python.org/3/reference/compound_stmts.html#except" target="_blank" rel="noopener">except</a> 捕获的异常（或者它发生在 <a href="https://docs.python.org/3/reference/compound_stmts.html#except" target="_blank" rel="noopener">except</a> 或 <a href="https://docs.python.org/3/reference/compound_stmts.html#else" target="_blank" rel="noopener">else</a> 子句中），在 <a href="https://docs.python.org/3/reference/compound_stmts.html#finally" target="_blank" rel="noopener">finally</a> 子句执行完后它会被重新抛出。 <a href="https://docs.python.org/3/reference/compound_stmts.html#try" target="_blank" rel="noopener">try</a> 语句经由 <a href="https://docs.python.org/3/reference/simple_stmts.html#break" target="_blank" rel="noopener">break</a> ，<a href="https://docs.python.org/3/reference/simple_stmts.html#continue" target="_blank" rel="noopener">continue</a> 或 <a href="https://docs.python.org/3/reference/simple_stmts.html#return" target="_blank" rel="noopener">return</a> 语句退 出也一样会执行 <a href="https://docs.python.org/3/reference/compound_stmts.html#finally" target="_blank" rel="noopener">finally</a> 子句。</p>
<p><a href="https://docs.python.org/3/reference/compound_stmts.html#finally" target="_blank" rel="noopener">finally</a> 子句在任何情况下都会执行。<a href="https://docs.python.org/3/library/exceptions.html#TypeError" target="_blank" rel="noopener">TypeError</a> 在两个字符串相除的时候抛出，未被 except 子句捕获，因此在 <a href="https://docs.python.org/3/reference/compound_stmts.html#finally" target="_blank" rel="noopener">finally</a> 子句执行完毕后重新抛出。</p>
<p>在真实场景的应用程序中，<a href="https://docs.python.org/3/reference/compound_stmts.html#finally" target="_blank" rel="noopener">finally</a> 子句用于释放外部资源（文件 或网络连接之类的），无论它们的使用过程中是否出错。</p>
<h1 id="9-类"><a href="#9-类" class="headerlink" title="9. 类"></a>9. 类</h1><p> <a href="https://www.cnblogs.com/summer-cool/p/3884595.html" target="_blank" rel="noopener">Python中的作用域及global用法</a><br><a href="https://www.cnblogs.com/z360519549/p/5172020.html" target="_blank" rel="noopener">python中global 和 nonlocal 的作用域</a><br>9.7. 补充<br>有时类似于 Pascal 中“记录（record）”或 C 中“结构（struct）”的数据类型很有用，它将一组已命名的数据项绑定在一起。一个空的类定义可以很好的实现它:</p>
<h2 id="10-10-性能度量"><a href="#10-10-性能度量" class="headerlink" title="10.10. 性能度量"></a>10.10. 性能度量</h2><p>有些用户对了解解决同一问题的不同方法之间的性能差异很感兴趣。Python 提供了一个度量工具，为这些问题提供了直接答案。</p>
<p>例如，使用元组封装和拆封来交换元素看起来要比使用传统的方法要诱人的多。<a href="https://docs.python.org/3/library/timeit.html#module-timeit" target="_blank" rel="noopener">timeit</a> 证明了后者更快一些:</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; from timeit import Timer</span><br><span class="line">&gt;&gt;&gt; Timer(&apos;t=a; a=b; b=t&apos;, &apos;a=1; b=2&apos;).timeit()</span><br><span class="line">0.57535828626024577</span><br><span class="line">&gt;&gt;&gt; Timer(&apos;a,b = b,a&apos;, &apos;a=1; b=2&apos;).timeit()</span><br><span class="line">0.54962537085770791&lt;/pre&gt;</span><br></pre></td></tr></table></figure>
<p>相对于 <a href="https://docs.python.org/3/library/timeit.html#module-timeit" target="_blank" rel="noopener">timeit</a> 的细粒度，<a href="https://docs.python.org/3/library/profile.html#module-profile" target="_blank" rel="noopener">profile</a> 和 <a href="https://docs.python.org/3/library/profile.html#module-pstats" target="_blank" rel="noopener">pstats</a> 模块提供了针对更大代码块的时间度量工具。</p>
<p>pip freeze 将会生成一个类似需要安装的包的列表，但是输出采用了 pip install 期望的格式。常见的做法就是把它们放在一个 requirements.txt 文件:</p>
<p>requirements.txt 能够被提交到版本控制中并且作为一个应用程序的一部分。用户们可以使用 install -r 安装所有必须的包:</p>
<h1 id="what’s-more"><a href="#what’s-more" class="headerlink" title="what’s more"></a>what’s more</h1><p><a href="http://www.pythondoc.com/pythontutorial3/classes.html" target="_blank" rel="noopener">http://www.pythondoc.com/pythontutorial3/classes.html</a></p>

        </div>
        
        
        
    </div>
</div>









<a id="more"></a>
<h1 id="1-计算部分"><a href="#1-计算部分" class="headerlink" title="1. 计算部分"></a>1. 计算部分</h1><h2 id="1-1-、-、"><a href="#1-1-、-、" class="headerlink" title="1.1.  / 、// 、 %"></a>1.1.  / 、// 、 %</h2><p><strong>除法(/)永远返回一个浮点数</strong>，如要使用 <a href="https://docs.python.org/3/glossary.html#term-floor-division" target="_blank" rel="noopener">floor 除法</a> 并且得到整数结果（丢掉任何小数部分），你可以使用 <code>//</code> 运算符；要计算余数你可以使用 <code>%</code>，</p>
<p>使用 ** 运算符计算幂乘方<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; 17 / 3  # classic division returns a float</span><br><span class="line">5.666666666666667</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">&gt;&gt;&gt; 17 // 3  # floor division discards the fractional part</span><br><span class="line">5</span><br><span class="line">&gt;&gt;&gt; 17 % 3  # the % operator returns the remainder of the division</span><br><span class="line">2</span><br><span class="line">&gt;&gt;&gt; 5 * 3 + 2  # result * divisor + remainder</span><br><span class="line">17</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; 5 ** 2  # 5 squared</span><br><span class="line">25</span><br><span class="line">&gt;&gt;&gt; 2 ** 7  # 2 to the power of 7</span><br><span class="line">128</span><br></pre></td></tr></table></figure>
<h2 id="1-2-交互模式中，最近一个表达式的值赋给变量"><a href="#1-2-交互模式中，最近一个表达式的值赋给变量" class="headerlink" title="1.2. 交互模式中，最近一个表达式的值赋给变量 _"></a>1.2. 交互模式中，最近一个表达式的值赋给变量 _</h2><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; tax = 12.5 / 100</span><br><span class="line">&gt;&gt;&gt; price = 100.50</span><br><span class="line">&gt;&gt;&gt; price * tax</span><br><span class="line">12.5625</span><br><span class="line">&gt;&gt;&gt; price + _          #这玩意有点秀</span><br><span class="line">113.0625</span><br><span class="line">&gt;&gt;&gt; round(_, 2)</span><br><span class="line">113.06</span><br></pre></td></tr></table></figure>
<h2 id="1-3-decimal——定点数和浮点数的数学运算"><a href="#1-3-decimal——定点数和浮点数的数学运算" class="headerlink" title="1.3. decimal——定点数和浮点数的数学运算"></a>1.3. decimal——定点数和浮点数的数学运算</h2><p>简单mark一下啊，是精确计算用的<br>Decimal类型是在浮点类型的基础上设计的,但是它在几个地方上要优于floating point:<br>1)Decimal类型可以非常精确地在计算机中存储,而学过c++的都知道,浮点型在计算机中是无法精确存储的,比如1.1和2.2在计算机中存储后,运算(1.1+2.2)表达式的值结果会是3.3000000000000003;Decimal类型则不会出现这种情况。同样,由于无法精确存储,浮点型也就无法精确计算(相对于Decimal类型),可以再测试(0.1+0.1+0.1-0.3)两种类型的计算结果。<br>2)Decimal类型会自动保留小数点后面不需要的0,以与输入的精度相匹配,比如下面小程序中的例子:浮点型的1.20+1.30结果是2.5;而Decimal类型结果是2.50,这样貌似比较人性化。<br>3)Decimal类型可以根据需要自己设置小数点后精度。通过getcontext().prec = x (x为你想要的精度来设置,getcontext()函数下面再详细介绍)。<br>4)Decimal类型有很强的管理功能,它能够根据需要设置,来控制输出的格式,得到或者忽略某类错误(如除0,可以设置忽略它,而得到一个Infinity的Decimal值)。 </p>
<h1 id="1-4-行尾’-‘-表示：下一行在逻辑上是本行的后续内容"><a href="#1-4-行尾’-‘-表示：下一行在逻辑上是本行的后续内容" class="headerlink" title="1.4. 行尾’\‘,表示：下一行在逻辑上是本行的后续内容"></a>1.4. 行尾’\‘,表示：下一行在逻辑上是本行的后续内容</h1><p>字符串文本能够分成多行。一种方法是使用三引号：<code>&quot;&quot;&quot;...&quot;&quot;&quot;</code>或者<code>&#39;&#39;&#39;...&#39;&#39;&#39;</code>。行尾换行符会被自动包含到字符串中，但是可以在行尾加上<code>\</code>来避免这个行为。下面的示例： 可以<strong>使用反斜杠为行结尾的连续字符串，它表示下一行在逻辑上是本行的后续内容</strong>:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">print(&quot;&quot;&quot;\</span><br><span class="line">Usage: thingy [OPTIONS]</span><br><span class="line">     -h                        Display this usage message</span><br><span class="line">     -H hostname               Hostname to connect to</span><br><span class="line">&quot;&quot;&quot;)</span><br><span class="line"># 将生成以下输出（注意，没有开始的第一行）:</span><br><span class="line">Usage: thingy [OPTIONS]</span><br><span class="line">     -h                        Display this usage message</span><br><span class="line">     -H hostname               Hostname to connect to</span><br></pre></td></tr></table></figure></p>
<h1 id="2-字符串，列表"><a href="#2-字符串，列表" class="headerlink" title="2. 字符串，列表"></a>2. 字符串，列表</h1><h2 id="2-1-s-i-s-i-永远等于s"><a href="#2-1-s-i-s-i-永远等于s" class="headerlink" title="2.1. s[:i] + s[i:] 永远等于s:"></a>2.1. <code>s[:i] + s[i:]</code> 永远等于<code>s</code>:</h2><p>注意，<strong>包含起始的字符，不包含末尾</strong>的字符。</p>
<h2 id="2-2-Python字符串不可以被更改-—-它们是-不可变的-。因此，赋值给字符串索引的位置会导致错误"><a href="#2-2-Python字符串不可以被更改-—-它们是-不可变的-。因此，赋值给字符串索引的位置会导致错误" class="headerlink" title="2.2. Python字符串不可以被更改 — 它们是 不可变的 。因此，赋值给字符串索引的位置会导致错误:"></a>2.2. Python字符串不可以被更改 — 它们是 <a href="https://docs.python.org/3/glossary.html#term-immutable" target="_blank" rel="noopener">不可变的</a> 。因此，赋值给字符串索引的位置会导致错误:</h2><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; word[0] = &apos;J&apos;</span><br><span class="line">  ...</span><br><span class="line">TypeError: &apos;str&apos; object does not support item assignment</span><br><span class="line">&gt;&gt;&gt; word[2:] = &apos;py&apos;</span><br><span class="line">  ...</span><br><span class="line">TypeError: &apos;str&apos; object does not support item assignment</span><br></pre></td></tr></table></figure>
<h2 id="2-3-可以对切片赋值，此操作可以改变列表的尺寸，或清空它"><a href="#2-3-可以对切片赋值，此操作可以改变列表的尺寸，或清空它" class="headerlink" title="2.3. 可以对切片赋值，此操作可以改变列表的尺寸，或清空它:"></a>2.3. 可以对切片赋值，此操作可以改变列表的尺寸，或清空它:</h2><p>切片操作返回列表一个新的（浅）拷贝副本<br><code>list[3] = value</code>,也可以看作是一个切片，所以会改变原列表<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; letters = [&apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;, &apos;e&apos;, &apos;f&apos;, &apos;g&apos;]</span><br><span class="line">&gt;&gt;&gt; letters</span><br><span class="line">[&apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;, &apos;e&apos;, &apos;f&apos;, &apos;g&apos;]</span><br><span class="line">&gt;&gt;&gt; # replace some values</span><br><span class="line">&gt;&gt;&gt; letters[2:5] = [&apos;C&apos;, &apos;D&apos;, &apos;E&apos;]</span><br><span class="line">&gt;&gt;&gt; letters</span><br><span class="line">[&apos;a&apos;, &apos;b&apos;, &apos;C&apos;, &apos;D&apos;, &apos;E&apos;, &apos;f&apos;, &apos;g&apos;]</span><br><span class="line">&gt;&gt;&gt; # now remove them</span><br><span class="line">&gt;&gt;&gt; letters[2:5] = []</span><br><span class="line">&gt;&gt;&gt; letters</span><br><span class="line">[&apos;a&apos;, &apos;b&apos;, &apos;f&apos;, &apos;g&apos;]</span><br><span class="line">&gt;&gt;&gt; # clear the list by replacing all the elements with an empty list</span><br><span class="line">&gt;&gt;&gt; letters[:] = []</span><br><span class="line">&gt;&gt;&gt; letters</span><br><span class="line">[]</span><br></pre></td></tr></table></figure></p>
<h2 id="2-4-创建list"><a href="#2-4-创建list" class="headerlink" title="2.4. 创建list"></a>2.4. 创建list</h2><p>啧啧，有点秀<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">list = [None] * n</span><br><span class="line">n为已知长度</span><br></pre></td></tr></table></figure></p>
<p> <a href="https://docs.python.org/3/reference/compound_stmts.html#for" target="_blank" rel="noopener">for</a> 语句就是这样一个迭代器。<a href="https://docs.python.org/3/library/stdtypes.html#list" target="_blank" rel="noopener">list()</a> 函数是另外一个（ <em>迭代器</em> ），它从可迭代（对象）中创建列表:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; list(range(5))</span><br><span class="line">[0, 1, 2, 3, 4]</span><br></pre></td></tr></table></figure></p>
<h1 id="3-控制语句"><a href="#3-控制语句" class="headerlink" title="3. 控制语句"></a>3. 控制语句</h1><h2 id="3-1-修改你迭代的序列（例如，复制选择项），你可以迭代它的复本-如for-w-in-word"><a href="#3-1-修改你迭代的序列（例如，复制选择项），你可以迭代它的复本-如for-w-in-word" class="headerlink" title="3.1. 修改你迭代的序列（例如，复制选择项），你可以迭代它的复本, 如for w in  word[:]:"></a>3.1. 修改你迭代的序列（例如，复制选择项），你可以迭代它的复本, 如<code>for w in  word[:]:</code></h2><p>在迭代过程中修改迭代序列不安全（只有在使用链表这样的可变序列时才会有这样的情况）。使用切割标识就可以很方便的做到这一点:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; for w in words[:]:  # Loop over a slice copy of the entire list.</span><br><span class="line">...     if len(w) &gt; 6:</span><br><span class="line">...         words.insert(0, w)</span><br><span class="line">...</span><br><span class="line">&gt;&gt;&gt; words</span><br><span class="line">[&apos;defenestrate&apos;, &apos;cat&apos;, &apos;window&apos;, &apos;defenestrate&apos;]</span><br></pre></td></tr></table></figure></p>
<h2 id="3-2-循环可以有一个-else-子句"><a href="#3-2-循环可以有一个-else-子句" class="headerlink" title="3.2. 循环可以有一个 else 子句"></a>3.2. 循环可以有一个 <code>else</code> 子句</h2><p>与循环一起使用时，<code>else</code> 子句与 <a href="https://docs.python.org/3/reference/compound_stmts.html#try" target="_blank" rel="noopener">try</a> 语句的 <code>else</code> 子句比与 <a href="https://docs.python.org/3/reference/compound_stmts.html#if" target="_blank" rel="noopener">if</a> 语句的具有更多的共同点：<strong><a href="https://docs.python.org/3/reference/compound_stmts.html#try" target="_blank" rel="noopener">try</a> 语句的 <code>else</code> 子句在未出现异常时运行，循环的 <code>else</code> 子句在未出现 <code>break</code> 时运行</strong>。更多关于 <a href="https://docs.python.org/3/reference/compound_stmts.html#try" target="_blank" rel="noopener">try</a> 语句和异常的内容，请参见 <a href="http://www.pythondoc.com/pythontutorial3/errors.html#tut-handling" target="_blank" rel="noopener">异常处理</a>。</p>
<p>循环可以有一个 <code>else</code> 子句；它在循环迭代完整个列表（对于 <a href="https://docs.python.org/3/reference/compound_stmts.html#for" target="_blank" rel="noopener">for</a> ）或执行条件为 false （对于 <a href="https://docs.python.org/3/reference/compound_stmts.html#while" target="_blank" rel="noopener">while</a>）时执行，但循环被 <a href="https://docs.python.org/3/reference/simple_stmts.html#break" target="_blank" rel="noopener">break</a> 中止的情况下不会执行。以下搜索素数的示例程序演示了这个子句:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; for n in range(2, 10):</span><br><span class="line">...     for x in range(2, n):</span><br><span class="line">...         if n % x == 0:</span><br><span class="line">...             print(n, &apos;equals&apos;, x, &apos;*&apos;, n//x)</span><br><span class="line">...             break</span><br><span class="line">...     else:</span><br><span class="line">...         # loop fell through without finding a factor</span><br><span class="line">...         print(n, &apos;is a prime number&apos;)</span><br><span class="line">...</span><br><span class="line">2 is a prime number</span><br><span class="line">3 is a prime number</span><br><span class="line">4 equals 2 * 2</span><br><span class="line">5 is a prime number</span><br><span class="line">6 equals 2 * 3</span><br><span class="line">7 is a prime number</span><br><span class="line">8 equals 2 * 4</span><br><span class="line">9 equals 3 * 3</span><br></pre></td></tr></table></figure></p>
<h1 id="4-函数"><a href="#4-函数" class="headerlink" title="4. 函数"></a>4. 函数</h1><h2 id="4-1-用一个逗号结尾就可以禁止输出换行"><a href="#4-1-用一个逗号结尾就可以禁止输出换行" class="headerlink" title="4.1. 用一个逗号结尾就可以禁止输出换行:"></a>4.1. 用一个逗号结尾就可以禁止输出换行:</h2><p>或者 <code>print(something, end=&#39;&#39;)</code><br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; a, b = 0, 1</span><br><span class="line">&gt;&gt;&gt; while b &lt; 1000:</span><br><span class="line">...     print(b, end=&apos;,&apos;)</span><br><span class="line">...     a, b = b, a+b</span><br><span class="line">...</span><br><span class="line">1,1,2,3,5,8,13,21,34,55,89,144,233,377,610,987,</span><br></pre></td></tr></table></figure></p>
<h2 id="4-2-函数的参数"><a href="#4-2-函数的参数" class="headerlink" title="4.2. 函数的参数"></a>4.2. 函数的参数</h2><h3 id="4-2-1-默认参数"><a href="#4-2-1-默认参数" class="headerlink" title="4.2.1. 默认参数"></a>4.2.1. 默认参数</h3><p>要求用户确认的函数例子：<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">def ask_ok(prompt, retries=4, complaint=&apos;Yes or no, please!&apos;):</span><br><span class="line">    while True:</span><br><span class="line">        ok = input(prompt)</span><br><span class="line">        if ok in (&apos;y&apos;, &apos;ye&apos;, &apos;yes&apos;):</span><br><span class="line">            return True</span><br><span class="line">        if ok in (&apos;n&apos;, &apos;no&apos;, &apos;nop&apos;, &apos;nope&apos;):</span><br><span class="line">            return False</span><br><span class="line">        retries = retries - 1</span><br><span class="line">        if retries &lt; 0:</span><br><span class="line">            raise OSError(&apos;uncooperative user&apos;)</span><br><span class="line">        print(complaint)</span><br></pre></td></tr></table></figure></p>
<p>默认值在函数 定义 作用域被解析<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">i = 5</span><br><span class="line"></span><br><span class="line">def f(arg=i):  # f函数在这一行定义，默认参数被解析</span><br><span class="line">    print(arg)</span><br><span class="line"></span><br><span class="line">i = 6</span><br><span class="line">f()</span><br></pre></td></tr></table></figure></p>
<p>将会输出 <code>5</code><br><strong>重要警告</strong>: 默认值只被赋值一次。<br>当默认值是<strong>可变对象</strong>时会有所不同，比如<strong>列表、字典或者大多数类的实例</strong>。<br>例如，下面的函数在后续调用过程中会<strong>累积（前面）传给它的参数</strong>:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">def f(a, L=[]):</span><br><span class="line">    L.append(a)</span><br><span class="line">    return L</span><br><span class="line"></span><br><span class="line">print(f(1))</span><br><span class="line">print(f(2))</span><br><span class="line">print(f(3))</span><br><span class="line"></span><br><span class="line"># 输出</span><br><span class="line">[1]</span><br><span class="line">[1, 2]</span><br><span class="line">[1, 2, 3]</span><br></pre></td></tr></table></figure></p>
<p>如果你不想让默认值在后续调用中累积，你可以像下面一样定义函数:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">def f(a, L=None):</span><br><span class="line">    if L is None:</span><br><span class="line">        L = []</span><br><span class="line">    L.append(a)</span><br><span class="line">    return L</span><br></pre></td></tr></table></figure></p>
<h3 id="4-2-2-可变参数列表"><a href="#4-2-2-可变参数列表" class="headerlink" title="4.2.2. 可变参数列表"></a>4.2.2. 可变参数列表</h3><p>本质：<strong>元组封装和序列拆封的一个结合</strong><br>让函数调用可变个数的参数。<strong>这些参数被包装进一个元组</strong>（参见 <a href="http://www.pythondoc.com/pythontutorial3/datastructures.html#tut-tuples" target="_blank" rel="noopener">元组和序列</a> ）。在这些可变个数的参数之前，可以有零到多个普通的参数。<br>这些<code>可变</code>参数是参数列表中的最后一个，因为它们将把所有的剩余输入参数传递给函数。任何出现在 <code>*args</code> 后的参数是关键字参数，这意味着，他们只能被用作关键字，而不是位置参数:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; def concat(*args, sep=&quot;/&quot;):</span><br><span class="line">...    return sep.join(args)</span><br><span class="line">...</span><br><span class="line">&gt;&gt;&gt; concat(&quot;earth&quot;, &quot;mars&quot;, &quot;venus&quot;)</span><br><span class="line">&apos;earth/mars/venus&apos;</span><br><span class="line">&gt;&gt;&gt; concat(&quot;earth&quot;, &quot;mars&quot;, &quot;venus&quot;, sep=&quot;.&quot;)  # sep只能是关键字参数！</span><br><span class="line">&apos;earth.mars.venus&apos;</span><br></pre></td></tr></table></figure></p>
<h3 id="4-2-3-关键字参数"><a href="#4-2-3-关键字参数" class="headerlink" title="4.2.3. 关键字参数"></a>4.2.3. 关键字参数</h3><p>引入一个形如 <code>**name</code> 的参数时，它接收一个<strong>字典</strong>（参见 <a href="https://docs.python.org/3/library/stdtypes.html#typesmapping" target="_blank" rel="noopener">Mapping Types — dict</a> ），该字典包含了所有未出现在形式参数列表中的关键字参数。<br>这里可能还会组合使用一个形如 <code>*name</code> （下一小节详细介绍） 的形式参数，它接收一个元组（下一节中会详细介绍），包含了所有没有出现在形式参数列表中的参数值（<strong><code>*name</code> 必须在 `</strong>name` 之前出现**）。<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">def cheeseshop(kind, *arguments, **keywords):</span><br><span class="line">    print(&quot;-- Do you have any&quot;, kind, &quot;?&quot;)</span><br><span class="line">    print(&quot;-- I&apos;m sorry, we&apos;re all out of&quot;, kind)</span><br><span class="line">    for arg in arguments:</span><br><span class="line">        print(arg)</span><br><span class="line">    print(&quot;-&quot; * 40)</span><br><span class="line">    keys = sorted(keywords.keys())  # 对关键字排序</span><br><span class="line">    for kw in keys:</span><br><span class="line">        print(kw, &quot;:&quot;, keywords[kw])</span><br></pre></td></tr></table></figure></p>
<h3 id="4-2-4-参数列表的分拆——-拆开参数列表-分拆字典为关键字参数"><a href="#4-2-4-参数列表的分拆——-拆开参数列表-分拆字典为关键字参数" class="headerlink" title="4.2.4. 参数列表的分拆—— * 拆开参数列表, ** 分拆字典为关键字参数"></a>4.2.4. 参数列表的分拆—— <code>*</code> 拆开参数列表, ** 分拆字典为关键字参数</h3><p>当你要传递的参数已经是一个列表，但要调用的函数却接受分开一个个的参数值。这时候你要把已有的列表拆开来。例如内建函数 <a href="https://docs.python.org/3/library/stdtypes.html#range" target="_blank" rel="noopener">range()</a> 需要要独立的 <em>start</em>，<em>stop</em> 参数。你可以在调用函数时加一个 <code>*</code> 操作符来自动把参数列表拆开:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; list(range(3, 6))            # normal call with separate arguments</span><br><span class="line">[3, 4, 5]</span><br><span class="line">&gt;&gt;&gt; args = [3, 6]</span><br><span class="line">&gt;&gt;&gt; list(range(*args))            # call with arguments unpacked from a list</span><br><span class="line">[3, 4, 5]</span><br></pre></td></tr></table></figure></p>
<p>以同样的方式，可以使用 ** 操作符分拆关键字参数为字典:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; def parrot(voltage, state=&apos;a stiff&apos;, action=&apos;voom&apos;):</span><br><span class="line">...     print(&quot;-- This parrot wouldn&apos;t&quot;, action, end=&apos; &apos;)</span><br><span class="line">...     print(&quot;if you put&quot;, voltage, &quot;volts through it.&quot;, end=&apos; &apos;)</span><br><span class="line">...     print(&quot;E&apos;s&quot;, state, &quot;!&quot;)</span><br><span class="line">...</span><br><span class="line">&gt;&gt;&gt; d = &#123;&quot;voltage&quot;: &quot;four million&quot;, &quot;state&quot;: &quot;bleedin&apos; demised&quot;, &quot;action&quot;: &quot;VOOM&quot;&#125;</span><br><span class="line">&gt;&gt;&gt; parrot(**d)</span><br><span class="line">-- This parrot wouldn&apos;t VOOM if you put four million volts through it. E&apos;s bleedin&apos; demised !</span><br></pre></td></tr></table></figure></p>
<h2 id="4-3-Lambda-形式"><a href="#4-3-Lambda-形式" class="headerlink" title="4.3.  Lambda 形式"></a>4.3.  Lambda 形式</h2><p>使用 lambda 表达式返回一个函数，类似于嵌套函数定义，lambda 形式可以从外部作用域引用变量:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; def make_incrementor(n):</span><br><span class="line">...     return lambda x: x + n</span><br><span class="line">...</span><br><span class="line">&gt;&gt;&gt; f = make_incrementor(42)</span><br><span class="line">&gt;&gt;&gt; f(0)</span><br><span class="line">42</span><br><span class="line">&gt;&gt;&gt; f(1)   </span><br><span class="line">43</span><br></pre></td></tr></table></figure></p>
<p>或将一个小函数作为参数传递:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; pairs = [(1, &apos;one&apos;), (2, &apos;two&apos;), (3, &apos;three&apos;), (4, &apos;four&apos;)]</span><br><span class="line">&gt;&gt;&gt; pairs.sort(key=lambda pair: pair[1])  </span><br><span class="line">&gt;&gt;&gt; pairs</span><br><span class="line">[(4, &apos;four&apos;), (1, &apos;one&apos;), (3, &apos;three&apos;), (2, &apos;two&apos;)]</span><br></pre></td></tr></table></figure></p>
<h2 id="4-4-函数的文档字符串"><a href="#4-4-函数的文档字符串" class="headerlink" title="4.4. 函数的文档字符串"></a>4.4. 函数的文档字符串</h2><p><strong>第一行应该是关于对象用途的简介</strong>。简短起见，不用明确的陈述对象名或类型，因为它们可以从别的途径了解到（除非这个名字碰巧就是描述这个函数操作的动词）。<strong>这一行应该以大写字母开头，以句号结尾</strong>。</p>
<p>如果文档字符串有多行，<strong>第二行应该空出来</strong>，与接下来的详细描述明确分隔。接下来的文档应该有一或多段描述对象的调用约定、边界效应等。</p>
<p>Python 的解释器不会从多行的文档字符串中去除缩进，所以必要的时候<strong>应当自己清除缩进</strong>。这符合通常的习惯。第一行之后的第一个非空行决定了整个文档的缩进格式。（我们不用第一行是因为它通常紧靠着起始的引号，缩进格式显示的不清楚。）留白“相当于”是字符串的起始缩进。<strong>每一行都不应该有缩进</strong>，如果有缩进的话，所有的留白都应该清除掉。留白的长度应当等于扩展制表符的宽度（通常是8个空格）。</p>
<p>以下是一个多行文档字符串的示例:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; def my_function():</span><br><span class="line">...     &quot;&quot;&quot;Do nothing, but document it.</span><br><span class="line">...</span><br><span class="line">...     No, really, it doesn&apos;t do anything.</span><br><span class="line">...     &quot;&quot;&quot;</span><br><span class="line">...     pass</span><br><span class="line">...</span><br><span class="line">&gt;&gt;&gt; print(my_function.__doc__)</span><br><span class="line">Do nothing, but document it.</span><br><span class="line"></span><br><span class="line">    No, really, it doesn&apos;t do anything.</span><br></pre></td></tr></table></figure></p>
<h2 id="4-5-编码风格"><a href="#4-5-编码风格" class="headerlink" title="4.5. 编码风格"></a>4.5. 编码风格</h2><p>对于 Python，<a href="http://www.python.org/dev/peps/pep-0008" target="_blank" rel="noopener">PEP 8</a> 引入了大多数项目遵循的风格指导。它给出了一个高度可读，视觉友好的编码风格。每个 Python 开发者都应该读一下，大多数要点都会对你有帮助：</p>
<ul>
<li><p><strong>使用 4 空格缩进，而非 TAB</strong></p>
<p>在小缩进（可以嵌套更深）和大缩进（更易读）之间，4空格是一个很好的折中。TAB 引发了一些混乱，最好弃用</p>
</li>
<li><p>折行以确保其不会超过 79 个字符<br>这有助于小显示器用户阅读，也可以让大显示器能并排显示几个代码文件</p>
</li>
<li>使用空行分隔函数和类，以及函数中的大块代码</li>
<li><strong>可能的话，注释独占一行</strong></li>
<li>使用文档字符串</li>
<li>把空格放到操作符两边，以及逗号后面，但是括号里侧不加空格：<code>a = f(1, 2) + g(3, 4)</code></li>
<li>统一函数和类命名<br>推荐类名用 <code>驼峰命名</code>， 函数和方法名用 <code>小写_和_下划线</code>。总是用 <code>self</code> 作为方法的第一个参数（关于类和方法的知识详见 <a href="http://www.pythondoc.com/pythontutorial3/classes.html#tut-firstclasses" target="_blank" rel="noopener">初识类</a> ）</li>
<li>不要使用花哨的编码，如果你的代码的目的是要在国际化环境。Python 的默认情况下，UTF-8，甚至普通的 ASCII 总是工作的最好</li>
<li>同样，也不要使用非 ASCII 字符的标识符，除非是不同语种的会阅读或者维护代码。<h1 id="5-数据结构"><a href="#5-数据结构" class="headerlink" title="5. 数据结构"></a>5. 数据结构</h1><h2 id="5-1-列表level-up"><a href="#5-1-列表level-up" class="headerlink" title="5.1. 列表level up"></a>5.1. 列表level up</h2></li>
<li>list.append(x)：<br>把一个元素添加到列表的结尾</li>
<li>list.extend(L)：<br>将一个给定列表中的所有元素都添加到另一个列表中</li>
<li>list.insert(i, x)：<br>在指定位置插入一个元素</li>
<li>list.remove(x)：<br>  删除列表中值为 x 的第一个元素。如果没有这样的元素，就会返回一个错误。</li>
<li>list.pop([i])：<br>  如果没有指定索引，a.pop() 返回最后一个元素</li>
<li>list.clear()：<br> 从列表中删除所有元素</li>
<li>list.index(x)：<br>返回列表中第一个值为 x 的元素的索引。如果没有匹配的元素就会返回一个错误。</li>
<li>list.count(x)：<br>返回 x 在列表中出现的次数。</li>
<li>list.sort()：<br>对列表中的元素就地进行排序。</li>
<li>list.reverse()：<br>就地倒排</li>
<li>list.copy()：<br>返回列表的一个浅拷贝。等同于 a[:]。<h3 id="5-1-1-把列表当作堆栈使用"><a href="#5-1-1-把列表当作堆栈使用" class="headerlink" title="5.1.1. 把列表当作堆栈使用"></a>5.1.1. 把列表当作堆栈使用</h3>堆栈作为特定的数据结构，最先进入的元素最后一个被释放（后进先出）。用 <code>append()</code> 方法可以把一个元素添加到堆栈顶。用不指定索引的 <code>pop()</code>方法可以把一个元素从堆栈顶释放出来。例如:<h3 id="5-1-2-把列表当作队列使用"><a href="#5-1-2-把列表当作队列使用" class="headerlink" title="5.1.2. 把列表当作队列使用"></a>5.1.2. 把列表当作队列使用</h3>队列作为特定的数据结构，最先进入的元素最先释放（先进先出）。不过，列表这样用效率不高。<br>要实现队列，使用 <a href="https://docs.python.org/3/library/collections.html#collections.deque" target="_blank" rel="noopener">collections.deque</a>，它为在首尾两端快速插入和删除而设计。例如:<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; from collections import deque</span><br><span class="line">&gt;&gt;&gt; queue = deque([&quot;Eric&quot;, &quot;John&quot;, &quot;Michael&quot;])</span><br><span class="line">&gt;&gt;&gt; queue.append(&quot;Terry&quot;)           # Terry arrives</span><br><span class="line">&gt;&gt;&gt; queue.append(&quot;Graham&quot;)          # Graham arrives</span><br><span class="line">&gt;&gt;&gt; queue.popleft()                 # The first to arrive now leaves</span><br><span class="line">&apos;Eric&apos;</span><br><span class="line">&gt;&gt;&gt; queue.popleft()                 # The second to arrive now leaves</span><br><span class="line">&apos;John&apos;</span><br><span class="line">&gt;&gt;&gt; queue                           # Remaining queue in order of arrival</span><br><span class="line">deque([&apos;Michael&apos;, &apos;Terry&apos;, &apos;Graham&apos;])</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="5-2-del-语句"><a href="#5-2-del-语句" class="headerlink" title="5.2. del 语句"></a>5.2. <a href="https://docs.python.org/3/reference/simple_stmts.html#del" target="_blank" rel="noopener">del</a> 语句</h2><p>从列表中按给定的索引而不是值来删除一个子项<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; a = [-1, 1, 66.25, 333, 333, 1234.5]</span><br><span class="line">&gt;&gt;&gt; del a[0]</span><br><span class="line">&gt;&gt;&gt; a</span><br><span class="line">[1, 66.25, 333, 333, 1234.5]</span><br><span class="line">&gt;&gt;&gt; del a[2:4]</span><br><span class="line">&gt;&gt;&gt; a</span><br><span class="line">[1, 66.25, 1234.5]</span><br><span class="line">&gt;&gt;&gt; del a[:]</span><br><span class="line">&gt;&gt;&gt; a</span><br><span class="line">[]</span><br><span class="line">&gt;&gt;&gt; del a  # 也可以删除整个变量</span><br></pre></td></tr></table></figure></p>
<h2 id="5-3-元组"><a href="#5-3-元组" class="headerlink" title="5.3. 元组"></a>5.3. 元组</h2><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; t = 12345, 54321, &apos;hello!&apos;</span><br><span class="line">&gt;&gt;&gt; t[0]</span><br><span class="line">12345</span><br><span class="line">&gt;&gt;&gt; t</span><br><span class="line">(12345, 54321, &apos;hello!&apos;)</span><br><span class="line">&gt;&gt;&gt; # Tuples may be nested:</span><br><span class="line">... u = t, (1, 2, 3, 4, 5) # 封装成元组</span><br><span class="line">&gt;&gt;&gt; u</span><br><span class="line">((12345, 54321, &apos;hello!&apos;), (1, 2, 3, 4, 5))</span><br></pre></td></tr></table></figure>
<p>一对空的括号可以创建空元组<br>创建一个单元素元组可以在值后面<strong>跟一个逗号</strong>（在括号中放入一个单值不够明确）<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; empty = ()</span><br><span class="line">&gt;&gt;&gt; singleton = &apos;hello&apos;,    # &lt;-- note trailing comma</span><br><span class="line">&gt;&gt;&gt; singleton</span><br><span class="line">(&apos;hello&apos;,)</span><br></pre></td></tr></table></figure></p>
<p>元组拆分：<code>x, y, z = t</code></p>
<h2 id="5-4-集合"><a href="#5-4-集合" class="headerlink" title="5.4. 集合"></a>5.4. 集合</h2><p>集合是一个无序不重复元素的集。基本功能包括关系测试和消除重复元素。集合对象还支持 union（联合），intersection（交），difference（差）和 sysmmetric difference（对称差集）等数学运算。<br>注意：<strong>想要创建空集合，你必须使用 set()</strong> 而不是 {}。后者用于创建空字典。<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; basket = &#123;&apos;apple&apos;, &apos;orange&apos;, &apos;apple&apos;, &apos;pear&apos;, &apos;orange&apos;, &apos;banana&apos;&#125;</span><br><span class="line">&gt;&gt;&gt; print(basket)                      # show that duplicates have been removed</span><br><span class="line">&#123;&apos;orange&apos;, &apos;banana&apos;, &apos;pear&apos;, &apos;apple&apos;&#125;</span><br><span class="line">&gt;&gt;&gt; &apos;orange&apos; in basket                 # fast membership testing</span><br><span class="line">True</span><br><span class="line">&gt;&gt;&gt; &apos;crabgrass&apos; in basket</span><br><span class="line">False</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; # Demonstrate set operations on unique letters from two words</span><br><span class="line">...</span><br><span class="line">&gt;&gt;&gt; a = set(&apos;abracadabra&apos;)</span><br><span class="line">&gt;&gt;&gt; b = set(&apos;alacazam&apos;)</span><br><span class="line">&gt;&gt;&gt; a                                  # unique letters in a</span><br><span class="line">&#123;&apos;a&apos;, &apos;r&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;&#125;</span><br><span class="line">&gt;&gt;&gt; a - b                              # letters in a but not in b</span><br><span class="line">&#123;&apos;r&apos;, &apos;d&apos;, &apos;b&apos;&#125;</span><br><span class="line">&gt;&gt;&gt; a | b                              # letters in either a or b</span><br><span class="line">&#123;&apos;a&apos;, &apos;c&apos;, &apos;r&apos;, &apos;d&apos;, &apos;b&apos;, &apos;m&apos;, &apos;z&apos;, &apos;l&apos;&#125;</span><br><span class="line">&gt;&gt;&gt; a &amp; b                              # letters in both a and b</span><br><span class="line">&#123;&apos;a&apos;, &apos;c&apos;&#125;</span><br><span class="line">&gt;&gt;&gt; a ^ b                              # letters in a or b but not both</span><br><span class="line">&#123;&apos;r&apos;, &apos;d&apos;, &apos;b&apos;, &apos;m&apos;, &apos;z&apos;, &apos;l&apos;&#125;</span><br></pre></td></tr></table></figure></p>
<p>类似 <a href="http://www.pythondoc.com/pythontutorial3/datastructures.html#tut-listcomps" target="_blank" rel="noopener">列表推导式</a>，这里有一种集合推导式语法:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; a = &#123;x for x in &apos;abracadabra&apos; if x not in &apos;abc&apos;&#125;</span><br><span class="line">&gt;&gt;&gt; a</span><br><span class="line">&#123;&apos;r&apos;, &apos;d&apos;&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="5-5-字典"><a href="#5-5-字典" class="headerlink" title="5.5. 字典"></a>5.5. 字典</h2><p>无序的键： 值对 （key:value 对）集合，键必须是互不相同的（在同一个字典之内）。一对大括号创建一个空的字典： {} 。初始化列表时，在大括号内放置一组逗号分隔的键：值对，这也是字典输出的方式。<br>对一个字典执行 <code>list(d.keys())</code> 将返回一个字典中所有关键字组成的无序列表（如果你想要排序，只需使用 <code>sorted(d.keys()) ）</code>。使用 <a href="https://docs.python.org/3/reference/expressions.html#in" target="_blank" rel="noopener">in</a> 关键字可以检查字典中是否存在某个关键字（指字典）。</p>
<ul>
<li><p>直接从 key-value 对中创建字典:</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; dict([(&apos;sape&apos;, 4139), (&apos;guido&apos;, 4127), (&apos;jack&apos;, 4098)])</span><br><span class="line">&#123;&apos;sape&apos;: 4139, &apos;jack&apos;: 4098, &apos;guido&apos;: 4127&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>字典推导式可以从任意的键值表达式中创建字典:</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; &#123;x: x**2 for x in (2, 4, 6)&#125;</span><br><span class="line">&#123;2: 4, 4: 16, 6: 36&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>通过关键字参数指定 key-value 对:</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; dict(sape=4139, guido=4127, jack=4098)</span><br><span class="line">&#123;&apos;sape&apos;: 4139, &apos;jack&apos;: 4098, &apos;guido&apos;: 4127&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="5-6-循环技巧"><a href="#5-6-循环技巧" class="headerlink" title="5.6. 循环技巧"></a>5.6. 循环技巧</h2><ul>
<li><p>在字典中循环时，关键字和对应的值可以使用<code>items()</code> 方法同时解读出来:</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; knights = &#123;&apos;gallahad&apos;: &apos;the pure&apos;, &apos;robin&apos;: &apos;the brave&apos;&#125;</span><br><span class="line">&gt;&gt;&gt; for k, v in knights.items():</span><br><span class="line">...     print(k, v)</span><br></pre></td></tr></table></figure>
</li>
<li><p>同时循环两个或更多的序列，可以使用 <a href="https://docs.python.org/3/library/functions.html#zip" target="_blank" rel="noopener">zip()</a> 整体打包:</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; questions = [&apos;name&apos;, &apos;quest&apos;, &apos;favorite color&apos;]</span><br><span class="line">&gt;&gt;&gt; answers = [&apos;lancelot&apos;, &apos;the holy grail&apos;, &apos;blue&apos;]</span><br><span class="line">&gt;&gt;&gt; for q, a in zip(questions, answers):</span><br><span class="line">...     print(&apos;What is your &#123;0&#125;?  It is &#123;1&#125;.&apos;.format(q, a))</span><br></pre></td></tr></table></figure>
</li>
<li><p>逆向循环序列的话，先正向定位序列，然后调用 <a href="https://docs.python.org/3/library/functions.html#reversed" target="_blank" rel="noopener">reversed()</a> 函数:</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; for i in reversed(range(1, 10, 2)):</span><br><span class="line">...     print(i)</span><br></pre></td></tr></table></figure>
</li>
<li><p>要按排序后的顺序循环序列的话，使用 <a href="https://docs.python.org/3/library/functions.html#sorted" target="_blank" rel="noopener">sorted()</a> 函数</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; basket = [&apos;apple&apos;, &apos;orange&apos;, &apos;apple&apos;, &apos;pear&apos;, &apos;orange&apos;, &apos;banana&apos;]</span><br><span class="line">&gt;&gt;&gt; for f in sorted(set(basket)):</span><br><span class="line">...     print(f)</span><br></pre></td></tr></table></figure>
</li>
<li><p>要在循环内部修改正在遍历的序列（例如复制某些元素），建议您首先制作副本,使用<strong>切片表示法</strong></p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; words = [&apos;cat&apos;, &apos;window&apos;, &apos;defenestrate&apos;]</span><br><span class="line">&gt;&gt;&gt; for w in words[:]:  # Loop over a slice copy of the entire list.</span><br><span class="line">...     if len(w) &gt; 6:</span><br><span class="line">...         words.insert(0, w)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="5-7-深入条件控制"><a href="#5-7-深入条件控制" class="headerlink" title="5.7. 深入条件控制"></a>5.7. 深入条件控制</h2><ul>
<li>比较操作符 <code>in</code> 和 <code>not in</code> 审核值是否在一个区间之内。操作符 <code>is</code> 和<code>is not</code> 比较两个对象是否相同</li>
<li>比较操作可以传递。例如<code>a &lt; b == c</code> 审核是否 <code>a</code> 小于<code>b</code> 并且<code>b</code> 等于<code>c</code></li>
<li>比较操作可以通过逻辑操作符 <code>and</code> 和 <code>or</code>组合，比较的结果可以用 <code>not</code>来取反义。这些操作符的优先级又低于比较操作符，在它们之中，<strong><code>not</code> 具有最高的优先级，<code>or</code>优先级最低</strong>，所以 A and not B or C 等于 (A and (notB)) or C<h2 id="5-8-比较序列和其它类型"><a href="#5-8-比较序列和其它类型" class="headerlink" title="5.8 比较序列和其它类型"></a>5.8 比较序列和其它类型</h2><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(1, 2, 3)              &lt; (1, 2, 4)</span><br><span class="line">[1, 2, 3]              &lt; [1, 2, 4]</span><br><span class="line">&apos;ABC&apos; &lt; &apos;C&apos; &lt; &apos;Pascal&apos; &lt; &apos;Python&apos;  # 字符串的字典序按照单字符的 ASCII 顺序</span><br><span class="line">(1, 2, 3, 4)           &lt; (1, 2, 4)</span><br><span class="line">(1, 2)                 &lt; (1, 2, -1)  # 如果一个序列是另一个序列的初始子序列，较短的一个序列就小于另一个</span><br><span class="line">(1, 2, 3)             == (1.0, 2.0, 3.0)  # 混合数值类型是通过它们的数值进行比较的，所以 0 是等于 0.0</span><br><span class="line">(1, 2, (&apos;aa&apos;, &apos;ab&apos;))   &lt; (1, 2, (&apos;abc&apos;, &apos;a&apos;), 4)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="6-模块"><a href="#6-模块" class="headerlink" title="6. 模块"></a>6. 模块</h1><h2 id="6-1-模块载入"><a href="#6-1-模块载入" class="headerlink" title="6.1. 模块载入"></a>6.1. 模块载入</h2><p>出于性能考虑，每个模块在每个解释器会话中只导入一遍。因此，如果你修改了你的模块，需要重启解释器；或者，如果你就是想交互式的测试这么一个模块，可以用 <a href="https://docs.python.org/3/library/imp.html#imp.reload" target="_blank" rel="noopener">imp.reload()</a> 重新加载，例如 <code>import imp; imp.reload(modulename)</code>。</p>
<h2 id="6-2-模块的搜索路径"><a href="#6-2-模块的搜索路径" class="headerlink" title="6.2. 模块的搜索路径"></a>6.2. 模块的搜索路径</h2><p>导入一个叫 <code>spam</code> 的模块时，解释器先在当前目录中搜索名为 <code>spam.py</code> 的文件。如果没有找到的话，接着会到 <a href="https://docs.python.org/3/library/sys.html#sys.path" target="_blank" rel="noopener">sys.path</a> 变量中给出的目录列表中查找。 <a href="https://docs.python.org/3/library/sys.html#sys.path" target="_blank" rel="noopener">sys.path</a> 变量的初始值来自如下：</p>
<ul>
<li>输入脚本的目录（当前目录）。</li>
<li>环境变量 <a href="https://docs.python.org/3/using/cmdline.html#envvar-PYTHONPATH" target="_blank" rel="noopener">PYTHONPATH</a> 表示的目录列表中搜索<br>(这和 shell 变量 <code>PATH</code> 具有一样的语法，即一系列目录名的列表)。</li>
<li>Python 默认安装路径中搜索。</li>
<li><em>在支持符号连接的文件系统中，输入的脚本所在的目录是符号连接指向的目录。 换句话说也就是包含符号链接的目录不会被加到目录搜索路径中</em>。</li>
</ul>
<p>变量 <code>sys.path</code> 是解释器模块搜索路径的字符串列表。它由环境变量 <a href="https://docs.python.org/3/using/cmdline.html#envvar-PYTHONPATH" target="_blank" rel="noopener">PYTHONPATH</a> 初始化，如果没有设定 <a href="https://docs.python.org/3/using/cmdline.html#envvar-PYTHONPATH" target="_blank" rel="noopener">PYTHONPATH</a> ，就由内置的默认值初始化。你可以用标准的字符串操作修改它:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; import sys</span><br><span class="line">&gt;&gt;&gt; sys.path.append(&apos;/ufs/guido/lib/python&apos;)</span><br></pre></td></tr></table></figure></p>
<h2 id="6-3-dir-函数"><a href="#6-3-dir-函数" class="headerlink" title="6.3. dir() 函数"></a>6.3. <a href="https://docs.python.org/3/library/functions.html#dir" target="_blank" rel="noopener">dir()</a> 函数</h2><p>内置函数 <a href="https://docs.python.org/3/library/functions.html#dir" target="_blank" rel="noopener">dir()</a> 用于按模块名搜索模块定义，它返回一个字符串类型的存储列表:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; import fibo, sys</span><br><span class="line">&gt;&gt;&gt; dir(fibo)</span><br><span class="line">[&apos;__name__&apos;, &apos;fib&apos;, &apos;fib2&apos;]</span><br></pre></td></tr></table></figure></p>
<p>无参数调用时，<a href="https://docs.python.org/3/library/functions.html#dir" target="_blank" rel="noopener">dir()</a> 函数返回当前定义的命名:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; a = [1, 2, 3, 4, 5]</span><br><span class="line">&gt;&gt;&gt; import fibo</span><br><span class="line">&gt;&gt;&gt; fib = fibo.fib</span><br><span class="line">&gt;&gt;&gt; dir()</span><br><span class="line">[&apos;__builtins__&apos;, &apos;__doc__&apos;, &apos;__file__&apos;, &apos;__name__&apos;, &apos;a&apos;, &apos;fib&apos;, &apos;fibo&apos;, &apos;sys&apos;]</span><br></pre></td></tr></table></figure></p>
<p>该列表列出了所有类型的名称：变量，模块，函数，等等。<br><a href="https://docs.python.org/3/library/functions.html#dir" target="_blank" rel="noopener">dir()</a> 不会列出内置函数和变量名。如果你想列出这些内容，它们在标准模块 <a href="https://docs.python.org/3/library/builtins.html#module-builtins" target="_blank" rel="noopener">builtins</a> 中定义:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; import builtins</span><br><span class="line">&gt;&gt;&gt; dir(builtins)</span><br></pre></td></tr></table></figure></p>
<h2 id="6-4-包"><a href="#6-4-包" class="headerlink" title="6.4. 包"></a>6.4. 包</h2><p>一个声音处理的模块集，目录结构如下：<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">sound/                          Top-level package</span><br><span class="line">      __init__.py               Initialize the sound package</span><br><span class="line">      formats/                  Subpackage for file format conversions</span><br><span class="line">              __init__.py</span><br><span class="line">              wavread.py</span><br><span class="line">              wavwrite.py</span><br><span class="line">              aiffread.py</span><br><span class="line">              aiffwrite.py</span><br><span class="line">              auread.py</span><br><span class="line">              auwrite.py</span><br><span class="line">              ...</span><br><span class="line">      effects/                  Subpackage for sound effects</span><br><span class="line">              __init__.py</span><br><span class="line">              echo.py</span><br><span class="line">              surround.py</span><br><span class="line">              reverse.py</span><br><span class="line">              ...</span><br><span class="line">      filters/                  Subpackage for filters</span><br><span class="line">              __init__.py</span><br><span class="line">              equalizer.py</span><br><span class="line">              vocoder.py</span><br><span class="line">              karaoke.py</span><br><span class="line">              ...</span><br></pre></td></tr></table></figure></p>
<p>当导入这个包时，Python 通过 <code>sys.path</code> 搜索路径查找包含这个包的子目录。<br>为了让 Python 将目录当做内容包，目录中必须包含 <code>__init__.py</code> 文件。最简单的情况下，只需要一个空的 <code>__init__.py</code> 文件即可。当然它也可以执行包的初始化代码，或者定义稍后介绍的 <code>__all__</code> 变量。</p>
<h3 id="6-4-1-导入包的几种方式："><a href="#6-4-1-导入包的几种方式：" class="headerlink" title="6.4.1. 导入包的几种方式："></a>6.4.1. 导入包的几种方式：</h3><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 加载 echo 子模块</span><br><span class="line">echo.echofilter(input, output, delay=0.7, atten=4)</span><br><span class="line"># 直接导入函数或变量</span><br><span class="line">from sound.effects.echo import echofilter</span><br></pre></td></tr></table></figure>
<h3 id="6-4-2-从-导入包"><a href="#6-4-2-从-导入包" class="headerlink" title="6.4.2. 从 * 导入包"></a>6.4.2. 从 * 导入包</h3><p>提供一个明确的包索引。<a href="https://docs.python.org/3/reference/simple_stmts.html#import" target="_blank" rel="noopener">import</a> 语句按如下条件进行转换：执行 <code>from package import *</code> 时，如果包中的 <code>__init__.py</code> 代码定义了一个名为 <code>__all__</code> 的列表，就会按照列表中给出的模块名进行导入。新版本的包发布时作者可以任意更新这个列表。如果包作者不想 import <em> 的时候导入他们的包中所有模块，那么也可能会决定不支持它（ import </em> ）。例如， <code>sound/effects/__init__.py</code> 这个文件可能包括如下代码:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">__all__ = [&quot;echo&quot;, &quot;surround&quot;, &quot;reverse&quot;]</span><br></pre></td></tr></table></figure></p>
<p>这意味着<code>from sound.effects import</code> 语句会从 <code>sound</code> 包中导入以上三个已命名的子模块。</p>
<h3 id="6-4-3-包内引用"><a href="#6-4-3-包内引用" class="headerlink" title="6.4.3. 包内引用"></a>6.4.3. 包内引用</h3><p>可以用这样的形式<code>from module import name</code> 来写显式的相对位置导入。那些显式相对导入用点号标明关联导入当前和上级包。以 <code>surround</code> 模块为例，你可以这样用:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">from . import echo</span><br><span class="line">from .. import formats</span><br><span class="line">from ..filters import equalizer</span><br></pre></td></tr></table></figure></p>
<p>需要注意的是显式或隐式相对位置导入都<strong>基于当前模块的命名</strong>。因为主模块的名字总是<code>&quot;__main__&quot;</code>，Python 应用程序的主模块应该总是用绝对导入。</p>
<h1 id="7-输入和输出"><a href="#7-输入和输出" class="headerlink" title="7. 输入和输出"></a>7. 输入和输出</h1><h2 id="7-1-格式化输出"><a href="#7-1-格式化输出" class="headerlink" title="7.1. 格式化输出"></a>7.1. 格式化输出</h2><p>这里有两种大相径庭地输出值方法：<em>表达式语句</em> 和 <a href="https://docs.python.org/3/library/functions.html#print" target="_blank" rel="noopener">print()</a> 函数（第三种访求是使用文件对象的 <code>write()</code> 方法，标准文件输出可以参考 <code>sys.stdout</code>，详细内容参见库参考手册）。<br> <a href="https://docs.python.org/3/library/stdtypes.html#str.format" target="_blank" rel="noopener">str.format()</a> 方法提供了丰富的格式控制。<br>如何将值转化为字符串？Python 有办法将任意值转为字符串：将它传入 <a href="https://docs.python.org/3/library/functions.html#repr" target="_blank" rel="noopener">repr()</a> 或 <a href="https://docs.python.org/3/library/stdtypes.html#str" target="_blank" rel="noopener">str()</a> 函数。<br>函数 <a href="https://docs.python.org/3/library/stdtypes.html#str" target="_blank" rel="noopener">str()</a> 用于将值转化为适于人阅读的形式，而 <a href="https://docs.python.org/3/library/functions.html#repr" target="_blank" rel="noopener">repr()</a> 转化为供解释器读取的形式（如果没有等价的语法，则会发生 <a href="https://docs.python.org/3/library/exceptions.html#SyntaxError" target="_blank" rel="noopener">SyntaxError</a> 异常）某对象没有适于人阅读的解释形式的话，<a href="https://docs.python.org/3/library/stdtypes.html#str" target="_blank" rel="noopener">str()</a> 会返回与 <a href="https://docs.python.org/3/library/functions.html#repr" target="_blank" rel="noopener">repr()</a>等同的值。</p>
<h3 id="7-2-str的一些方法"><a href="#7-2-str的一些方法" class="headerlink" title="7.2. str的一些方法"></a>7.2. str的一些方法</h3><ul>
<li><a href="https://docs.python.org/3/library/stdtypes.html#str.rjust" target="_blank" rel="noopener">str.rjust()</a> 方法，它把字符串输出到一列，并通过向左侧填充空格来使其右对齐。类似的方法还有 <a href="https://docs.python.org/3/library/stdtypes.html#str.ljust" target="_blank" rel="noopener">str.ljust()</a> 和 <a href="https://docs.python.org/3/library/stdtypes.html#str.center" target="_blank" rel="noopener">str.center()</a>。这些函数只是输出新的字符串，并不改变什么。如果输出的字符串太长，它们也不会截断它，而是原样输出。如果你确实需要截断它，可以使用切割操作，例如：<code>x.ljust(n)[:n]</code>。</li>
<li><p><a href="https://docs.python.org/3/library/stdtypes.html#str.zfill" target="_blank" rel="noopener">str.zfill()</a> 它用于向数值的字符串表达左侧填充 0。该函数可以正确理解正负号:</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; &apos;12&apos;.zfill(5)</span><br><span class="line">&apos;00012&apos;</span><br><span class="line">&gt;&gt;&gt; &apos;-3.14&apos;.zfill(7)</span><br><span class="line">&apos;-003.14&apos;</span><br><span class="line">&gt;&gt;&gt; &apos;3.14159265359&apos;.zfill(5)</span><br><span class="line">&apos;3.14159265359&apos;</span><br></pre></td></tr></table></figure>
</li>
<li><p><a href="https://docs.python.org/3/library/stdtypes.html#str.format" target="_blank" rel="noopener">str.format()</a> 的基本用法如下:</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; print(&apos;We are the &#123;&#125; who say &quot;&#123;&#125;!&quot;&apos;.format(&apos;knights&apos;, &apos;Ni&apos;))</span><br><span class="line">We are the knights who say &quot;Ni!&quot;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>大括号和其中的字符会被替换成传入 <a href="https://docs.python.org/3/library/stdtypes.html#str.format" target="_blank" rel="noopener">str.format()</a> 的参数。大括号中的数值指明使用传入 <a href="https://docs.python.org/3/library/stdtypes.html#str.format" target="_blank" rel="noopener">str.format()</a>方法的对象中的哪一个:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; print(&apos;&#123;0&#125; and &#123;1&#125;&apos;.format(&apos;spam&apos;, &apos;eggs&apos;))</span><br><span class="line">spam and eggs</span><br><span class="line">&gt;&gt;&gt; print(&apos;&#123;1&#125; and &#123;0&#125;&apos;.format(&apos;spam&apos;, &apos;eggs&apos;))</span><br><span class="line">eggs and spam</span><br></pre></td></tr></table></figure></p>
<p>如果在 <a href="https://docs.python.org/3/library/stdtypes.html#str.format" target="_blank" rel="noopener">str.format()</a> 调用时使用关键字参数，可以通过参数名来引用值:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; print(&apos;This &#123;food&#125; is &#123;adjective&#125;.&apos;.format(</span><br><span class="line">...       food=&apos;spam&apos;, adjective=&apos;absolutely horrible&apos;))</span><br><span class="line">This spam is absolutely horrible.</span><br></pre></td></tr></table></figure></p>
<p>位置参数和关键字参数可以随意组合:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; print(&apos;The story of &#123;0&#125;, &#123;1&#125;, and &#123;other&#125;.&apos;.format(&apos;Bill&apos;, &apos;Manfred&apos;,</span><br><span class="line">                                                       other=&apos;Georg&apos;))</span><br><span class="line">The story of Bill, Manfred, and Georg.</span><br></pre></td></tr></table></figure></p>
<p><code>&#39;!a&#39;</code> (应用 <a href="https://docs.python.org/3/library/functions.html#ascii" target="_blank" rel="noopener">ascii()</a>)，<code>&#39;!s&#39;</code> （应用 <a href="https://docs.python.org/3/library/stdtypes.html#str" target="_blank" rel="noopener">str()</a> ）和 <code>&#39;!r&#39;</code> （应用 <a href="https://docs.python.org/3/library/functions.html#repr" target="_blank" rel="noopener">repr()</a> ）可以<strong>在格式化之前转换值</strong>:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; import math</span><br><span class="line">&gt;&gt;&gt; print(&apos;The value of PI is approximately &#123;&#125;.&apos;.format(math.pi))</span><br><span class="line">The value of PI is approximately 3.14159265359.</span><br><span class="line">&gt;&gt;&gt; print(&apos;The value of PI is approximately &#123;!r&#125;.&apos;.format(math.pi))</span><br><span class="line">The value of PI is approximately 3.141592653589793.</span><br></pre></td></tr></table></figure></p>
<p>字段名后允许可选的<code>&#39;:&#39;</code> 和格式指令。下例将 Pi 转为三位精度。<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; import math</span><br><span class="line">&gt;&gt;&gt; print(&apos;The value of PI is approximately &#123;0:.3f&#125;.&apos;.format(math.pi))</span><br><span class="line">The value of PI is approximately 3.142.</span><br></pre></td></tr></table></figure></p>
<p>在字段后的 ‘:’ 后面加一个整数会限定该字段的最小宽度，这在美化表格时很有用:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; table = &#123;&apos;Sjoerd&apos;: 4127, &apos;Jack&apos;: 4098, &apos;Dcab&apos;: 7678&#125;</span><br><span class="line">&gt;&gt;&gt; for name, phone in table.items():</span><br><span class="line">...     print(&apos;&#123;0:10&#125; ==&gt; &#123;1:10d&#125;&apos;.format(name, phone))</span><br><span class="line">...</span><br><span class="line">Jack       ==&gt;       4098</span><br><span class="line">Dcab       ==&gt;       7678</span><br><span class="line">Sjoerd     ==&gt;       4127</span><br></pre></td></tr></table></figure></p>
<p>可以用命名来引用被格式化的变量而不是位置。传入一个字典，用中括号( <code>&#39;[]&#39;</code>)访问它的键:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; table = &#123;&apos;Sjoerd&apos;: 4127, &apos;Jack&apos;: 4098, &apos;Dcab&apos;: 8637678&#125;</span><br><span class="line">&gt;&gt;&gt; print(&apos;Jack: &#123;0[Jack]:d&#125;; Sjoerd: &#123;0[Sjoerd]:d&#125;; &apos;</span><br><span class="line">          &apos;Dcab: &#123;0[Dcab]:d&#125;&apos;.format(table))</span><br><span class="line">Jack: 4098; Sjoerd: 4127; Dcab: 8637678</span><br></pre></td></tr></table></figure></p>
<p>也可以用 ‘**’ 标志将这个字典以关键字参数的方式传入:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; table = &#123;&apos;Sjoerd&apos;: 4127, &apos;Jack&apos;: 4098, &apos;Dcab&apos;: 8637678&#125;</span><br><span class="line">&gt;&gt;&gt; print(&apos;Jack: &#123;Jack:d&#125;; Sjoerd: &#123;Sjoerd:d&#125;; Dcab: &#123;Dcab:d&#125;&apos;.format(**table))</span><br><span class="line">Jack: 4098; Sjoerd: 4127; Dcab: 8637678</span><br></pre></td></tr></table></figure></p>
<p>这种方式与新的内置函数 <a href="https://docs.python.org/3/library/functions.html#vars" target="_blank" rel="noopener">vars()</a> 组合使用非常有效。该函数返回包含所有局部变量的字典。</p>
<p>要进一步了解字符串格式化方法 <a href="https://docs.python.org/3/library/stdtypes.html#str.format" target="_blank" rel="noopener">str.format()</a>，参见 <a href="https://docs.python.org/3/library/string.html#formatstrings" target="_blank" rel="noopener">格式字符串语法</a>。</p>
<h2 id="7-2-文件读写"><a href="#7-2-文件读写" class="headerlink" title="7.2. 文件读写"></a>7.2. 文件读写</h2><p>函数 <a href="https://docs.python.org/3/library/functions.html#open" target="_blank" rel="noopener">open()</a> 返回 <a href="https://docs.python.org/3/glossary.html#term-file-object" target="_blank" rel="noopener">文件对象</a>，通常的用法需要两个参数：<code>open(filename, mode)</code>。<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; f = open(&apos;workfile&apos;, &apos;w&apos;)</span><br></pre></td></tr></table></figure></p>
<p>第一个参数是一个含有文件名的字符串。第二个参数也是一个字符串，含有描述如何使用该文件的几个字符。mode 为 ‘r’ 时表示只是读取文件；’w’ 表示只是写入文件（已经存在的同名文件将被删掉）；’a’ 表示打开文件进行追加，写入到文件中的任何数据将自动添加到末尾。 ‘r+’ 表示打开文件进行读取和写入。mode 参数是可选的，默认为 ‘r’。</p>
<p>通常，文件以 文本 打开，这意味着，你从文件读出和向文件写入的字符串会被特定的编码方式（默认是UTF-8）编码。模式后面的 ‘b’ 以 二进制模式 打开文件：数据会以字节对象的形式读出和写入。这种模式应该用于所有不包含文本的文件。</p>
<p>在文本模式下，读取时默认会将平台有关的行结束符（Unix上是 \n , Windows上是 \r\n）转换为 \n。在文本模式下写入时，默认会将出现的 \n 转换成平台有关的行结束符。这种暗地里的修改对 ASCII 文本文件没有问题，但会损坏 JPEG 或 EXE 这样的二进制文件中的数据。使用二进制模式读写此类文件时要特别小心。</p>
<h2 id="7-2-1-文件对象方法"><a href="#7-2-1-文件对象方法" class="headerlink" title="7.2.1. 文件对象方法"></a>7.2.1. 文件对象方法</h2><p>要读取文件内容，需要调用<code>f.read(size)</code>，该方法读取若干数量的数据并以字符串形式返回其内容，<em>size</em> 是可选的数值，指定字符串长度。<br>如果没有指定 <em>size</em> 或者指定为负数，就会读取并返回整个文件。当文件大小为当前机器内存两倍时，就会产生问题。反之，会尽可能按比较大的 * 读取和返回数据。如果到了文件末尾，<code>f.read()</code> 会返回一个空字符串<code>（&#39;&#39;）</code>:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; f.read()</span><br><span class="line">&apos;This is the entire file.\n&apos;</span><br><span class="line">&gt;&gt;&gt; f.read()</span><br><span class="line">&apos;&apos;</span><br></pre></td></tr></table></figure></p>
<p><code>f.readline()</code>从文件中读取单独一行，字符串结尾会自动加上一个换行符（<code>\n</code> ），只有当文件最后一行没有以换行符结尾时，这一操作才会被忽略。</p>
<ul>
<li>如果<code>f.readline()</code> 返回一个空字符串，那就表示到达了文件末尾</li>
<li>如果是一个空行，就会描述为 <code>&#39;\n&#39;</code>，一个只包含换行符的字符串:<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; f.readline()</span><br><span class="line">&apos;This is the first line of the file.\n&apos;</span><br><span class="line">&gt;&gt;&gt; f.readline()</span><br><span class="line">&apos;Second line of the file\n&apos;</span><br><span class="line">&gt;&gt;&gt; f.readline()</span><br><span class="line">&apos;&apos;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>把文件中的所有行读到一个列表中，可以使用 <code>list(f)</code> 或者<code>f.readlines()</code>。</p>
<p><code>f.write(string)</code> 方法将 <em>string</em> 的内容写入文件，并返回写入字符的长度:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; f.write(&apos;This is a test\n&apos;)</span><br><span class="line">15</span><br></pre></td></tr></table></figure></p>
<p>想要写入其他非字符串内容，首先要将它转换为字符串。</p>
<p>当你使用完一个文件时，调用 f.close() 方法就可以关闭它并释放其占用的所有系统资源。 在调用 f.close() 方法后，试图再次使用文件对象将会自动失败。<br>用关键字 <a href="https://docs.python.org/3/reference/compound_stmts.html#with" target="_blank" rel="noopener">with</a> 处理文件对象是个好习惯。它的先进之处在于文件用完后会自动关闭，就算发生异常也没关系。它是 <a href="https://docs.python.org/3/reference/compound_stmts.html#try" target="_blank" rel="noopener">try</a>-<a href="https://docs.python.org/3/reference/compound_stmts.html#finally" target="_blank" rel="noopener">finally</a> 块的简写:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; with open(&apos;workfile&apos;, &apos;r&apos;) as f:</span><br><span class="line">...     read_data = f.read()</span><br><span class="line">&gt;&gt;&gt; f.closed</span><br><span class="line">True</span><br></pre></td></tr></table></figure></p>
<h3 id="7-2-2-使用-json-存储结构化数据"><a href="#7-2-2-使用-json-存储结构化数据" class="headerlink" title="7.2.2. 使用 json 存储结构化数据"></a>7.2.2. 使用 <a href="https://docs.python.org/3/library/json.html#module-json" target="_blank" rel="noopener">json</a> 存储结构化数据</h3><p>Python 允许你使用常用的数据交换格式 <a href="http://json.org/" target="_blank" rel="noopener">JSON（JavaScript Object Notation）</a>。标准模块 <a href="https://docs.python.org/3/library/json.html#module-json" target="_blank" rel="noopener">json</a> 可以接受 Python 数据结构，并将它们转换为字符串表示形式；此过程称为 <strong>序列化</strong>。从字符串表示形式重新构建数据结构称为 <strong>反序列化</strong>。序列化和反序列化的过程中，表示该对象的字符串可以存储在文件或数据中，也可以通过网络连接传送给远程的机器。<br>如果你有一个对象 x，你可以用简单的一行代码查看其 JSON 字符串表示形式:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; json.dumps([1, &apos;simple&apos;, &apos;list&apos;])</span><br><span class="line">&apos;[1, &quot;simple&quot;, &quot;list&quot;]&apos;</span><br></pre></td></tr></table></figure></p>
<p><a href="https://docs.python.org/3/library/json.html#json.dumps" target="_blank" rel="noopener">dumps()</a> 函数的另外一个变体 <a href="https://docs.python.org/3/library/json.html#json.dump" target="_blank" rel="noopener">dump()</a>，直接将对象序列化到一个文件。所以如果 <code>f</code> 是为写入而打开的一个 <a href="https://docs.python.org/3/glossary.html#term-file-object" target="_blank" rel="noopener">文件对象</a>，我们可以这样做:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">json.dump(x, f)</span><br></pre></td></tr></table></figure></p>
<p>为了重新解码对象，如果 <code>f</code> 是为读取而打开的 <a href="https://docs.python.org/3/glossary.html#term-file-object" target="_blank" rel="noopener">文件对象</a>:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x = json.load(f)</span><br></pre></td></tr></table></figure></p>
<p>这种简单的序列化技术可以处理列表和字典，但序列化任意类实例为 JSON 需要一点额外的努力。 <a href="https://docs.python.org/3/library/json.html#module-json" target="_blank" rel="noopener">json</a> 模块的手册对此有详细的解释。</p>
<h3 id="7-2-3-pickle-pickle-模块"><a href="#7-2-3-pickle-pickle-模块" class="headerlink" title="7.2.3. pickle - pickle 模块"></a>7.2.3. <a href="https://docs.python.org/3/library/pickle.html#module-pickle" target="_blank" rel="noopener">pickle</a> - pickle 模块</h3><p>与 <a href="http://www.pythondoc.com/pythontutorial3/inputoutput.html#tut-json" target="_blank" rel="noopener">JSON</a> 不同，<em>pickle</em> 是一个协议，它允许任意复杂的 Python 对象的序列化。因此，它只能用于 Python 而不能用来与其他语言编写的应用程序进行通信。默认情况下它也是不安全的：如果数据由熟练的攻击者精心设计， 反序列化来自一个不受信任源的 pickle 数据可以执行任意代码。</p>
<h1 id="8-错误和异常"><a href="#8-错误和异常" class="headerlink" title="8. 错误和异常"></a>8. 错误和异常</h1><p>Python 中（至少）有两种错误：语法错误和异常（ <em>syntax errors</em> 和 <em>exceptions</em> ）。</p>
<h2 id="8-1-语法错误"><a href="#8-1-语法错误" class="headerlink" title="8.1. 语法错误"></a>8.1. 语法错误</h2><p>语法错误，也被称作解析错误。<br>这是最常见的错误，往往是由于缺少冒号或者括号等引起。<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; while True print(&apos;Hello world&apos;)</span><br><span class="line">  File &quot;&lt;stdin&gt;&quot;, line 1, in ?</span><br><span class="line">    while True print(&apos;Hello world&apos;)</span><br><span class="line">                   ^</span><br><span class="line">SyntaxError: invalid syntax</span><br></pre></td></tr></table></figure></p>
<p>语法分析器指出错误行，并且在检测到错误的位置前面显示一个小“箭头”。 错误是由箭头 <em>前面</em> 的标记引起的（或者至少是这么检测的）： 这个例子中，函数 <a href="https://docs.python.org/3/library/functions.html#print" target="_blank" rel="noopener">print()</a> 被发现存在错误，因为它前面少了一个冒号（ <code>&#39;:&#39;</code> ）。 错误会输出文件名和行号。</p>
<h2 id="8-2-异常"><a href="#8-2-异常" class="headerlink" title="8.2. 异常"></a>8.2. 异常</h2><p>即使一条语句或表达式在语法上是正确的，当试图执行它时也可能会引发错误。运行期检测到的错误称为 <em>异常</em>，并且程序不会无条件的崩溃：<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; 10 * (1/0)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;&lt;stdin&gt;&quot;, line 1, in ?</span><br><span class="line">ZeroDivisionError: int division or modulo by zero</span><br><span class="line">&gt;&gt;&gt; 4 + spam*3</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;&lt;stdin&gt;&quot;, line 1, in ?</span><br><span class="line">NameError: name &apos;spam&apos; is not defined</span><br><span class="line">&gt;&gt;&gt; &apos;2&apos; + 2</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;&lt;stdin&gt;&quot;, line 1, in ?</span><br><span class="line">TypeError: Can&apos;t convert &apos;int&apos; object to str implicitly</span><br></pre></td></tr></table></figure></p>
<p>错误信息的最后一行指出发生了什么错误。异常也有不同的类型，异常类型做为错误信息的一部分显示出来：示例中的异常分别为 零除错误（ <a href="https://docs.python.org/3/library/exceptions.html#ZeroDivisionError" target="_blank" rel="noopener">ZeroDivisionError</a> ） ，命名错误（ <a href="https://docs.python.org/3/library/exceptions.html#NameError" target="_blank" rel="noopener">NameError</a>） 和 类型错误（ <a href="https://docs.python.org/3/library/exceptions.html#TypeError" target="_blank" rel="noopener">TypeError</a> ）。打印错误信息时，异常的类型作为异常的内置名显示。对于所有的内置异常都是如此，不过用户自定义异常就不一定了（尽管这是一个很有用的约定）。标准异常名是内置的标识（没有保留关键字）。</p>
<p>这一行后一部分是关于该异常类型的详细说明，这意味着它的内容依赖于异常类型。</p>
<p>错误信息的前半部分以堆栈的形式列出异常发生的位置。通常在堆栈中列出了源代码行，然而，来自标准输入的源码不会显示出来。</p>
<p><a href="https://docs.python.org/3/library/exceptions.html#bltin-exceptions" target="_blank" rel="noopener">内置的异常</a> 列出了内置异常和它们的含义。</p>
<h2 id="8-3-异常处理"><a href="#8-3-异常处理" class="headerlink" title="8.3. 异常处理"></a>8.3. 异常处理</h2><p>通过编程处理选择的异常是可行的。看一下下面的例子：它会一直要求用户输入，直到输入一个合法的整数为止，但允许用户中断这个程序（使用 <code>Control-C</code> 或系统支持的任何方法）。注意：用户产生的中断会引发一个 <a href="https://docs.python.org/3/library/exceptions.html#KeyboardInterrupt" target="_blank" rel="noopener">KeyboardInterrupt</a> 异常。<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; while True:</span><br><span class="line">...     try:</span><br><span class="line">...         x = int(input(&quot;Please enter a number: &quot;))</span><br><span class="line">...         break</span><br><span class="line">...     except ValueError:</span><br><span class="line">...         print(&quot;Oops!  That was no valid number.  Try again...&quot;)</span><br><span class="line">...</span><br></pre></td></tr></table></figure></p>
<h3 id="8-3-1-try-except-else-语句"><a href="#8-3-1-try-except-else-语句" class="headerlink" title="8.3.1 try - except - else 语句"></a>8.3.1 try - except - else 语句</h3><p><a href="https://docs.python.org/3/reference/compound_stmts.html#try" target="_blank" rel="noopener">try</a> 语句按如下方式工作。</p>
<ul>
<li><p>首先，执行 <em>try</em> 子句 （在 <a href="https://docs.python.org/3/reference/compound_stmts.html#try" target="_blank" rel="noopener">try</a> 和 <a href="https://docs.python.org/3/reference/compound_stmts.html#except" target="_blank" rel="noopener">except</a> 关键字之间的部分）。</p>
</li>
<li><p>如果没有异常发生， <em>except</em> 子句 在 <a href="https://docs.python.org/3/reference/compound_stmts.html#try" target="_blank" rel="noopener">try</a> 语句执行完毕后就被忽略了。</p>
</li>
<li><p>如果在 try 子句执行过程中发生了异常，那么该子句其余的部分就会被忽略。<br>如果异常匹配于 <a href="https://docs.python.org/3/reference/compound_stmts.html#except" target="_blank" rel="noopener">except</a> 关键字后面指定的异常类型，就执行对应的except子句。然后继续执行 <a href="https://docs.python.org/3/reference/compound_stmts.html#try" target="_blank" rel="noopener">try</a> 语句之后的代码。</p>
</li>
<li><p>如果发生了一个异常，在 <a href="https://docs.python.org/3/reference/compound_stmts.html#except" target="_blank" rel="noopener">except</a> 子句中没有与之匹配的分支，它就会传递到上一级 <a href="https://docs.python.org/3/reference/compound_stmts.html#try" target="_blank" rel="noopener">try</a> 语句中。<br>如果最终仍找不到对应的处理语句，它就成为一个 <em>未处理异常</em>，终止程序运行，显示提示信息。</p>
</li>
</ul>
<p>一个 <a href="https://docs.python.org/3/reference/compound_stmts.html#try" target="_blank" rel="noopener">try</a> 语句可能包含多个 except 子句，分别指定处理不同的异常。至多只会有一个分支被执行。异常处理程序只会处理对应的 try 子句中发生的异常，在同一个 <a href="https://docs.python.org/3/reference/compound_stmts.html#try" target="_blank" rel="noopener">try</a> 语句中，其他子句中发生的异常则不作处理。一个 except 子句可以在括号中列出多个异常的名字，例如:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">... except (RuntimeError, TypeError, NameError):</span><br><span class="line">...     pass</span><br></pre></td></tr></table></figure></p>
<p>最后一个 except 子句可以省略异常名称，以作为通配符使用。你需要慎用此法，因为它会轻易隐藏一个实际的程序错误！可以使用这种方法打印一条错误信息，然后重新抛出异常（允许调用者处理这个异常):<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">import sys</span><br><span class="line"></span><br><span class="line">try:</span><br><span class="line">    f = open(&apos;myfile.txt&apos;)</span><br><span class="line">    s = f.readline()</span><br><span class="line">    i = int(s.strip())</span><br><span class="line">except OSError as err:</span><br><span class="line">    print(&quot;OS error: &#123;0&#125;&quot;.format(err))</span><br><span class="line">except ValueError:</span><br><span class="line">    print(&quot;Could not convert data to an integer.&quot;)</span><br><span class="line">except:</span><br><span class="line">    print(&quot;Unexpected error:&quot;, sys.exc_info()[0])</span><br><span class="line">    raise</span><br></pre></td></tr></table></figure></p>
<p><a href="https://docs.python.org/3/reference/compound_stmts.html#try" target="_blank" rel="noopener">try</a> … <a href="https://docs.python.org/3/reference/compound_stmts.html#except" target="_blank" rel="noopener">except</a> 语句可以带有一个 <em>else子句</em>，该子句只能出现在所有 except 子句之后。当 try 语句没有抛出异常时，需要执行一些代码，可以使用这个子句。例如:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">for arg in sys.argv[1:]:</span><br><span class="line">    try:</span><br><span class="line">        f = open(arg, &apos;r&apos;)</span><br><span class="line">    except IOError:</span><br><span class="line">        print(&apos;cannot open&apos;, arg)</span><br><span class="line">    else:</span><br><span class="line">        print(arg, &apos;has&apos;, len(f.readlines()), &apos;lines&apos;)</span><br><span class="line">        f.close()</span><br></pre></td></tr></table></figure></p>
<p>使用 <a href="https://docs.python.org/3/reference/compound_stmts.html#else" target="_blank" rel="noopener">else</a> 子句比在 <a href="https://docs.python.org/3/reference/compound_stmts.html#try" target="_blank" rel="noopener">try</a> 子句中附加代码要好，因为这样可以避免 <a href="https://docs.python.org/3/reference/compound_stmts.html#try" target="_blank" rel="noopener">try</a> … <a href="https://docs.python.org/3/reference/compound_stmts.html#except" target="_blank" rel="noopener">except</a> 意外的截获本来不属于它们保护的那些代码抛出的异常。</p>
<h3 id="8-3-2-异常的参数"><a href="#8-3-2-异常的参数" class="headerlink" title="8.3.2 异常的参数"></a>8.3.2 异常的<em>参数</em></h3><p>发生异常时，可能会有一个附属值，作为异常的 <em>参数</em> 存在。这个参数是否存在、是什么类型，依赖于异常的类型。</p>
<p>在异常名（列表）之后，也可以为 except 子句指定一个变量。这个变量绑定于一个异常实例，它存储在 <code>instance.args</code> 的参数中。<br>为了方便起见，异常实例定义了 <a href="https://docs.python.org/3/reference/datamodel.html#object.__str__" target="_blank" rel="noopener"><strong>str </strong>()</a> ，这样就可以直接访问过打印参数而不必引用 <code>.args</code>。这种做法不受鼓励。相反，更好的做法是给异常传递一个参数（如果要传递多个参数，可以传递一个元组），把它绑定到 message 属性。一旦异常发生，它会在抛出前绑定所有指定的属性。<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; try:</span><br><span class="line">...    raise Exception(&apos;spam&apos;, &apos;eggs&apos;)</span><br><span class="line">... except Exception as inst:</span><br><span class="line">...    print(type(inst))    # the exception instance</span><br><span class="line">...    print(inst.args)     # arguments stored in .args</span><br><span class="line">...    print(inst)          # __str__ allows args to be printed directly,</span><br><span class="line">...                         # but may be overridden in exception subclasses</span><br><span class="line">...    x, y = inst.args     # unpack args</span><br><span class="line">...    print(&apos;x =&apos;, x)</span><br><span class="line">...    print(&apos;y =&apos;, y)</span><br><span class="line">...</span><br><span class="line">&lt;class &apos;Exception&apos;&gt;</span><br><span class="line">(&apos;spam&apos;, &apos;eggs&apos;)</span><br><span class="line">(&apos;spam&apos;, &apos;eggs&apos;)</span><br><span class="line">x = spam</span><br><span class="line">y = eggs</span><br></pre></td></tr></table></figure></p>
<p>对于那些未处理的异常，如果一个它们带有参数，那么就会被作为异常信息的最后部分（“详情”）打印出来。</p>
<p>异常处理器不仅仅处理那些在 try 子句中立刻发生的异常，也会处理那些 try 子句中调用的函数内部发生的异常。</p>
<h2 id="8-4-抛出异常"><a href="#8-4-抛出异常" class="headerlink" title="8.4. 抛出异常"></a>8.4. 抛出异常</h2><p><a href="https://docs.python.org/3/reference/simple_stmts.html#raise" target="_blank" rel="noopener">raise</a> 语句允许程序员强制抛出一个指定的异常。例如:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; raise NameError(&apos;HiThere&apos;)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;&lt;stdin&gt;&quot;, line 1, in ?</span><br><span class="line">NameError: HiThere</span><br></pre></td></tr></table></figure></p>
<p>要抛出的异常由 <a href="https://docs.python.org/3/reference/simple_stmts.html#raise" target="_blank" rel="noopener">raise</a> 的唯一参数标识。它必需是一个异常实例或异常类（继承自 <a href="https://docs.python.org/3/library/exceptions.html#Exception" target="_blank" rel="noopener">Exception</a> 的类）。</p>
<p>如果你需要明确一个异常是否抛出，但不想处理它，<a href="https://docs.python.org/3/reference/simple_stmts.html#raise" target="_blank" rel="noopener">raise</a> 语句可以让你很简单的重新抛出该异常:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; try:</span><br><span class="line">...     raise NameError(&apos;HiThere&apos;)</span><br><span class="line">... except NameError:</span><br><span class="line">...     print(&apos;An exception flew by!&apos;)</span><br><span class="line">...     raise</span><br><span class="line">...</span><br><span class="line">An exception flew by!</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;&lt;stdin&gt;&quot;, line 2, in ?</span><br><span class="line">NameError: HiThere</span><br></pre></td></tr></table></figure></p>
<h2 id="8-5-用户自定义异常"><a href="#8-5-用户自定义异常" class="headerlink" title="8.5. 用户自定义异常"></a>8.5. 用户自定义异常</h2><p>在程序中可以通过创建新的异常类型来命名自己的异常。异常类通常应该直接或间接的从 <a href="https://docs.python.org/3/library/exceptions.html#Exception" target="_blank" rel="noopener">Exception</a> 类派生，例如:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; class MyError(Exception):</span><br><span class="line">...     def __init__(self, value):</span><br><span class="line">...         self.value = value</span><br><span class="line">...     def __str__(self):</span><br><span class="line">...         return repr(self.value)</span><br><span class="line">...</span><br><span class="line">&gt;&gt;&gt; try:</span><br><span class="line">...     raise MyError(2*2)</span><br><span class="line">... except MyError as e:</span><br><span class="line">...     print(&apos;My exception occurred, value:&apos;, e.value)</span><br><span class="line">...</span><br><span class="line">My exception occurred, value: 4</span><br><span class="line">&gt;&gt;&gt; raise MyError(&apos;oops!&apos;)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;&lt;stdin&gt;&quot;, line 1, in ?</span><br><span class="line">__main__.MyError: &apos;oops!&apos;</span><br></pre></td></tr></table></figure></p>
<p>在这个例子中，<a href="https://docs.python.org/3/library/exceptions.html#Exception" target="_blank" rel="noopener">Exception</a> 默认的 <a href="https://docs.python.org/3/reference/datamodel.html#object.__init__" target="_blank" rel="noopener"><strong>init</strong>()</a> 被覆盖。新的方式简单的创建 <em>value</em> 属性。这就替换了原来创建 <em>args</em> 属性的方式。</p>
<p>异常类中可以定义任何其它类中可以定义的东西，但是通常为了保持简单，只在其中加入几个属性信息，以供异常处理句柄提取。如果一个新创建的模块中需要抛出几种不同的错误时，一个通常的作法是为该模块定义一个<strong>异常基类</strong>，然后针对不同的错误类型派生出对应的<strong>异常子类</strong>:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">class Error(Exception):</span><br><span class="line">    &quot;&quot;&quot;Base class for exceptions in this module.&quot;&quot;&quot;</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line">class InputError(Error):</span><br><span class="line">    &quot;&quot;&quot;Exception raised for errors in the input.</span><br><span class="line"></span><br><span class="line">    Attributes:</span><br><span class="line">        expression -- input expression in which the error occurred</span><br><span class="line">        message -- explanation of the error</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">    def __init__(self, expression, message):</span><br><span class="line">        self.expression = expression</span><br><span class="line">        self.message = message</span><br><span class="line"></span><br><span class="line">class TransitionError(Error):</span><br><span class="line">    &quot;&quot;&quot;Raised when an operation attempts a state transition that&apos;s not</span><br><span class="line">    allowed.</span><br><span class="line"></span><br><span class="line">    Attributes:</span><br><span class="line">        previous -- state at beginning of transition</span><br><span class="line">        next -- attempted new state</span><br><span class="line">        message -- explanation of why the specific transition is not allowed</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">    def __init__(self, previous, next, message):</span><br><span class="line">        self.previous = previous</span><br><span class="line">        self.next = next</span><br><span class="line">        self.message = message</span><br></pre></td></tr></table></figure></p>
<h2 id="8-6-定义清理行为"><a href="#8-6-定义清理行为" class="headerlink" title="8.6. 定义清理行为"></a>8.6. 定义清理行为</h2><p><a href="https://docs.python.org/3/reference/compound_stmts.html#try" target="_blank" rel="noopener">try</a> 语句还有另一个可选的子句，目的在于定义在任何情况下都一定要执行的功能。例如:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; def divide(x, y):</span><br><span class="line">...     try:</span><br><span class="line">...         result = x / y</span><br><span class="line">...     except ZeroDivisionError:</span><br><span class="line">...         print(&quot;division by zero!&quot;)</span><br><span class="line">...     else:</span><br><span class="line">...         print(&quot;result is&quot;, result)</span><br><span class="line">...     finally:</span><br><span class="line">...         print(&quot;executing finally clause&quot;)</span><br><span class="line">...</span><br><span class="line">&gt;&gt;&gt; divide(2, 1)</span><br><span class="line">result is 2</span><br><span class="line">executing finally clause</span><br><span class="line">&gt;&gt;&gt; divide(2, 0)</span><br><span class="line">division by zero!</span><br><span class="line">executing finally clause</span><br><span class="line">&gt;&gt;&gt; divide(&quot;2&quot;, &quot;1&quot;)</span><br><span class="line">executing finally clause</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;&lt;stdin&gt;&quot;, line 1, in ?</span><br><span class="line">  File &quot;&lt;stdin&gt;&quot;, line 3, in divide</span><br><span class="line">TypeError: unsupported operand type(s) for /: &apos;str&apos; and &apos;str&apos;</span><br></pre></td></tr></table></figure></p>
<p>不管有没有发生异常，<em>finally子句</em> 在程序离开 <a href="https://docs.python.org/3/reference/compound_stmts.html#try" target="_blank" rel="noopener">try</a> 后都一定会被执行。当 <a href="https://docs.python.org/3/reference/compound_stmts.html#try" target="_blank" rel="noopener">try</a> 语句中发生了未被 <a href="https://docs.python.org/3/reference/compound_stmts.html#except" target="_blank" rel="noopener">except</a> 捕获的异常（或者它发生在 <a href="https://docs.python.org/3/reference/compound_stmts.html#except" target="_blank" rel="noopener">except</a> 或 <a href="https://docs.python.org/3/reference/compound_stmts.html#else" target="_blank" rel="noopener">else</a> 子句中），在 <a href="https://docs.python.org/3/reference/compound_stmts.html#finally" target="_blank" rel="noopener">finally</a> 子句执行完后它会被重新抛出。 <a href="https://docs.python.org/3/reference/compound_stmts.html#try" target="_blank" rel="noopener">try</a> 语句经由 <a href="https://docs.python.org/3/reference/simple_stmts.html#break" target="_blank" rel="noopener">break</a> ，<a href="https://docs.python.org/3/reference/simple_stmts.html#continue" target="_blank" rel="noopener">continue</a> 或 <a href="https://docs.python.org/3/reference/simple_stmts.html#return" target="_blank" rel="noopener">return</a> 语句退 出也一样会执行 <a href="https://docs.python.org/3/reference/compound_stmts.html#finally" target="_blank" rel="noopener">finally</a> 子句。</p>
<p><a href="https://docs.python.org/3/reference/compound_stmts.html#finally" target="_blank" rel="noopener">finally</a> 子句在任何情况下都会执行。<a href="https://docs.python.org/3/library/exceptions.html#TypeError" target="_blank" rel="noopener">TypeError</a> 在两个字符串相除的时候抛出，未被 except 子句捕获，因此在 <a href="https://docs.python.org/3/reference/compound_stmts.html#finally" target="_blank" rel="noopener">finally</a> 子句执行完毕后重新抛出。</p>
<p>在真实场景的应用程序中，<a href="https://docs.python.org/3/reference/compound_stmts.html#finally" target="_blank" rel="noopener">finally</a> 子句用于释放外部资源（文件 或网络连接之类的），无论它们的使用过程中是否出错。</p>
<h1 id="9-类"><a href="#9-类" class="headerlink" title="9. 类"></a>9. 类</h1><p> <a href="https://www.cnblogs.com/summer-cool/p/3884595.html" target="_blank" rel="noopener">Python中的作用域及global用法</a><br><a href="https://www.cnblogs.com/z360519549/p/5172020.html" target="_blank" rel="noopener">python中global 和 nonlocal 的作用域</a><br>9.7. 补充<br>有时类似于 Pascal 中“记录（record）”或 C 中“结构（struct）”的数据类型很有用，它将一组已命名的数据项绑定在一起。一个空的类定义可以很好的实现它:</p>
<h2 id="10-10-性能度量"><a href="#10-10-性能度量" class="headerlink" title="10.10. 性能度量"></a>10.10. 性能度量</h2><p>有些用户对了解解决同一问题的不同方法之间的性能差异很感兴趣。Python 提供了一个度量工具，为这些问题提供了直接答案。</p>
<p>例如，使用元组封装和拆封来交换元素看起来要比使用传统的方法要诱人的多。<a href="https://docs.python.org/3/library/timeit.html#module-timeit" target="_blank" rel="noopener">timeit</a> 证明了后者更快一些:</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; from timeit import Timer</span><br><span class="line">&gt;&gt;&gt; Timer(&apos;t=a; a=b; b=t&apos;, &apos;a=1; b=2&apos;).timeit()</span><br><span class="line">0.57535828626024577</span><br><span class="line">&gt;&gt;&gt; Timer(&apos;a,b = b,a&apos;, &apos;a=1; b=2&apos;).timeit()</span><br><span class="line">0.54962537085770791&lt;/pre&gt;</span><br></pre></td></tr></table></figure>
<p>相对于 <a href="https://docs.python.org/3/library/timeit.html#module-timeit" target="_blank" rel="noopener">timeit</a> 的细粒度，<a href="https://docs.python.org/3/library/profile.html#module-profile" target="_blank" rel="noopener">profile</a> 和 <a href="https://docs.python.org/3/library/profile.html#module-pstats" target="_blank" rel="noopener">pstats</a> 模块提供了针对更大代码块的时间度量工具。</p>
<p>pip freeze 将会生成一个类似需要安装的包的列表，但是输出采用了 pip install 期望的格式。常见的做法就是把它们放在一个 requirements.txt 文件:</p>
<p>requirements.txt 能够被提交到版本控制中并且作为一个应用程序的一部分。用户们可以使用 install -r 安装所有必须的包:</p>
<h1 id="what’s-more"><a href="#what’s-more" class="headerlink" title="what’s more"></a>what’s more</h1><p><a href="http://www.pythondoc.com/pythontutorial3/classes.html" target="_blank" rel="noopener">http://www.pythondoc.com/pythontutorial3/classes.html</a></p>


    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-01-01T07:55:37.000Z">2019-01-01</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/python/">python</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/python/基础/">基础</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    a minute read (About 151 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/01/01/python-可变参数/">python-可变参数</a>
            
        </h1>
        <div class="content">
            <a id="more"></a>
<h2 id="args-数组参数"><a href="#args-数组参数" class="headerlink" title="*args  数组参数"></a>*args  数组参数</h2><p>argsFunc 中匹配完定义好的参数，<strong>剩余的参数以元组的形式存储在 args</strong>（args 名称你可以自行定义）<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">def argsFunc(a, *args):</span><br><span class="line">    print(a)</span><br><span class="line">    print(args)</span><br><span class="line">    </span><br><span class="line">&gt;&gt;&gt; argsFunc(1, 2, 3, 4)</span><br><span class="line">1</span><br><span class="line">(2, 3, 4)</span><br></pre></td></tr></table></figure></p>
<h2 id="kwargs-字典参数"><a href="#kwargs-字典参数" class="headerlink" title="**kwargs 字典参数"></a>**kwargs 字典参数</h2><p>形参名前加两个*表示，参数在函数内部将被存放在以形式名为标识符的 dictionary 中，这时调用函数的方法则需要采用 arg1=value1,arg2=value2 这样的形式<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; def a(**x):print x</span><br><span class="line">&gt;&gt;&gt; a(x=1,y=2,z=3)</span><br><span class="line">&#123;&apos;y&apos;: 2, &apos;x&apos;: 1, &apos;z&apos;: 3&#125; #存放在字典中</span><br></pre></td></tr></table></figure></p>
<p>参考：<br><a href="https://www.cnblogs.com/jdy113/p/8051839.html" target="_blank" rel="noopener">简明Python 可变参数</a></p>

        </div>
        
        
        
    </div>
</div>









    <div id="toc-div" class="toc-article">
        <strong class="toc-title">Index</strong>
        
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#args-数组参数"><span class="toc-number">1.</span> <span class="toc-text">*args  数组参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#kwargs-字典参数"><span class="toc-number">2.</span> <span class="toc-text">**kwargs 字典参数</span></a></li></ol>
        
    </div>

<a id="more"></a>
<h2 id="args-数组参数"><a href="#args-数组参数" class="headerlink" title="*args  数组参数"></a>*args  数组参数</h2><p>argsFunc 中匹配完定义好的参数，<strong>剩余的参数以元组的形式存储在 args</strong>（args 名称你可以自行定义）<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">def argsFunc(a, *args):</span><br><span class="line">    print(a)</span><br><span class="line">    print(args)</span><br><span class="line">    </span><br><span class="line">&gt;&gt;&gt; argsFunc(1, 2, 3, 4)</span><br><span class="line">1</span><br><span class="line">(2, 3, 4)</span><br></pre></td></tr></table></figure></p>
<h2 id="kwargs-字典参数"><a href="#kwargs-字典参数" class="headerlink" title="**kwargs 字典参数"></a>**kwargs 字典参数</h2><p>形参名前加两个*表示，参数在函数内部将被存放在以形式名为标识符的 dictionary 中，这时调用函数的方法则需要采用 arg1=value1,arg2=value2 这样的形式<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; def a(**x):print x</span><br><span class="line">&gt;&gt;&gt; a(x=1,y=2,z=3)</span><br><span class="line">&#123;&apos;y&apos;: 2, &apos;x&apos;: 1, &apos;z&apos;: 3&#125; #存放在字典中</span><br></pre></td></tr></table></figure></p>
<p>参考：<br><a href="https://www.cnblogs.com/jdy113/p/8051839.html" target="_blank" rel="noopener">简明Python 可变参数</a></p>


    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-01-01T07:55:37.000Z">2019-01-01</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/python/">python</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/python/tricks/">tricks</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    a few seconds read (About 12 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/01/01/程序运行时间/">程序运行时间</a>
            
        </h1>
        <div class="content">
            <a id="more"></a>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">start = time.time()</span><br><span class="line"></span><br><span class="line">run(something)</span><br><span class="line"></span><br><span class="line">end = time.time()</span><br><span class="line">print(end-start)</span><br></pre></td></tr></table></figure>

        </div>
        
        
        
    </div>
</div>









    <div id="toc-div" class="toc-article">
        <strong class="toc-title">Index</strong>
        
            
        
    </div>

<a id="more"></a>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">start = time.time()</span><br><span class="line"></span><br><span class="line">run(something)</span><br><span class="line"></span><br><span class="line">end = time.time()</span><br><span class="line">print(end-start)</span><br></pre></td></tr></table></figure>


    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-01-01T07:55:37.000Z">2019-01-01</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/python/">python</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/python/基础/">基础</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    7 minutes read (About 984 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/01/01/python遍历文件夹及其子目录/">python遍历文件夹及其子目录</a>
            
        </h1>
        <div class="content">
            <a id="more"></a>
<h2 id="os-listdir-path"><a href="#os-listdir-path" class="headerlink" title="os.listdir(path)"></a>os.listdir(path)</h2><p>返回指定的文件夹包含的文件或文件夹的名字的列表</p>
<h2 id="walk-top-topdown-True-onerror-None-followlinks-False"><a href="#walk-top-topdown-True-onerror-None-followlinks-False" class="headerlink" title="walk(top, topdown=True, onerror=None, followlinks=False)"></a>walk(top, topdown=True, onerror=None, followlinks=False)</h2><p>参数</p>
<ul>
<li>top 是你所要遍历的目录的地址</li>
<li>topdown 为真，则优先遍历top目录，否则优先遍历top的子目录(默认为开启)</li>
<li>onerror 需要一个 callable 对象，当walk需要异常时，会调用</li>
<li>followlinks 如果为真，则会遍历目录下的快捷方式(linux 下是 symbolic link)实际所指的目录(默认关闭)</li>
</ul>
<p>os.walk 的返回值是一个<strong>生成器</strong>(generator),也就是说我们需要不断的遍历它，来获得所有的内容。<br>每次遍历的对象都是返回的是一个三元组(root,dirs,files)</p>
<ul>
<li>root 所指的是当前正在遍历的这个文件夹的本身的地址</li>
<li>dirs 是一个 list ，内容是该文件夹中所有的目录的名字(不包括子目录)</li>
<li>files 同样是 list , 内容是该文件夹中所有的文件(不包括子目录)</li>
</ul>
<p>一个使用例子，利用生成器，每次用.<strong>next</strong>()取得一个返回值，送入函数处理，直到所有的值已取得：<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">root_dirs_files = os.walk(folderpath)</span><br><span class="line">while True:</span><br><span class="line">    try:</span><br><span class="line">        your_function(root_dirs_files.__next__())</span><br><span class="line">    except StopIteration:</span><br><span class="line">        break</span><br></pre></td></tr></table></figure></p>
<p>一个小提示：在python 3.x中 generator（有yield关键字的函数则会被识别为generator函数）中的next变为<code>__next__</code>了,next是python 3.x以前版本中的方法</p>
<h1 id="3-另附os-path模块"><a href="#3-另附os-path模块" class="headerlink" title="3. 另附os.path模块"></a>3. 另附os.path模块</h1><p>os.path.abspath(path) #返回绝对路径<br>os.path.basename(path) #返回文件名<br>os.path.commonprefix(list) #返回list(多个路径)中，所有path共有的最长的路径。<br><strong>os.path.dirname(path) #返回文件路径<br>os.path.exists(path)  #路径存在则返回True,路径损坏返回False</strong><br>os.path.lexists  #路径存在则返回True,路径损坏也返回True<br>os.path.expanduser(path)  #把path中包含的”~”和”~user”转换成用户目录<br>os.path.expandvars(path)  #根据环境变量的值替换path中包含的”$name”和”${name}”<br>os.path.getatime(path)  #返回最后一次进入此path的时间。<br>os.path.getmtime(path)  #返回在此path下最后一次修改的时间。<br>os.path.getctime(path)  #返回path的大小<br>os.path.getsize(path)  #返回文件大小，如果文件不存在就返回错误<br>os.path.isabs(path)  #判断是否为绝对路径<br><strong>os.path.isfile(path)  #判断路径是否为文件<br>os.path.isdir(path)  #判断路径是否为目录</strong><br>os.path.islink(path)  #判断路径是否为链接<br>os.path.ismount(path)  #判断路径是否为挂载点（）<br><strong>os.path.join(path1[, path2[, …]])  #把目录和文件名合成一个路径</strong><br>os.path.normcase(path)  #转换path的大小写和斜杠<br>os.path.normpath(path)  #规范path字符串形式<br>os.path.realpath(path)  #返回path的真实路径<br>os.path.relpath(path[, start])  #从start开始计算相对路径<br>os.path.samefile(path1, path2)  #判断目录或文件是否相同<br>os.path.sameopenfile(fp1, fp2)  #判断fp1和fp2是否指向同一文件<br>os.path.samestat(stat1, stat2)  #判断stat tuple stat1和stat2是否指向同一个文件<br><strong>os.path.split(path)  #把路径分割成dirname和basename，返回一个元组</strong><br>os.path.splitdrive(path)   #一般用在windows下，返回驱动器名和路径组成的元组<br>os.path.splitext(path)  #分割路径，返回路径名和文件扩展名的元组<br>os.path.splitunc(path)  #把路径分割为加载点与文件<br><strong>os.path.walk(path, visit, arg)  #遍历path，进入每个目录都调用visit函数，visit函数必须有<br>3个参数(arg, dirname, names)，dirname表示当前目录的目录名，names代表当前目录下的所有<br>文件名，args则为walk的第三个参数</strong><br>os.path.supports_unicode_filenames  #设置是否支持unicode路径名</p>
<p>参考：<br><a href="https://www.jianshu.com/p/bbad16822eab" target="_blank" rel="noopener">python中os.walk的用法</a><br><a href="https://www.cnblogs.com/dkblog/archive/2011/03/25/1995537.html" target="_blank" rel="noopener">python os.path模块</a></p>

        </div>
        
        
        
    </div>
</div>









    <div id="toc-div" class="toc-article">
        <strong class="toc-title">Index</strong>
        
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#os-listdir-path"><span class="toc-number">1.</span> <span class="toc-text">os.listdir(path)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#walk-top-topdown-True-onerror-None-followlinks-False"><span class="toc-number">2.</span> <span class="toc-text">walk(top, topdown=True, onerror=None, followlinks=False)</span></a></li></ol><li class="toc-item toc-level-1"><a class="toc-link" href="#3-另附os-path模块"><span class="toc-number"></span> <span class="toc-text">3. 另附os.path模块</span></a>
        
    </li></div>

<a id="more"></a>
<h2 id="os-listdir-path"><a href="#os-listdir-path" class="headerlink" title="os.listdir(path)"></a>os.listdir(path)</h2><p>返回指定的文件夹包含的文件或文件夹的名字的列表</p>
<h2 id="walk-top-topdown-True-onerror-None-followlinks-False"><a href="#walk-top-topdown-True-onerror-None-followlinks-False" class="headerlink" title="walk(top, topdown=True, onerror=None, followlinks=False)"></a>walk(top, topdown=True, onerror=None, followlinks=False)</h2><p>参数</p>
<ul>
<li>top 是你所要遍历的目录的地址</li>
<li>topdown 为真，则优先遍历top目录，否则优先遍历top的子目录(默认为开启)</li>
<li>onerror 需要一个 callable 对象，当walk需要异常时，会调用</li>
<li>followlinks 如果为真，则会遍历目录下的快捷方式(linux 下是 symbolic link)实际所指的目录(默认关闭)</li>
</ul>
<p>os.walk 的返回值是一个<strong>生成器</strong>(generator),也就是说我们需要不断的遍历它，来获得所有的内容。<br>每次遍历的对象都是返回的是一个三元组(root,dirs,files)</p>
<ul>
<li>root 所指的是当前正在遍历的这个文件夹的本身的地址</li>
<li>dirs 是一个 list ，内容是该文件夹中所有的目录的名字(不包括子目录)</li>
<li>files 同样是 list , 内容是该文件夹中所有的文件(不包括子目录)</li>
</ul>
<p>一个使用例子，利用生成器，每次用.<strong>next</strong>()取得一个返回值，送入函数处理，直到所有的值已取得：<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">root_dirs_files = os.walk(folderpath)</span><br><span class="line">while True:</span><br><span class="line">    try:</span><br><span class="line">        your_function(root_dirs_files.__next__())</span><br><span class="line">    except StopIteration:</span><br><span class="line">        break</span><br></pre></td></tr></table></figure></p>
<p>一个小提示：在python 3.x中 generator（有yield关键字的函数则会被识别为generator函数）中的next变为<code>__next__</code>了,next是python 3.x以前版本中的方法</p>
<h1 id="3-另附os-path模块"><a href="#3-另附os-path模块" class="headerlink" title="3. 另附os.path模块"></a>3. 另附os.path模块</h1><p>os.path.abspath(path) #返回绝对路径<br>os.path.basename(path) #返回文件名<br>os.path.commonprefix(list) #返回list(多个路径)中，所有path共有的最长的路径。<br><strong>os.path.dirname(path) #返回文件路径<br>os.path.exists(path)  #路径存在则返回True,路径损坏返回False</strong><br>os.path.lexists  #路径存在则返回True,路径损坏也返回True<br>os.path.expanduser(path)  #把path中包含的”~”和”~user”转换成用户目录<br>os.path.expandvars(path)  #根据环境变量的值替换path中包含的”$name”和”${name}”<br>os.path.getatime(path)  #返回最后一次进入此path的时间。<br>os.path.getmtime(path)  #返回在此path下最后一次修改的时间。<br>os.path.getctime(path)  #返回path的大小<br>os.path.getsize(path)  #返回文件大小，如果文件不存在就返回错误<br>os.path.isabs(path)  #判断是否为绝对路径<br><strong>os.path.isfile(path)  #判断路径是否为文件<br>os.path.isdir(path)  #判断路径是否为目录</strong><br>os.path.islink(path)  #判断路径是否为链接<br>os.path.ismount(path)  #判断路径是否为挂载点（）<br><strong>os.path.join(path1[, path2[, …]])  #把目录和文件名合成一个路径</strong><br>os.path.normcase(path)  #转换path的大小写和斜杠<br>os.path.normpath(path)  #规范path字符串形式<br>os.path.realpath(path)  #返回path的真实路径<br>os.path.relpath(path[, start])  #从start开始计算相对路径<br>os.path.samefile(path1, path2)  #判断目录或文件是否相同<br>os.path.sameopenfile(fp1, fp2)  #判断fp1和fp2是否指向同一文件<br>os.path.samestat(stat1, stat2)  #判断stat tuple stat1和stat2是否指向同一个文件<br><strong>os.path.split(path)  #把路径分割成dirname和basename，返回一个元组</strong><br>os.path.splitdrive(path)   #一般用在windows下，返回驱动器名和路径组成的元组<br>os.path.splitext(path)  #分割路径，返回路径名和文件扩展名的元组<br>os.path.splitunc(path)  #把路径分割为加载点与文件<br><strong>os.path.walk(path, visit, arg)  #遍历path，进入每个目录都调用visit函数，visit函数必须有<br>3个参数(arg, dirname, names)，dirname表示当前目录的目录名，names代表当前目录下的所有<br>文件名，args则为walk的第三个参数</strong><br>os.path.supports_unicode_filenames  #设置是否支持unicode路径名</p>
<p>参考：<br><a href="https://www.jianshu.com/p/bbad16822eab" target="_blank" rel="noopener">python中os.walk的用法</a><br><a href="https://www.cnblogs.com/dkblog/archive/2011/03/25/1995537.html" target="_blank" rel="noopener">python os.path模块</a></p>



    
<div class="card card-transparent">
    <nav class="pagination is-centered" role="navigation" aria-label="pagination">
        <div class="pagination-previous">
            <a class="is-flex-grow has-text-black-ter" href="/page/2/">Previous</a>
        </div>
        <div class="pagination-next is-invisible is-hidden-mobile">
            <a class="is-flex-grow has-text-black-ter" href="/page/4/">Next</a>
        </div>
        <ul class="pagination-list is-hidden-mobile">
            
            <li><a class="pagination-link has-text-black-ter" href="/">1</a></li>
            
            <li><a class="pagination-link has-text-black-ter" href="/page/2/">2</a></li>
            
            <li><a class="pagination-link is-current" href="/page/3/">3</a></li>
            
        </ul>
    </nav>
</div>
</div>
                




<div class="column is-4-tablet is-4-desktop is-3-widescreen  has-order-1 column-left ">
    
        
<div class="card widget">
    <div class="card-content">
        <nav class="level">
            <div class="level-item has-text-centered">
                <div>
                    
                        <img class="image is-128x128 has-mb-6" src="/post_gallery/my_title.jpg" alt="Eric Tuan">
                    
                    
                    <p class="is-size-4 is-block">
                        Eric Tuan
                    </p>
                    
                    
                    <p class="is-size-6 is-block">
                        人世间 酸甜苦辣 若长良川
                    </p>
                    
                    
                    <p class="is-size-6 is-flex is-flex-center has-text-grey">
                        <i class="fas fa-map-marker-alt has-mr-7"></i>
                        <span>China</span>
                    </p>
                    
                </div>
            </div>
        </nav>
        <nav class="level is-mobile">
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Posts
                    </p>
                    <p class="title has-text-weight-normal">
                        27
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Categories
                    </p>
                    <p class="title has-text-weight-normal">
                        30
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Tags
                    </p>
                    <p class="title has-text-weight-normal">
                        11
                    </p>
                </div>
            </div>
        </nav>
        <div class="level">
            <a class="level-item button is-link is-rounded" href="https://github.com/EricTuan">
                Follow</a>
        </div>
        
        
        <div class="level is-mobile">
            
            <a class="level-item button is-white is-marginless" target="_blank" title="Github" href="https://github.com/EricTuan">
                
                <i class="fab fa-github"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank" title="简书" href="https://www.jianshu.com/u/0282253a3890">
                
                简书
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank" title="RSS" href="/">
                
                <i class="fas fa-rss"></i>
                
            </a>
            
        </div>
        
    </div>
</div>
    
        
    
        

<div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Links
        </h3>
        <ul class="menu-list">
        
            <li>
                <a class="level is-mobile" href="https://github.com/EricTuan" target="_blank">
                    <span class="level-left">
                        <span class="level-item">EricTuan</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">github.com</span>
                    </span>
                </a>
            </li>
        
            <li>
                <a class="level is-mobile" href="https://www.jianshu.com/u/0282253a3890" target="_blank">
                    <span class="level-left">
                        <span class="level-item">段浩然</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">www.jianshu.com</span>
                    </span>
                </a>
            </li>
        
        </ul>
        </div>
    </div>
</div>


    
        
<div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                Categories
            </h3>
            <ul class="menu-list">
            <li>
        <a class="level is-marginless" href="/categories/github/">
            <span class="level-start">
                <span class="level-item">github</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">2</span>
            </span>
        </a><ul><li>
        <a class="level is-marginless" href="/categories/github/个人博客/">
            <span class="level-start">
                <span class="level-item">个人博客</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">2</span>
            </span>
        </a></li></ul></li><li>
        <a class="level is-marginless" href="/categories/linux/">
            <span class="level-start">
                <span class="level-item">linux</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">5</span>
            </span>
        </a><ul><li>
        <a class="level is-marginless" href="/categories/linux/tricks/">
            <span class="level-start">
                <span class="level-item">tricks</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/linux/主题美化/">
            <span class="level-start">
                <span class="level-item">主题美化</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/linux/命令/">
            <span class="level-start">
                <span class="level-item">命令</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/linux/解压/">
            <span class="level-start">
                <span class="level-item">解压</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/linux/软件安装/">
            <span class="level-start">
                <span class="level-item">软件安装</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li></ul></li><li>
        <a class="level is-marginless" href="/categories/python/">
            <span class="level-start">
                <span class="level-item">python</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">14</span>
            </span>
        </a><ul><li>
        <a class="level is-marginless" href="/categories/python/Django/">
            <span class="level-start">
                <span class="level-item">Django</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/python/bug/">
            <span class="level-start">
                <span class="level-item">bug</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/python/conda/">
            <span class="level-start">
                <span class="level-item">conda</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/python/import模块/">
            <span class="level-start">
                <span class="level-item">import模块</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/python/json/">
            <span class="level-start">
                <span class="level-item">json</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/python/numpy/">
            <span class="level-start">
                <span class="level-item">numpy</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/python/pygal/">
            <span class="level-start">
                <span class="level-item">pygal</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/python/tricks/">
            <span class="level-start">
                <span class="level-item">tricks</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/python/基础/">
            <span class="level-start">
                <span class="level-item">基础</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">6</span>
            </span>
        </a></li></ul></li><li>
        <a class="level is-marginless" href="/categories/收藏/">
            <span class="level-start">
                <span class="level-item">收藏</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/服务器/">
            <span class="level-start">
                <span class="level-item">服务器</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a><ul><li>
        <a class="level is-marginless" href="/categories/服务器/远程连接/">
            <span class="level-start">
                <span class="level-item">远程连接</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li></ul></li><li>
        <a class="level is-marginless" href="/categories/深度学习/">
            <span class="level-start">
                <span class="level-item">深度学习</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">4</span>
            </span>
        </a><ul><li>
        <a class="level is-marginless" href="/categories/深度学习/tensorflow/">
            <span class="level-start">
                <span class="level-item">tensorflow</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/深度学习/模型优化/">
            <span class="level-start">
                <span class="level-item">模型优化</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">2</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/深度学习/面试经验/">
            <span class="level-start">
                <span class="level-item">面试经验</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li></ul></li>
            </ul>
        </div>
    </div>
</div>
    
        
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Tag Cloud
        </h3>
        <a href="/tags/Django/" style="font-size: 10px;">Django</a> <a href="/tags/bug/" style="font-size: 12px;">bug</a> <a href="/tags/github/" style="font-size: 12px;">github</a> <a href="/tags/linux/" style="font-size: 18px;">linux</a> <a href="/tags/python/" style="font-size: 20px;">python</a> <a href="/tags/tensorflow/" style="font-size: 10px;">tensorflow</a> <a href="/tags/小花样/" style="font-size: 14px;">小花样</a> <a href="/tags/模型优化/" style="font-size: 12px;">模型优化</a> <a href="/tags/深度学习/" style="font-size: 16px;">深度学习</a> <a href="/tags/远程连接/" style="font-size: 10px;">远程连接</a> <a href="/tags/面试经验/" style="font-size: 10px;">面试经验</a>
    </div>
</div>

    
    
        <div class="column-right-shadow is-hidden-widescreen ">
        
            
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Recent
        </h3>
        
        <article class="media">
            
            <a href="/2019/02/23/有点意思的文章/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="有点意思的文章">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-02-23T07:55:37.000Z">2019-02-23</time></div>
                    <a href="/2019/02/23/有点意思的文章/" class="has-link-black-ter is-size-6">有点意思的文章</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/收藏/">收藏</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/01/23/Django入门实践/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="Django入门实践">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-01-23T07:55:37.000Z">2019-01-23</time></div>
                    <a href="/2019/01/23/Django入门实践/" class="has-link-black-ter is-size-6">Django入门实践</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/python/">python</a> / <a class="has-link-grey -link" href="/categories/python/Django/">Django</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/01/22/Deep-Compression-论文阅读/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="Deep-Compression-论文阅读">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-01-22T07:55:37.000Z">2019-01-22</time></div>
                    <a href="/2019/01/22/Deep-Compression-论文阅读/" class="has-link-black-ter is-size-6">Deep-Compression-论文阅读</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/深度学习/">深度学习</a> / <a class="has-link-grey -link" href="/categories/深度学习/模型优化/">模型优化</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/01/22/dict和json格式转换/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="dict和json格式转换">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-01-22T07:55:37.000Z">2019-01-22</time></div>
                    <a href="/2019/01/22/dict和json格式转换/" class="has-link-black-ter is-size-6">dict和json格式转换</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/python/">python</a> / <a class="has-link-grey -link" href="/categories/python/json/">json</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/01/22/github搭建个人博客/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="github搭建个人博客">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-01-22T07:55:37.000Z">2019-01-22</time></div>
                    <a href="/2019/01/22/github搭建个人博客/" class="has-link-black-ter is-size-6">github搭建个人博客</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/github/">github</a> / <a class="has-link-grey -link" href="/categories/github/个人博客/">个人博客</a>
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>

        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Archives
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2019/02/">
                <span class="level-start">
                    <span class="level-item">February 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/01/">
                <span class="level-start">
                    <span class="level-item">January 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">26</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                Tags
            </h3>
            <div class="field is-grouped is-grouped-multiline">
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Django/">
                        <span class="tag">Django</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/bug/">
                        <span class="tag">bug</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/github/">
                        <span class="tag">github</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/linux/">
                        <span class="tag">linux</span>
                        <span class="tag is-grey">5</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/python/">
                        <span class="tag">python</span>
                        <span class="tag is-grey">15</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/tensorflow/">
                        <span class="tag">tensorflow</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/小花样/">
                        <span class="tag">小花样</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/模型优化/">
                        <span class="tag">模型优化</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/深度学习/">
                        <span class="tag">深度学习</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/远程连接/">
                        <span class="tag">远程连接</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/面试经验/">
                        <span class="tag">面试经验</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
            </div>
        </div>
    </div>
</div>
        
        </div>
    
</div>

                
                




<div class="column is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only has-order-3 column-right ">
    
        
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Recent
        </h3>
        
        <article class="media">
            
            <a href="/2019/02/23/有点意思的文章/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="有点意思的文章">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-02-23T07:55:37.000Z">2019-02-23</time></div>
                    <a href="/2019/02/23/有点意思的文章/" class="has-link-black-ter is-size-6">有点意思的文章</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/收藏/">收藏</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/01/23/Django入门实践/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="Django入门实践">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-01-23T07:55:37.000Z">2019-01-23</time></div>
                    <a href="/2019/01/23/Django入门实践/" class="has-link-black-ter is-size-6">Django入门实践</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/python/">python</a> / <a class="has-link-grey -link" href="/categories/python/Django/">Django</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/01/22/Deep-Compression-论文阅读/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="Deep-Compression-论文阅读">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-01-22T07:55:37.000Z">2019-01-22</time></div>
                    <a href="/2019/01/22/Deep-Compression-论文阅读/" class="has-link-black-ter is-size-6">Deep-Compression-论文阅读</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/深度学习/">深度学习</a> / <a class="has-link-grey -link" href="/categories/深度学习/模型优化/">模型优化</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/01/22/dict和json格式转换/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="dict和json格式转换">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-01-22T07:55:37.000Z">2019-01-22</time></div>
                    <a href="/2019/01/22/dict和json格式转换/" class="has-link-black-ter is-size-6">dict和json格式转换</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/python/">python</a> / <a class="has-link-grey -link" href="/categories/python/json/">json</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/01/22/github搭建个人博客/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="github搭建个人博客">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-01-22T07:55:37.000Z">2019-01-22</time></div>
                    <a href="/2019/01/22/github搭建个人博客/" class="has-link-black-ter is-size-6">github搭建个人博客</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/github/">github</a> / <a class="has-link-grey -link" href="/categories/github/个人博客/">个人博客</a>
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>

    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Archives
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2019/02/">
                <span class="level-start">
                    <span class="level-item">February 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/01/">
                <span class="level-start">
                    <span class="level-item">January 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">26</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                Tags
            </h3>
            <div class="field is-grouped is-grouped-multiline">
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Django/">
                        <span class="tag">Django</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/bug/">
                        <span class="tag">bug</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/github/">
                        <span class="tag">github</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/linux/">
                        <span class="tag">linux</span>
                        <span class="tag is-grey">5</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/python/">
                        <span class="tag">python</span>
                        <span class="tag is-grey">15</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/tensorflow/">
                        <span class="tag">tensorflow</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/小花样/">
                        <span class="tag">小花样</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/模型优化/">
                        <span class="tag">模型优化</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/深度学习/">
                        <span class="tag">深度学习</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/远程连接/">
                        <span class="tag">远程连接</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/面试经验/">
                        <span class="tag">面试经验</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
            </div>
        </div>
    </div>
</div>
    
    
</div>

                
            </div>
        </div>
    </section>
    <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?8b15341149dd72c215e2e84f172591d2";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

<footer class="footer">
    <div class="container">
        <div class="level">
            <div class="level-start has-text-centered-mobile">
                <a class="footer-logo is-block has-mb-6" href="/">
                
                    <img src="/images/icon.png" alt="Eric Tuan" height="28">
                
                </a>
                <p class="is-size-7">
                &copy; 2019 Eric Tuan&nbsp;
                Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a href="http://github.com/ppoffice/hexo-theme-icarus" target="_blank">Icarus</a>
                
                <br>
                <span id="busuanzi_container_site_uv">
                Visited by <span id="busuanzi_value_site_uv">0</span> users
                </span>
                
                </p>
            </div>
            <div class="level-end">
            
                <div class="field has-addons is-flex-center-mobile has-mt-5-mobile is-flex-wrap is-flex-middle">
                
                
                <p class="control">
                    <a class="button is-white " target="_blank" title="简书" href="https://www.jianshu.com/u/0282253a3890">
                        
                        简书
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="My GitHub" href="https://github.com/EricTuan">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                </p>
                
                </div>
            
            </div>
        </div>
    </div>
</footer>

    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("en");</script>


    
    
    
    <script src="/js/animation.js"></script>
    

    
    
    
    <script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script>
    <script src="/js/gallery.js" defer></script>
    

    
    

<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update
            my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        });
    });
</script>


    
    
<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    MathJax.Hub.Config({
        'HTML-CSS': {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
});
</script>

    
    

<a id="back-to-top" title="Back to Top" href="javascript:;">
    <i class="fas fa-chevron-up"></i>
</a>
<script src="/js/back-to-top.js" defer></script>


    
    

    
    
    
    

    
    
    
    
    
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>
    <script src="/js/clipboard.js" defer></script>
    

    
    
    

    
    
    


<script src="/js/main.js" defer></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="Type something...">
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'Posts',
                PAGES: 'Pages',
                CATEGORIES: 'Categories',
                TAGS: 'Tags',
                UNTITLED: '(Untitled)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js" defer></script>
<link rel="stylesheet" href="/css/search.css">
<link rel="stylesheet" href="/css/insight.css">
    
</body>
</html>